"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["40592"],{95954(e,n,l){l.r(n),l.d(n,{metadata:()=>t,default:()=>c,frontMatter:()=>s,contentTitle:()=>a,toc:()=>o,assets:()=>d});var t=JSON.parse('{"id":"getting-started/lint-rules","title":"Relay ESLint Plugin","description":"ESLint Plugin Relay","source":"@site/versioned_docs/version-v20.0.0/getting-started/lint-rules.md","sourceDirName":"getting-started","slug":"/getting-started/lint-rules/","permalink":"/docs/v20.0.0/getting-started/lint-rules/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v20.0.0/getting-started/lint-rules.md","tags":[],"version":"v20.0.0","frontMatter":{"id":"lint-rules","title":"Relay ESLint Plugin","slug":"/getting-started/lint-rules/","description":"ESLint Plugin Relay","keywords":["eslint","lint"]},"sidebar":"docs","previous":{"title":"Compiler Configuration","permalink":"/docs/v20.0.0/getting-started/compiler-config/"},"next":{"title":"Editor Support","permalink":"/docs/v20.0.0/editor-support/"}}'),i=l(74848),r=l(28453);let s={id:"lint-rules",title:"Relay ESLint Plugin",slug:"/getting-started/lint-rules/",description:"ESLint Plugin Relay",keywords:["eslint","lint"]},a,d={},o=[{value:"Installation",id:"installation",level:2},{value:"Rule Descriptions",id:"rule-descriptions",level:2},{value:"<code>relay/unused-fields</code>",id:"relayunused-fields",level:3},{value:"<code>relay/no-future-added-value</code>",id:"relayno-future-added-value",level:3},{value:"<code>relay/graphql-syntax</code>",id:"relaygraphql-syntax",level:3},{value:"<code>relay/graphql-naming</code>",id:"relaygraphql-naming",level:3},{value:"<code>relay/function-required-argument</code>",id:"relayfunction-required-argument",level:3},{value:"<code>relay/hook-required-argument</code>",id:"relayhook-required-argument",level:3},{value:"<code>relay/must-colocate-fragment-spreads</code>",id:"relaymust-colocate-fragment-spreads",level:3},{value:"Suppressing rules within graphql tags",id:"suppressing-rules-within-graphql-tags",level:2},{value:"Contributing",id:"contributing",level:2}];function u(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["One of the unique features enabled by Relay is the ability to statically detect unused GraphQL fields. This can ",(0,i.jsx)(n.a,{href:"https://relay.dev/blog/2023/10/24/how-relay-enables-optimal-data-fetching/",children:"categorically prevent"}),' the "append only query" problem that is a common disfunction in many GraphQL clients.']}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Relay ESLint Plugin",src:l(38325).A+"",width:"2244",height:"1592"})}),"\n",(0,i.jsxs)(n.p,{children:["This validation, and other helpful checks, are enabled by Relay's ESLint plugin ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-relay",children:(0,i.jsx)(n.code,{children:"eslint-plugin-relay"})}),". ",(0,i.jsx)(n.strong,{children:"The Relay ESLint plugin is a key part of the Relay developer experience"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["Assuming you have ",(0,i.jsx)(n.a,{href:"https://eslint.org/",children:"ESLint"})," already installed, you can add the Relay ESLint plugin to your project by running:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"npm install --save-dev eslint-plugin-relay\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then update your ESLint configuration to include the plugin:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'tile="eslint.config.js"',children:"import relay from 'eslint-plugin-relay';\n\nexport default [\n  // ... other ESlint Config\n  {\n    plugins: { relay },\n    rules: relay.configs['ts-recommended'].rules,\n  },\n];\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rule-descriptions",children:"Rule Descriptions"}),"\n",(0,i.jsx)(n.p,{children:"The following validation rules are included in the Relay ESLint plugin:"}),"\n",(0,i.jsx)(n.h3,{id:"relayunused-fields",children:(0,i.jsx)(n.code,{children:"relay/unused-fields"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures that every GraphQL field referenced is used within the module that includes it. This helps enable Relay's ",(0,i.jsx)(n.a,{href:"https://relay.dev/blog/2023/10/24/how-relay-enables-optimal-data-fetching/",children:"optimal data fetching"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"relayno-future-added-value",children:(0,i.jsx)(n.code,{children:"relay/no-future-added-value"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures code does not try to explicitly handle the ",(0,i.jsx)(n.code,{children:'"%future added value"'})," enum variant which Relay inserts as a placeholder to ensure you handle the possibility that new enum variants may be added by the server after your application has been deployed."]}),"\n",(0,i.jsx)(n.h3,{id:"relaygraphql-syntax",children:(0,i.jsx)(n.code,{children:"relay/graphql-syntax"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures each ",(0,i.jsx)(n.code,{children:"graphql"})," tagged template literal contains syntactically valid GraphQL. This is also validated by the Relay Compiler, but the ESLint plugin can often provide faster feedback."]}),"\n",(0,i.jsx)(n.h3,{id:"relaygraphql-naming",children:(0,i.jsx)(n.code,{children:"relay/graphql-naming"})}),"\n",(0,i.jsx)(n.p,{children:"Ensures GraphQL fragments and queries follow Relay's naming conventions. This is also validated by the Relay Compiler, but the ESLint plugin can often provide faster feedback."}),"\n",(0,i.jsx)(n.h3,{id:"relayfunction-required-argument",children:(0,i.jsx)(n.code,{children:"relay/function-required-argument"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures that ",(0,i.jsx)(n.code,{children:"readInlineData"})," is always passed an explicit argument even though that argument is allowed to be ",(0,i.jsx)(n.code,{children:"undefined"})," at runtime."]}),"\n",(0,i.jsx)(n.h3,{id:"relayhook-required-argument",children:(0,i.jsx)(n.code,{children:"relay/hook-required-argument"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures that Relay hooks are always passed an explicit argument even though that argument is allowed to be ",(0,i.jsx)(n.code,{children:"undefined"})," at runtime."]}),"\n",(0,i.jsx)(n.h3,{id:"relaymust-colocate-fragment-spreads",children:(0,i.jsx)(n.code,{children:"relay/must-colocate-fragment-spreads"})}),"\n",(0,i.jsxs)(n.p,{children:["Ensures that when a fragment spread is added within a module, that module directly imports the module which defines that fragment. This prevents the anti-pattern when one component fetches a fragment that is not used by a direct child component.\n",(0,i.jsx)(n.strong,{children:"Note"}),": This rule leans heavily on Meta's globally unique module names. It likely won't work well in other environments."]}),"\n",(0,i.jsx)(n.h2,{id:"suppressing-rules-within-graphql-tags",children:"Suppressing rules within graphql tags"}),"\n",(0,i.jsx)(n.p,{children:"The following rules support suppression within graphql tags:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"relay/unused-fields"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"relay/must-colocate-fragment-spreads"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Supported rules can be suppressed by adding ",(0,i.jsx)(n.code,{children:"# eslint-disable-next-line relay/name-of-rule"})," to the preceding line:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"graphql`\n  fragment foo on Page {\n    # eslint-disable-next-line relay/must-colocate-fragment-spreads\n    ...unused1\n  }\n`;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that only the ",(0,i.jsx)(n.code,{children:"eslint-disable-next-line"})," form of suppression works. ",(0,i.jsx)(n.code,{children:"eslint-disable-line"})," doesn't currently work until graphql-js provides support for ",(0,i.jsx)(n.a,{href:"https://github.com/graphql/graphql-js/issues/2241",children:"parsing Comment nodes"})," in their AST."]}),"\n",(0,i.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,i.jsxs)(n.p,{children:["If you wish to contribute to the Relay ESLint plugin, you can find the code on GitHub at ",(0,i.jsx)(n.a,{href:"https://github.com/relayjs/eslint-plugin-relay/",children:"relay/eslint-plugin-relay"}),"."]})]})}function c(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},38325(e,n,l){l.d(n,{A:()=>t});let t=l.p+"assets/images/no-unused-fields-a269dbf72527dd3e11b2e99ea6b14047.png"},28453(e,n,l){l.d(n,{R:()=>s,x:()=>a});var t=l(96540);let i={},r=t.createContext(i);function s(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);