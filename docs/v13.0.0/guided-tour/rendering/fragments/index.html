<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-v13.0.0 docs-doc-page docs-doc-id-guided-tour/rendering/fragments" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Fragments | Relay</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://relay.dev/img/relay.png /><meta data-rh=true name=twitter:image content=https://relay.dev/img/relay.png /><meta data-rh=true property=og:url content=https://relay.dev/docs/v13.0.0/guided-tour/rendering/fragments/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=v13.0.0 /><meta data-rh=true name=docusaurus_tag content=docs-default-v13.0.0 /><meta data-rh=true name=docsearch:version content=v13.0.0 /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-v13.0.0 /><meta data-rh=true property=og:title content="Fragments | Relay"/><meta data-rh=true name=description content="Relay guide to rendering fragments"/><meta data-rh=true property=og:description content="Relay guide to rendering fragments"/><meta data-rh=true name=keywords content=useFragment,rendering,fragment /><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://relay.dev/docs/v13.0.0/guided-tour/rendering/fragments/ /><link data-rh=true rel=alternate href=https://relay.dev/docs/v13.0.0/guided-tour/rendering/fragments/ hreflang=en /><link data-rh=true rel=alternate href=https://relay.dev/docs/v13.0.0/guided-tour/rendering/fragments/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://UBPJPW35NS-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://relay.dev/docs/v13.0.0/guided-tour/rendering/fragments/","name":"Fragments","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Relay RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Relay Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-DCSC7FDGL5","auto"),ga("send","pageview")</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-DCSC7FDGL5"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DCSC7FDGL5",{})</script><link rel=search type=application/opensearchdescription+xml title=Relay href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.deec89cd.css /><script src=/assets/js/runtime~main.a8bcdfc7.js defer></script><script src=/assets/js/main.a2788f68.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id=internaldocs-banner></div><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbar--primary"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">Relay</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/>Docs</a><a class="navbar__item navbar__link" href=/blog/>Blog</a><a class="navbar__item navbar__link" href=/help/>Help</a><a href=https://github.com/facebook/relay target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/docs/v13.0.0/guided-tour/rendering/fragments/>v13.0.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/next/guided-tour/rendering/fragments/>Next ðŸš§</a><li><a class=dropdown__link href=/docs/guided-tour/rendering/fragments/>v20.1.0</a><li><a class=dropdown__link href=/docs/v20.0.0/guided-tour/rendering/fragments/>v20.0.0</a><li><a class=dropdown__link href=/docs/v19.0.0/guided-tour/rendering/fragments/>v19.0.0</a><li><a class=dropdown__link href=/docs/v18.0.0/guided-tour/rendering/fragments/>v18.0.0</a><li><a class=dropdown__link href=/docs/v17.0.0/guided-tour/rendering/fragments/>v17.0.0</a><li><a class=dropdown__link href=/docs/v16.0.0/guided-tour/rendering/fragments/>v16.0.0</a><li><a class=dropdown__link href=/docs/v15.0.0/guided-tour/rendering/fragments/>v15.0.0</a><li><a class=dropdown__link href=/docs/v14.0.0/guided-tour/rendering/fragments/>v14.0.0</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/v13.0.0/guided-tour/rendering/fragments/>v13.0.0</a><li><a class=dropdown__link href=/versions/>All versions</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/><span title="Getting Started" class=categoryLinkLabel_W154>Getting Started</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/v13.0.0/guided-tour/><span title="A Guided Tour" class=categoryLinkLabel_W154>A Guided Tour</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/><span title=Introduction class=linkLabel_WmDU>Introduction</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/workflow/><span title=Workflow class=linkLabel_WmDU>Workflow</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/queries/><span title="Rendering Data Basics" class=categoryLinkLabel_W154>Rendering Data Basics</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/queries/><span title=Queries class=linkLabel_WmDU>Queries</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/fragments/><span title=Fragments class=linkLabel_WmDU>Fragments</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/variables/><span title=Variables class=linkLabel_WmDU>Variables</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/loading-states/><span title="Loading States with Suspense" class=linkLabel_WmDU>Loading States with Suspense</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/error-states/><span title="Error States with ErrorBoundaries" class=linkLabel_WmDU>Error States with ErrorBoundaries</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/v13.0.0/guided-tour/rendering/environment/><span title=Environment class=linkLabel_WmDU>Environment</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/v13.0.0/guided-tour/reusing-cached-data/><span title="Reusing Cached Data for Rendering" class=categoryLinkLabel_W154>Reusing Cached Data for Rendering</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/v13.0.0/guided-tour/refetching/><span title="Refreshing and Refetching" class=categoryLinkLabel_W154>Refreshing and Refetching</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/v13.0.0/guided-tour/list-data/connections/><span title="Rendering List Data and Pagination" class=categoryLinkLabel_W154>Rendering List Data and Pagination</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/v13.0.0/guided-tour/updating-data/><span title="Updating Data" class=categoryLinkLabel_W154>Updating Data</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/v13.0.0/guided-tour/accessing-data-without-react/retaining-queries/><span title="Managing Data Outside React" class=categoryLinkLabel_W154>Managing Data Outside React</span></a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/api-reference/relay-environment-provider/><span title="API Reference" class=categoryLinkLabel_W154>API Reference</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/guides/graphql-server-specification/><span title=Guides class=categoryLinkLabel_W154>Guides</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/migration-and-compatibility/><span title="Migration and Compatibility" class=categoryLinkLabel_W154>Migration and Compatibility</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/debugging/relay-devtools/><span title=Debugging class=categoryLinkLabel_W154>Debugging</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/v13.0.0/principles-and-architecture/thinking-in-graphql/><span title="Principles and Architecture" class=categoryLinkLabel_W154>Principles and Architecture</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/v13.0.0/community-learning-resources/><span title="Community Learning Resources" class=linkLabel_WmDU>Community Learning Resources</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/v13.0.0/glossary/><span title=Glossary class=linkLabel_WmDU>Glossary</span></a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for <!-- -->Relay<!-- --> <b>v13.0.0</b>, which is no longer actively maintained.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/guided-tour/rendering/fragments/>latest version</a></b> (<!-- -->v20.1.0<!-- -->).</div></div><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>A Guided Tour</span><li class=breadcrumbs__item><span class=breadcrumbs__link>Rendering Data Basics</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Fragments</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v13.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Fragments</h1></header><p>The main building block for declaring data dependencies for React Components in Relay are <a href=https://graphql.org/learn/queries/#fragments target=_blank rel="noopener noreferrer" class="">GraphQL Fragments</a>. Fragments are reusable units in GraphQL that represent a set of data to query from a GraphQL type exposed in the <a href=https://graphql.org/learn/schema/ target=_blank rel="noopener noreferrer" class="">schema</a>.</p>
<p>In practice, they are a selection of fields on a GraphQL Type:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token keyword" style=color:#00009f>fragment</span><span class="token plain"> </span><span class="token fragment function" style=color:black>UserFragment</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property" style=color:black>name</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property" style=color:black>age</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property-query">profile_picture</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token attr-name" style=color:#2a6883>scale</span><span class="token punctuation" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token number" style=color:black>2</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token property" style=color:black>uri</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<p>In order to declare a fragment inside your JavaScript code, you must use the <code>graphql</code> tag:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> userFragment </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserFragment_user</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql property" style=color:black>age</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql property-query">profile_picture</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql attr-name" style=color:#2a6883>scale</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql number" style=color:black>2</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql property" style=color:black>uri</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql"></span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=rendering-fragments>Rendering Fragments<a href=#rendering-fragments class=hash-link aria-label="Direct link to Rendering Fragments" title="Direct link to Rendering Fragments" translate=no>â€‹</a></h2>
<p>In order to <em>render</em> the data for a fragment, you can use the <code>useFragment</code> Hook:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UserComponent_user.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> useFragment</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>user</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>UserComponent</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter literal-property property" style=color:black>props</span><span class="token parameter operator" style=color:#b58a5e>:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Props</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> data </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserComponent_user</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property-query">profile_picture</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql attr-name" style=color:#2a6883>scale</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql number" style=color:black>2</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property" style=color:black>uri</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">name</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">img src</span><span class="token operator" style=color:#b58a5e>=</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">profile_picture</span><span class="token operator" style=color:#b58a5e>?.</span><span class="token plain">uri</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<p>Let's distill what's going on here:</p>
<ul>
<li class=""><code>useFragment</code> takes a fragment definition and a <em>fragment reference</em>, and returns the corresponding <code>data</code> for that fragment and reference.</li>
<li class="">A <em>fragment reference</em> is an object that Relay uses to <em>read</em> the data declared in the fragment definition; as you can see, the <code>UserComponent_user</code> fragment itself just declares fields on the <code>User</code> type, but we need to know <em>which</em> specific user to read those fields from; this is what the fragment reference corresponds to. In other words, a fragment reference is like <em>a pointer to a specific instance of a type</em> that we want to read data from.</li>
<li class="">Note that <em>the component is automatically subscribed to updates to the fragment data</em>: if the data for this particular <code>User</code> is updated anywhere in the app (e.g. via fetching new data, or mutating existing data), the component will automatically re-render with the latest updated data.</li>
<li class="">Relay will automatically generate Flow types for any declared fragments when the compiler is run, so you can use these types to declare the type for your Component's <code>props</code>.<!-- -->
<ul>
<li class="">The generated Flow types include a type for the fragment reference, which is the type with the <code>$key</code> suffix: <code>&lt;fragment_name>$key</code>, and a type for the shape of the data, which is the type with the <code>$data</code> suffix:  <code>&lt;fragment_name>$data</code>; these types are available to import from files that are generated with the following name: <code>&lt;fragment_name>.graphql.js</code>.</li>
<li class="">We use our <a href=https://github.com/relayjs/eslint-plugin-relay target=_blank rel="noopener noreferrer" class="">lint rule</a> to enforce that the type of the fragment reference prop is correctly declared when using <code>useFragment</code>. By using a properly typed fragment reference as input, the type of the returned <code>data</code> will automatically be Flow-typed without requiring an explicit annotation.</li>
<li class="">In our example, we're typing the <code>user</code> prop as the fragment reference we need for <code>useFragment</code>, which corresponds to the <code>UserComponent_user$key</code> imported from  <code>UserComponent_user.graphql</code>, which means that the type of <code>data</code> above would be: <code>{ name: ?string, profile_picture: ?{ uri: ?string } }</code>.</li>
</ul>
</li>
<li class="">Fragment names need to be globally unique. In order to easily achieve this, we name fragments using the following convention based on the module name followed by an identifier: <code>&lt;module_name>_&lt;property_name></code>. This makes it easy to identify which fragments are defined in which modules and avoids name collisions when multiple fragments are defined in the same module.</li>
</ul>
<p>If you need to render data from multiple fragments inside the same component, you can use  <code>useFragment</code> multiple times:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UserComponent_user.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UserComponent_viewer$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UserComponent_viewer.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> useFragment</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>user</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>viewer</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent_viewer$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>UserComponent</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter literal-property property" style=color:black>props</span><span class="token parameter operator" style=color:#b58a5e>:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Props</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> userData </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserComponent_user</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property-query">profile_picture</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql attr-name" style=color:#2a6883>scale</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql number" style=color:black>2</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property" style=color:black>uri</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> viewerData </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserComponent_viewer</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">Viewer</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql object">actor</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">viewer</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">userData</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">name</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">img src</span><span class="token operator" style=color:#b58a5e>=</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">userData</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">profile_picture</span><span class="token operator" style=color:#b58a5e>?.</span><span class="token plain">uri</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token maybe-class-name">Acting</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>as</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">viewerData</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">actor</span><span class="token operator" style=color:#b58a5e>?.</span><span class="token plain">name </span><span class="token operator" style=color:#b58a5e>??</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'Unknown'</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=composing-fragments>Composing Fragments<a href=#composing-fragments class=hash-link aria-label="Direct link to Composing Fragments" title="Direct link to Composing Fragments" translate=no>â€‹</a></h2>
<p>In GraphQL, fragments are reusable units, which means they can include <em>other</em> fragments, and consequently a fragment can be included within other fragments or <a class="" href=/docs/v13.0.0/guided-tour/rendering/queries/>queries</a>:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token keyword" style=color:#00009f>fragment</span><span class="token plain"> </span><span class="token fragment function" style=color:black>UserFragment</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property" style=color:black>name</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property" style=color:black>age</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property-query">profile_picture</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token attr-name" style=color:#2a6883>scale</span><span class="token punctuation" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token number" style=color:black>2</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token property" style=color:black>uri</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token operator" style=color:#b58a5e>...</span><span class="token fragment function" style=color:black>AnotherUserFragment</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>fragment</span><span class="token plain"> </span><span class="token fragment function" style=color:black>AnotherUserFragment</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token property" style=color:black>username</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token operator" style=color:#b58a5e>...</span><span class="token fragment function" style=color:black>FooUserFragment</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<p>With Relay, you can compose fragment components in a similar way, using both component composition and fragment composition. Each React component is responsible for fetching the data dependencies of its direct children - just as it has to know about its children's props in order to render them correctly. This pattern means that developers are able to reason locally about components - what data they need, what components they render - but Relay is able to derive a global view of the data dependencies of an entire UI tree.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * UsernameSection.react.js</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> *</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * Child Fragment Component</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UsernameSection_user$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UsernameSection_user.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> useFragment</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>user</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UsernameSection_user$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>UsernameSection</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter literal-property property" style=color:black>props</span><span class="token parameter operator" style=color:#b58a5e>:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Props</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> data </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UsernameSection_user</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property" style=color:black>username</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">username</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>??</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'Unknown'</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token maybe-class-name">UsernameSection</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * UserComponent.react.js</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> *</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * Parent Fragment Component</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UserComponent_user.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> useFragment</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">UsernameSection</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'./UsernameSection.react'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>user</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>UserComponent</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter literal-property property" style=color:black>props</span><span class="token parameter operator" style=color:#b58a5e>:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Props</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> user </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserComponent_user</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property" style=color:black>age</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property-query">profile_picture</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql attr-name" style=color:#2a6883>scale</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql number" style=color:black>2</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property" style=color:black>uri</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql comment" style=color:#999988;font-style:italic># Include child fragment:</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql operator" style=color:#b58a5e>...</span><span class="token template-string graphql language-graphql fragment function" style=color:black>UsernameSection_user</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">user</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">name</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">img src</span><span class="token operator" style=color:#b58a5e>=</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">user</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">profile_picture</span><span class="token operator" style=color:#b58a5e>?.</span><span class="token plain">uri</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">user</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">age</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token comment" style=color:#999988;font-style:italic>/* Render child component, passing the _fragment reference_: */</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">        </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token maybe-class-name">UsernameSection</span><span class="token plain"> user</span><span class="token operator" style=color:#b58a5e>=</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">user</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">div</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<p>There are a few things to note here:</p>
<ul>
<li class=""><code>UserComponent</code> both renders <code>UsernameSection</code>, <em>and</em> includes the fragment declared by <code>UsernameSection</code> inside its own <code>graphql</code> fragment declaration.</li>
<li class=""><code>UsernameSection</code> expects a <em>fragment reference</em> as the <code>user</code> prop. As we've mentioned before, a fragment reference is an object that Relay uses to <em>read</em> the data declared in the fragment definition; as you can see, the child <code>UsernameSection_user</code> fragment itself just declares fields on the <code>User</code> type, but we need to know <em>which</em> specific user to read those fields from; this is what the fragment reference corresponds to. In other words, a fragment reference is like <em>a pointer to a specific instance of a type</em> that we want to read data from.</li>
<li class="">Note that in this case the <code>user</code> passed to <code>UsernameSection</code>, i.e. the fragment reference, <em>doesn't actually contain any of the data declared by the child <code>UsernameSection</code> component</em>; instead, <code>UsernameSection</code> will use the fragment reference to read the data <em>it</em> declared internally, using <code>useFragment</code>. This prevents the parent from implicitly creating dependencies on data declared by its children, and vice-versa, which allows us to reason locally about our components and modify them without worrying about affecting other components. If this wasn't the case, and the parent had access to the child's data, modifying the data declared by the child could break the parent. This is known as <a class="" href=/docs/v13.0.0/principles-and-architecture/thinking-in-relay/><em>data masking</em></a>.</li>
<li class="">The <em>fragment reference</em> that the child (i.e.  <code>UsernameSection</code>) expects is the result of reading a parent fragment that <em>includes</em> the child fragment. In our particular example, that means the result of reading a fragment that includes <code>...UsernameSection_user</code> will be the fragment reference that <code>UsernameSection</code> expects. In other words, the data obtained as a result of reading a fragment via <code>useFragment</code> also serves as the fragment reference for any child fragments included in that fragment.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=composing-fragments-into-queries>Composing Fragments into Queries<a href=#composing-fragments-into-queries class=hash-link aria-label="Direct link to Composing Fragments into Queries" title="Direct link to Composing Fragments into Queries" translate=no>â€‹</a></h2>
<p>Fragments in Relay allow declaring data dependencies for a component, but they <em><strong>can't be fetched by themselves</strong></em>. Instead, they need to be included in a query, either directly or transitively. This means that <em>all fragments must belong to a query when they are rendered</em>, or in other words, they must be "rooted" under some query. Note that a single fragment can still be included by multiple queries, but when rendering a specific <em>instance</em> of a fragment component, it must have been included as part of a specific query request.</p>
<p>To fetch and render a query that includes a fragment, you can compose them in the same way fragments are composed, as shown in the <a href=#composing-fragments class="">Composing Fragments</a> section:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * UserComponent.react.js</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> *</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * Fragment Component</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'UserComponent_user.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> useFragment</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>user</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent_user$key</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>UserComponent</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter literal-property property" style=color:black>props</span><span class="token parameter operator" style=color:#b58a5e>:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Props</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> data </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>useFragment</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql operator" style=color:#b58a5e>...</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    props</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token spread operator" style=color:#b58a5e>...</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent</span><span class="token punctuation" style=color:#b58a5e>;</span><br/></span></code></pre></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * App.react.js</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> *</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * Query Component</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">AppQuery</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'AppQuery.graphql'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> type </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token maybe-class-name">PreloadedQuery</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'React'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">graphql</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"> usePreloadedQuery</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'react-relay'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token maybe-class-name">UserComponent</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token function" style=color:black>require</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token string" style=color:#65822b>'./UserComponent.react'</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>appQueryRef</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">PreloadedQuery</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token maybe-class-name">AppQuery</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:black>App</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token parameter punctuation" style=color:#b58a5e>{</span><span class="token parameter">appQueryRef</span><span class="token parameter punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> data </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> usePreloadedQuery</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token maybe-class-name">AppQuery</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql keyword" style=color:#00009f>query</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql definition-query function" style=color:black>AppQuery</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql variable" style=color:black>$id</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql scalar">ID</span><span class="token template-string graphql language-graphql operator" style=color:#b58a5e>!</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property-query">user</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>(</span><span class="token template-string graphql language-graphql attr-name" style=color:#2a6883>id</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable" style=color:black>$id</span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>{</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property" style=color:black>name</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql comment" style=color:#999988;font-style:italic># Include child fragment:</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql operator" style=color:#b58a5e>...</span><span class="token template-string graphql language-graphql fragment function" style=color:black>UserComponent_user</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style=color:#b58a5e>}</span><span class="token template-string graphql language-graphql"></span><br/></span><span class=token-line style=color:black><span class="token template-string graphql language-graphql">    </span><span class="token template-string template-punctuation string" style=color:#65822b>`</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    appQueryRef</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token operator" style=color:#b58a5e>?.</span><span class="token plain">name</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token plain">h1</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token comment" style=color:#999988;font-style:italic>/* Render child component, passing the fragment reference: */</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">      </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token maybe-class-name">UserComponent</span><span class="token plain"> user</span><span class="token operator" style=color:#b58a5e>=</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">user</span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token operator" style=color:#b58a5e>&lt;</span><span class="token operator" style=color:#b58a5e>/</span><span class="token operator" style=color:#b58a5e>></span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<p>Note that:</p>
<ul>
<li class="">The <em>fragment reference</em> that  <code>UserComponent</code> expects is the result of reading a parent query that includes its fragment, which in our case means a query that includes <code>...UsernameSection_user</code>. In other words, the <code>data</code> obtained as a result of <code>usePreloadedQuery</code> also serves as the fragment reference for any child fragments included in that query.</li>
<li class="">As mentioned previously, <em>all fragments must belong to a query when they are rendered,</em> which means that all fragment components <em>must</em> be descendants of a query. This guarantees that you will always be able to provide a fragment reference for <code>useFragment</code>, by starting from the result of reading a root query with <code>usePreloadedQuery</code>.</li>
</ul>
<div class=docsRating id=docsRating><hr/>Is this page useful?<svg class=i_thumbsup alt=Like id=docsRating-like xmlns=http://www.w3.org/2000/svg viewBox="0 0 81.13 89.76"><path d="M22.9 6a18.57 18.57 0 002.67 8.4 25.72 25.72 0 008.65 7.66c3.86 2 8.67 7.13 13.51 11 3.86 3.11 8.57 7.11 11.54 8.45s13.59.26 14.64 1.17c1.88 1.63 1.55 9-.11 15.25-1.61 5.86-5.96 10.55-6.48 16.86-.4 4.83-2.7 4.88-10.93 4.88h-1.35c-3.82 0-8.24 2.93-12.92 3.62a68 68 0 01-9.73.5c-3.57 0-7.86-.08-13.25-.08-3.56 0-4.71-1.83-4.71-4.48h8.42a3.51 3.51 0 000-7H12.28a2.89 2.89 0 01-2.88-2.88 1.91 1.91 0 01.77-1.78h16.46a3.51 3.51 0 000-7H12.29c-3.21 0-4.84-1.83-4.84-4a6.41 6.41 0 011.17-3.78h19.06a3.5 3.5 0 100-7H9.75A3.51 3.51 0 016 42.27a3.45 3.45 0 013.75-3.48h13.11c5.61 0 7.71-3 5.71-5.52-4.43-4.74-10.84-12.62-11-18.71-.15-6.51 2.6-7.83 5.36-8.56m0-6a6.18 6.18 0 00-1.53.2c-6.69 1.77-10 6.65-9.82 14.5.08 5.09 2.99 11.18 8.52 18.09H9.74a9.52 9.52 0 00-6.23 16.9 12.52 12.52 0 00-2.07 6.84 9.64 9.64 0 003.65 7.7 7.85 7.85 0 00-1.7 5.13 8.9 8.9 0 005.3 8.13 6 6 0 00-.26 1.76c0 6.37 4.2 10.48 10.71 10.48h13.25a73.75 73.75 0 0010.6-.56 35.89 35.89 0 007.58-2.18 17.83 17.83 0 014.48-1.34h1.35c4.69 0 7.79 0 10.5-1 3.85-1.44 6-4.59 6.41-9.38.2-2.46 1.42-4.85 2.84-7.62a41.3 41.3 0 003.42-8.13 48 48 0 001.59-10.79c.1-5.13-1-8.48-3.35-10.55-2.16-1.87-4.64-1.87-9.6-1.88a46.86 46.86 0 01-6.64-.29c-1.92-.94-5.72-4-8.51-6.3l-1.58-1.28c-1.6-1.3-3.27-2.79-4.87-4.23-3.33-3-6.47-5.79-9.61-7.45a20.2 20.2 0 01-6.43-5.53 12.44 12.44 0 01-1.72-5.36 6 6 0 00-6-5.86z"/></svg><svg class=i_thumbsdown alt=Dislike id=docsRating-dislike xmlns=http://www.w3.org/2000/svg viewBox="0 0 81.13 89.76"><path d="M22.9 6a18.57 18.57 0 002.67 8.4 25.72 25.72 0 008.65 7.66c3.86 2 8.67 7.13 13.51 11 3.86 3.11 8.57 7.11 11.54 8.45s13.59.26 14.64 1.17c1.88 1.63 1.55 9-.11 15.25-1.61 5.86-5.96 10.55-6.48 16.86-.4 4.83-2.7 4.88-10.93 4.88h-1.35c-3.82 0-8.24 2.93-12.92 3.62a68 68 0 01-9.73.5c-3.57 0-7.86-.08-13.25-.08-3.56 0-4.71-1.83-4.71-4.48h8.42a3.51 3.51 0 000-7H12.28a2.89 2.89 0 01-2.88-2.88 1.91 1.91 0 01.77-1.78h16.46a3.51 3.51 0 000-7H12.29c-3.21 0-4.84-1.83-4.84-4a6.41 6.41 0 011.17-3.78h19.06a3.5 3.5 0 100-7H9.75A3.51 3.51 0 016 42.27a3.45 3.45 0 013.75-3.48h13.11c5.61 0 7.71-3 5.71-5.52-4.43-4.74-10.84-12.62-11-18.71-.15-6.51 2.6-7.83 5.36-8.56m0-6a6.18 6.18 0 00-1.53.2c-6.69 1.77-10 6.65-9.82 14.5.08 5.09 2.99 11.18 8.52 18.09H9.74a9.52 9.52 0 00-6.23 16.9 12.52 12.52 0 00-2.07 6.84 9.64 9.64 0 003.65 7.7 7.85 7.85 0 00-1.7 5.13 8.9 8.9 0 005.3 8.13 6 6 0 00-.26 1.76c0 6.37 4.2 10.48 10.71 10.48h13.25a73.75 73.75 0 0010.6-.56 35.89 35.89 0 007.58-2.18 17.83 17.83 0 014.48-1.34h1.35c4.69 0 7.79 0 10.5-1 3.85-1.44 6-4.59 6.41-9.38.2-2.46 1.42-4.85 2.84-7.62a41.3 41.3 0 003.42-8.13 48 48 0 001.59-10.79c.1-5.13-1-8.48-3.35-10.55-2.16-1.87-4.64-1.87-9.6-1.88a46.86 46.86 0 01-6.64-.29c-1.92-.94-5.72-4-8.51-6.3l-1.58-1.28c-1.6-1.3-3.27-2.79-4.87-4.23-3.33-3-6.47-5.79-9.61-7.45a20.2 20.2 0 01-6.43-5.53 12.44 12.44 0 01-1.72-5.36 6 6 0 00-6-5.86z"/></svg><p>Help us make the site even better by<!-- --> <a href=https://www.surveymonkey.com/r/FYC9TCJ target=_blank rel="noopener noreferrer">answering a few quick questions</a>.</div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v13.0.0/guided-tour/rendering/fragments.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/v13.0.0/guided-tour/rendering/queries/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Queries</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/v13.0.0/guided-tour/rendering/variables/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Variables</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#rendering-fragments class="table-of-contents__link toc-highlight">Rendering Fragments</a><li><a href=#composing-fragments class="table-of-contents__link toc-highlight">Composing Fragments</a><li><a href=#composing-fragments-into-queries class="table-of-contents__link toc-highlight">Composing Fragments into Queries</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item target=_self href=/docs/>Introduction</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item target=_self href=/users/>User Showcase</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legal</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://opensource.facebook.com/legal/privacy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/terms/ target=_blank rel="noopener noreferrer" class=footer__link-item>Terms<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/data-policy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Data Policy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/cookie-policy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Cookie Policy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/relay.svg class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/relay.svg class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"/></div><div class=footer__copyright>Copyright Â© 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div></body>