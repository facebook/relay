<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Relay Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Relay Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-50"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-50",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Relay" href="/opensearch.xml">
<script src="/js/redirect.js"></script><title data-react-helmet="true">RelayContainer | Relay</title><meta data-react-helmet="true" property="og:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" name="twitter:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Relay"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="classic"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-classic"><meta data-react-helmet="true" property="og:title" content="RelayContainer | Relay"><meta data-react-helmet="true" name="description" content="RelayContainer is a higher-order React component that lets a React component encode its data requirements."><meta data-react-helmet="true" property="og:description" content="RelayContainer is a higher-order React component that lets a React component encode its data requirements."><meta data-react-helmet="true" property="og:url" content="https://relay.dev/docs/classic/classic-api-reference-relay-container"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://relay.dev/docs/classic/classic-api-reference-relay-container"><link rel="stylesheet" href="/styles.a1c7ae73.css">
<link rel="preload" href="/styles.eabf7aae.js" as="script">
<link rel="preload" href="/runtime~main.5ec6b4c8.js" as="script">
<link rel="preload" href="/main.a8bb340d.js" as="script">
<link rel="preload" href="/1.c175ab1b.js" as="script">
<link rel="preload" href="/2.3344836f.js" as="script">
<link rel="preload" href="/3.2a8c3dea.js" as="script">
<link rel="preload" href="/1be78505.25680110.js" as="script">
<link rel="preload" href="/1097.563a0540.js" as="script">
<link rel="preload" href="/3acb18f9.c3ef18ff.js" as="script">
<link rel="preload" href="/17896441.c41b5144.js" as="script">
<link rel="preload" href="/ae6797eb.fef1c90e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">Relay</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/help">Help</a><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Version</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/">v10.1.3</a></li><li><a class="dropdown__link" href="/docs/v10.1.2/">v10.1.2</a></li><li><a class="dropdown__link" href="/docs/v10.1.1/">v10.1.1</a></li><li><a class="dropdown__link" href="/docs/v10.1.0/">v10.1.0</a></li><li><a class="dropdown__link" href="/docs/v10.0.1/">v10.0.1</a></li><li><a class="dropdown__link" href="/docs/v10.0.0/">v10.0.0</a></li><li><a class="dropdown__link" href="/docs/v9.1.0/">v9.1.0</a></li><li><a class="dropdown__link" href="/docs/v9.0.0/">v9.0.0</a></li><li><a class="dropdown__link" href="/docs/v8.0.0/">v8.0.0</a></li><li><a class="dropdown__link" href="/docs/v7.1.0/">v7.1.0</a></li><li><a class="dropdown__link" href="/docs/v7.0.0/">v7.0.0</a></li><li><a class="dropdown__link" href="/docs/v6.0.0/">v6.0.0</a></li><li><a class="dropdown__link" href="/docs/v5.0.0/">v5.0.0</a></li><li><a class="dropdown__link" href="/docs/v4.0.0/">v4.0.0</a></li><li><a class="dropdown__link" href="/docs/v3.0.0/">v3.0.0</a></li><li><a class="dropdown__link" href="/docs/v2.0.0/">v2.0.0</a></li><li><a class="dropdown__link" href="/docs/v1.7.0/">v1.7.0</a></li><li><a class="dropdown__link" href="/docs/v1.6.2/">v1.6.2</a></li><li><a class="dropdown__link" href="/docs/v1.6.1/">v1.6.1</a></li><li><a class="dropdown__link" href="/docs/v1.6.0/">v1.6.0</a></li><li><a class="dropdown__link" href="/docs/v1.5.0/">v1.5.0</a></li><li><a class="dropdown__link" href="/docs/v1.4.1/">v1.4.1</a></li><li><a class="dropdown__link" href="/docs/experimental/">experimental</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/classic/">classic</a></li><li><a class="dropdown__link" href="/docs/next/">Unreleased</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Relay</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Help</a></li><li class="menu__list-item"><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/docs">Version</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">v10.1.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.2/">v10.1.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.1/">v10.1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.0/">v10.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.0.1/">v10.0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.0.0/">v10.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v9.1.0/">v9.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v9.0.0/">v9.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v8.0.0/">v8.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v7.1.0/">v7.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v7.0.0/">v7.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v6.0.0/">v6.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v5.0.0/">v5.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v4.0.0/">v4.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v3.0.0/">v3.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v2.0.0/">v2.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.7.0/">v1.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.2/">v1.6.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.1/">v1.6.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.0/">v1.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.5.0/">v1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.4.1/">v1.4.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/experimental/">experimental</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/classic/">classic</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/">Unreleased</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Relay Classic Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/">Introduction to Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-containers">Containers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-routes">Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-root-container">Root Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-ready-state">Ready State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-guides-network-layer">Network Layer</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Relay Classic API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay">Relay</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/classic/classic-api-reference-relay-container">RelayContainer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-route">Relay.Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-renderer">Relay.Renderer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-root-container">Relay.RootContainer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-ql">Relay.QL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-mutation">Relay.Mutation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-graphql-mutation">Relay.GraphQLMutation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-proptypes">Relay.PropTypes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classic/classic-api-reference-relay-store">Relay.Store</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Relay Classic Interfaces</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-interfaces-relay-mutation-request">RelayMutationRequest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-interfaces-relay-network-layer">RelayNetworkLayer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/classic/classic-interfaces-relay-query-request">RelayQueryRequest</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Relay <strong>classic</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/">latest version</a></strong> (11.0.0).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: classic</span></div><header><h1 class="docTitle_Oumm">RelayContainer</h1></header><div class="markdown"><p><code>RelayContainer</code> is a higher-order React component that lets a React component encode its data requirements.</p><ul><li>Relay ensures that this data is available before the component is rendered.</li><li>Relay updates the component whenever the underlying data has changed.</li></ul><p>Relay containers are created using <code>Relay.createContainer</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p><em>Container Specification</em></p><ul class="apiIndex"><li><a href="#fragments"><div class="mdxCodeBlock_1zKU">fragments</div>Declare the component&#x27;s data requirements using fragments.</a></li><li><a href="#initialvariables"><div class="mdxCodeBlock_1zKU">initialVariables</div>The initial set of variable values available to this component&#x27;s fragments.</a></li><li><a href="#preparevariables"><div class="mdxCodeBlock_1zKU">prepareVariables</div>A method to modify the variables based on the runtime environment or previous variable values.</a></li><li><a href="#shouldcomponentupdate"><div class="mdxCodeBlock_1zKU">shouldComponentUpdate</div>Optionally override RelayContainer&#x27;s default implementation of `shouldComponentUpdate`.</a></li></ul><p><em>Properties and Methods</em></p><p>These are the methods and properties that the container will provide as <code>this.props.relay</code> in the plain React component.</p><ul class="apiIndex"><li><a href="#route"><div class="mdxCodeBlock_1zKU">route</div></a></li><li><a href="#pendingvariables"><div class="mdxCodeBlock_1zKU">pendingVariables </div></a></li><li><a href="#variables"><div class="mdxCodeBlock_1zKU">variables</div></a></li><li><a href="#setvariables"><div class="mdxCodeBlock_1zKU">setVariables([partialVariables[, onReadyStateChange]])</div></a></li><li><a href="#forcefetch"><div class="mdxCodeBlock_1zKU">forceFetch([partialVariables[, onReadyStateChange]]) </div></a></li><li><a href="#hasoptimisticupdate"><div class="mdxCodeBlock_1zKU">hasOptimisticUpdate(record)</div></a></li><li><a href="#getpendingtransactions"><div class="mdxCodeBlock_1zKU">getPendingTransactions(record) </div></a></li></ul><p><em>Static Methods</em></p><ul class="apiIndex"><li><a href="#getfragment"><div class="mdxCodeBlock_1zKU">getFragment(name[, vars])</div>Get a reference to a container fragment for inclusion in a parent fragment.</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="container-specification"></a>Container Specification<a class="hash-link" href="#container-specification" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fragments"></a>fragments<a class="hash-link" href="#fragments" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fragments: RelayQueryFragments&lt;Tk&gt; = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [propName: string]: (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    variables: {[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) =&gt; Relay.QL`fragment on ...`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Containers declare data requirements on <code>fragments</code> using GraphQL fragments.</p><p>Only fields specified by these fragments will be populated in <code>this.props</code> when the component is rendered. This ensures that there are no implicit dependencies from a component on its parent component or any child components.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}8-14{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class StarWarsShip extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return &lt;div&gt;{this.props.ship.name}&lt;/div&gt;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(StarWarsShip, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ship: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Ship {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this example, the fields associated with the <code>ship</code> fragment will be made available on <code>this.props.ship</code>.</p><p>See also: <a href="/docs/classic/classic-guides-containers#relay-containers">Containers &gt; Relay Containers</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="initialvariables"></a>initialVariables<a class="hash-link" href="#initialvariables" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">initialVariables: {[name: string]: mixed};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The initial set of variable values available to this component&#x27;s fragments.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-1"></a>Example<a class="hash-link" href="#example-1" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}4{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ProfilePicture extends React.Component {...}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {size: 50},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    user: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      # The variable defined above is available here as &#x27;$size&#x27;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      # Any variable referenced here is required to have been defined in initialVariables above.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      # An &#x27;undefined&#x27; variable value will throw an &#x27;Invariant Violation&#x27; exception.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      # Use &#x27;null&#x27; to initialize unknown values.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on User { profilePicture(size: $size) { ... } }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this example, <code>profilePicture(size: 50)</code> will be fetched for the intial render.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="preparevariables"></a>prepareVariables<a class="hash-link" href="#preparevariables" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prepareVariables: ?(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prevVariables: {[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) =&gt; {[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Containers can define a <code>prepareVariables</code> method which provides the opportunity to modify the variables that are available to fragments. The new variables can be generated based on the previous variables (or the <code>initialVariables</code> if no previous ones exist) in addition to the runtime environment.</p><p>This method is also called after the partial set of variables from <code>setVariables</code> has been applied. The variables returned are used to populate the fragments.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-2"></a>Example<a class="hash-link" href="#example-2" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}3-9{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {size: 50},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prepareVariables: prevVariables =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ...prevVariables,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // If devicePixelRatio is `2`, the new size will be `100`.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      size: prevVariables.size * window.devicePixelRatio,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="shouldcomponentupdate"></a>shouldComponentUpdate<a class="hash-link" href="#shouldcomponentupdate" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">shouldComponentUpdate: () =&gt; boolean;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>RelayContainer implements a conservative default <code>shouldComponentUpdate</code> that returns <code>false</code> if no fragment props have changed and all other props are equal scalar values. This may block updates to components that receive data via context. To ensure an update in this case override the default behavior by specifying a <code>shouldComponentUpdate</code> function.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-3"></a>Example<a class="hash-link" href="#example-3" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}2{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  shouldComponentUpdate: () =&gt; true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="properties-and-methods"></a>Properties and Methods<a class="hash-link" href="#properties-and-methods" title="Direct link to heading">#</a></h2><p>The properties and methods listed below can be accessed on <code>this.props.relay</code> from the wrapped React component.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="route"></a>route<a class="hash-link" href="#route" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">route: RelayRoute</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Route is useful in providing the context which a component is being rendered in. It includes information about the <code>name</code>, <code>params</code>, and <code>queries</code> of the current route.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-4"></a>Example<a class="hash-link" href="#example-4" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var name = this.props.relay.route.name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (name === &#x27;SuperAwesomeRoute&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Do something super cool.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>See also: <a href="/docs/classic/classic-guides-routes">Routes</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="variables"></a>variables<a class="hash-link" href="#variables" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variables: {[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>variables</code> contains the set of variables that was used to fetch the current set of props.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-5"></a>Example<a class="hash-link" href="#example-5" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}8{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ProfilePicture extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var user = this.props.user;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Image</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          uri={user.profilePicture.uri}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          width={this.props.relay.variables.size}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {size: 50},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    user: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on User { profilePicture(size: $size) { ... } }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this example, the <code>width</code> of the rendered image will always correspond to the <code>$size</code> variable used to fetch the current version of <code>profilePicture.uri</code>.</p><blockquote>Note<p>Never mutate <code>this.props.relay.variables</code> directly as it will not trigger data to be fetched properly. Treat <code>this.props.relay.variables</code> as if it were immutable, just like props.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pendingvariables"></a>pendingVariables<a class="hash-link" href="#pendingvariables" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pendingVariables: ?{[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>pendingVariables</code> contains the set of variables that are being used to fetch the new props, i.e. when <code>this.props.relay.setVariables()</code> or <code>this.props.relay.forceFetch()</code> are called and the corresponding request is in flight.</p><p>If no request is in flight pendingVariables is <code>null</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-6"></a>Example<a class="hash-link" href="#example-6" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}12{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ProfilePicture extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  requestRandomPictureSize = () =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const randIntMin = 10;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const randIntMax = 200;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const size = (Math.floor(Math.random() * (randIntMax - randIntMin + 1)) + randIntMin);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.props.relay.setVariables({size});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const {relay, user} = this.props;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const {pendingVariables} = relay;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (pendingVariables &amp;&amp; &#x27;size&#x27; in pendingVariables) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // Profile picture with new size is loading</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;LoadingSpinner /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Image</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          uri={user.profilePicture.uri}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          width={relay.variables.size}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;button onclick={this.requestRandomPictureSize}&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          Request random picture size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/button&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/View&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {size: 50},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    user: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on User { profilePicture(size: $size) { ... } }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this example, whenever a picture with a new size is being loaded a spinner is displayed instead of the picture.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="setvariables"></a>setVariables<a class="hash-link" href="#setvariables" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setVariables([partialVariables: Object, [onReadyStateChange: Function]]): void</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Components can change their data requirements by using <code>setVariables</code> to request an update to the current set of <code>variables</code>.</p><p><code>this.props.relay.setVariables</code> can be called to update a subset or all of the variables at the same time. In return, Relay will use the new variables to attempt to fulfill the new fragment. This may involve sending a request to the server if data is not already available on the client.</p><p>An optional <code>onReadyStateChange</code> callback can be supplied to respond to the events involved with the data fulfillment.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-7"></a>Example<a class="hash-link" href="#example-7" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}12-15{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Feed extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {this.props.viewer.feed.edges.map(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          edge =&gt; &lt;Story story={edge.node} key={edge.node.id} /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        )}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  _handleScrollLoad() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Increments the number of stories being rendered by 10.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.props.relay.setVariables({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      count: this.props.relay.variables.count + 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(Feed, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {count: 10},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    viewer: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Viewer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        feed(first: $count) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          edges {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            node {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              ${Story.getFragment(&#x27;story&#x27;)},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote>Note<code>setVariables</code> does not immediately mutate <code>variables</code>, but creates a  pending state transition. <code>variables</code> will continue returning the previous values until <code>this.props</code> has been populated with data that fulfills the new variable values.</blockquote><p>See also: <a href="/docs/classic/classic-guides-containers#requesting-different-data">Containers &gt; Requesting Different Data</a>, <a href="/docs/classic/classic-guides-ready-state">Ready State</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="forcefetch"></a>forceFetch<a class="hash-link" href="#forcefetch" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">forceFetch([partialVariables: Object, [onReadyStateChange: Function]]): void</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>forceFetch</code> is similar to <code>setVariables</code> because it is also used to change the data requirements by altering <code>variables</code>.</p><p>The two methods differ in that instead of sending a query that includes only fields missing from the client, <code>forceFetch</code> sends a request to refetch each and every fragment. This ensures that the props for the component are freshly fetched from the server.</p><p>An optional <code>onReadyStateChange</code> callback can be supplied to respond to the events involved with the data fulfillment.</p><blockquote>Note<p><code>forceFetch</code> can be called with an empty set of partial variables, meaning it can trigger a refresh of the currently rendered set of data.</p></blockquote><p>See also: <a href="/docs/classic/classic-guides-ready-state">Ready State</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="hasoptimisticupdate"></a>hasOptimisticUpdate<a class="hash-link" href="#hasoptimisticupdate" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hasOptimisticUpdate(record: Object): boolean</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Calling <code>hasOptimisticUpdate</code> with a record from <code>this.props</code> will return whether that given record is affected by an optimistic mutation. It allows the component to render local optimistic changes differently from data that has successfully synchronized with the server.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-8"></a>Example<a class="hash-link" href="#example-8" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Feed extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var edges = this.props.viewer.feed.edges;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {edges.map(edge =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          var node = edge.node;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          if (this.props.relay.hasOptimisticUpdate(node)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // Render pending story that has not been stored</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // on the server using a diffrent component.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &lt;PendingStory</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                key={edge.node.id}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                story={edge.node}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &lt;Story</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                key={edge.node.id}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                story={edge.node}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        })}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(Feed, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {count: 10},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    viewer: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Viewer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        feed(first: $count) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          edges {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            node {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              ${Story.getFragment(&#x27;story&#x27;)},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              ${PendingStory.getFragment(&#x27;story&#x27;)}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>See also: <a href="/docs/classic/classic-guides-mutations#optimistic-updates">Mutations &gt; Optimistic Updates</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getpendingtransactions"></a>getPendingTransactions<a class="hash-link" href="#getpendingtransactions" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">getPendingTransactions(record: Object): ?Array&lt;RelayMutationTransaction&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Components can inspect pending mutations on any record (i.e. data made available in props with a corresponding fragment). Calling <code>getPendingTransactions</code> with a record will return a list of the pending mutation transactions that affect that particular record.</p><p>Each <code>RelayMutationTransaction</code> has methods to check the status of the mutation and provide ways to rollback or resend the mutation as needed.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-9"></a>Example<a class="hash-link" href="#example-9" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Story extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var story = this.props.story;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var transactions = this.props.relay.getPendingTransactions(story);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // For this example, assume there is only one transaction.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var transaction = transactions ? transactions[0] : null;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (transaction) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // Display an error message with a retry link if a mutation failed.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (transaction.getStatus() === &#x27;COMMIT_FAILED&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;span&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            This story failed to post.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;a onClick={transaction.recommit}&gt;Try Again.&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/span&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Render story normally.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = Relay.createContainer(ProfilePicture, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    story: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on story {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>RelayMutationTransaction.getStatus</code> can return one of the following strings:</p><ul><li><code>UNCOMMITTED</code> â€” Transaction hasn&#x27;t yet been sent to the server. Transaction can be committed or rolled back.</li><li><code>COMMIT_QUEUED</code> â€”  Transaction was committed but another transaction with the same collision key is pending, so the transaction has been queued to send to the server.</li><li><code>COLLISION_COMMIT_FAILED</code> â€” Transaction was queued for commit but another transaction with the same collision key failed. All transactions in the collision queue, including this one, have been failed. Transaction can be recommitted or rolled back.</li><li><code>COMMITTING</code> â€” Transaction is waiting for the server to respond.</li><li><code>COMMIT_FAILED</code> â€” Transaction was sent to the server for comitting but failed.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="static-methods"></a>Static Methods<a class="hash-link" href="#static-methods" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getfragment"></a>getFragment<a class="hash-link" href="#getfragment" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">getFragment(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragmentName: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  variables?: {[name: string]: mixed}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">): RelayFragmentReference</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Gets a reference to a child container&#x27;s fragment for inclusion in a parent fragment.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-10"></a>Example<a class="hash-link" href="#example-10" title="Direct link to heading">#</a></h4><p>Fragment composition is achieved via ES6 template string interpolation and <code>getFragment</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}6{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Parent.js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Relay.createContainer(Parent, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    parentFragment: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Foo {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ${Child.getFragment(&#x27;childFragment&#x27;)}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Child.js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Relay.createContainer(Child, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  initialVariables: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    size: 64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    childFragment: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Foo {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        photo(size: $size) { uri }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this example, whenever <code>Parent</code> is fetched, <code>Child</code>&#x27;s fragment will also be fetched. When rendering, <code>&lt;Parent&gt;</code> will only have access to the <code>props.foo.id</code> field;  data from the child fragment will be <a href="/docs/classic/thinking-in-relay#data-masking"><em>masked</em></a>. By default, <code>childFragment</code> will use its corresponding initial variables. Relay will fetch <code>photo(size: 64)</code>. When <code>&lt;Child&gt;</code> is rendered it will also make the initial variables available as <code>props.relay.variables = {size: 64}</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="overriding-fragment-variables"></a>Overriding Fragment Variables<a class="hash-link" href="#overriding-fragment-variables" title="Direct link to heading">#</a></h4><p>Sometimes a parent needs to override the default variables of a child component. Imagine that we want to render <code>Child</code> above with a photo size of 128 instead of the default 64. To do this, we have to ensure that both the fragment <em>and</em> the container know about the custom variable. To set a custom variable in the <em>query</em>, use the second argument to <code>getFragment</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}6{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Parent.js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Relay.createContainer(Parent, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fragments: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    parentFragment: () =&gt; Relay.QL`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      fragment on Foo {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ${Child.getFragment(&#x27;childFragment&#x27;, {size: 128})}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    `,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now Relay will fetch the photo with size 128 - but the <code>Child</code> container won&#x27;t magically know about this variable. We have to tell it by passing the variable value as a prop:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-{&quot;{&quot;}4{&quot;}&quot;} codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Parent = (props) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return (</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;Child</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      childFragment={props.parentFragment}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      size={128}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /&gt;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now Relay will both fetch the larger photo size <em>and</em> <code>Child</code> will know to render it.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/relay/edit/master/website-v2/versioned_docs/version-classic/Classic-APIReference-Container.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-03-09T19:54:19.000Z" class="docLastUpdatedAt_1Qna">3/9/2021</time> by <strong>Lauren Tan</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/classic/classic-api-reference-relay"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Relay</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/classic/classic-api-reference-relay-route"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Relay.Route Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#container-specification" class="table-of-contents__link">Container Specification</a><ul><li><a href="#fragments" class="table-of-contents__link">fragments</a></li><li><a href="#initialvariables" class="table-of-contents__link">initialVariables</a></li><li><a href="#preparevariables" class="table-of-contents__link">prepareVariables</a></li><li><a href="#shouldcomponentupdate" class="table-of-contents__link">shouldComponentUpdate</a></li></ul></li><li><a href="#properties-and-methods" class="table-of-contents__link">Properties and Methods</a><ul><li><a href="#route" class="table-of-contents__link">route</a></li><li><a href="#variables" class="table-of-contents__link">variables</a></li><li><a href="#pendingvariables" class="table-of-contents__link">pendingVariables</a></li><li><a href="#setvariables" class="table-of-contents__link">setVariables</a></li><li><a href="#forcefetch" class="table-of-contents__link">forceFetch</a></li><li><a href="#hasoptimisticupdate" class="table-of-contents__link">hasOptimisticUpdate</a></li><li><a href="#getpendingtransactions" class="table-of-contents__link">getPendingTransactions</a></li></ul></li><li><a href="#static-methods" class="table-of-contents__link">Static Methods</a><ul><li><a href="#getfragment" class="table-of-contents__link">getFragment</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" rel="noopener noreferrer" href="/docs">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" rel="noopener noreferrer" href="/users">User Showcase</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" src="/img/relay.svg"></div></div></div></footer></div>
<script src="/styles.eabf7aae.js"></script>
<script src="/runtime~main.5ec6b4c8.js"></script>
<script src="/main.a8bb340d.js"></script>
<script src="/1.c175ab1b.js"></script>
<script src="/2.3344836f.js"></script>
<script src="/3.2a8c3dea.js"></script>
<script src="/1be78505.25680110.js"></script>
<script src="/1097.563a0540.js"></script>
<script src="/3acb18f9.c3ef18ff.js"></script>
<script src="/17896441.c41b5144.js"></script>
<script src="/ae6797eb.fef1c90e.js"></script>
</body>
</html>