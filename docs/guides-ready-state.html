<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Ready State - Relay Docs</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Ready State - Relay Docs"><meta property="og:type" content="website"><meta property="og:url" content="http://facebook.github.io/relay/"><meta property="og:description" content="A JavaScript framework for building data-driven React applications"><link rel="shortcut icon" href="/relay/img/favicon.png"><link rel="stylesheet" href="/relay/css/relay.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="/relay/"><img class="nav-logo" src="/relay/img/logo.svg" width="50" height="50">Relay</a><ul class="nav-site"><li><a href="/relay/prototyping/playground.html" class="">Try it out</a></li><li><a href="/relay/docs/getting-started.html" class="active">Docs</a></li><li><a href="/relay/support.html" class="">Support</a></li><li><a href="https://github.com/facebook/relay" class="">GitHub</a></li></ul></div></div><section class="content wrap documentationContent"><div class="inner-content"><a id="content"></a><h1>Ready State</h1><div><p>Whenever Relay is fulfilling data requirements, it can be useful to know when certain events occur. For example, we might want to record how long it takes for data to be available, or we might want to log errors to the server. These events are available on most Relay APIs via the <code>onReadyStateChange</code> callback.</p><h2><a class="anchor" name="onreadystatechange"></a><code>onReadyStateChange</code> <a class="hash-link" href="#onreadystatechange">#</a></h2><p>When Relay fulfills data, the <code>onReadyStateChange</code> callback is called one or more times with an object that describes the current &quot;ready state&quot;. This object has the following properties:</p><ul><li><p><code>ready: boolean</code></p><p>This is true when the subset of data required for rendering is ready.</p></li><li><p><code>done: boolean</code></p><p>This is true when <em>all</em> data requirements are ready for rendering.</p></li><li><p><code>error: ?Error</code></p><p>This is an instance of <code>Error</code> if there is a failure. Otherwise, this is
<code>null</code>.</p></li><li><p><code>events: Array&lt;ReadyStateEvent&gt;</code></p><p>This is an array of events received so far (see <code>ReadyStateEvent</code> below).</p></li><li><p><code>stale: boolean</code></p><p>When &quot;force fetching&quot;, this is true if <code>ready</code> is true as a result of data being available on the client before the server request has completed.</p></li><li><p><code>aborted: boolean</code></p><p>Whether the request was aborted.</p></li></ul><h2><a class="anchor" name="readystateevent"></a><code>ReadyStateEvent</code> <a class="hash-link" href="#readystateevent">#</a></h2><ul><li><code>ABORT</code></li><li><code>CACHE_RESTORED_REQUIRED</code></li><li><code>CACHE_RESTORE_FAILED</code></li><li><code>CACHE_RESTORE_START</code></li><li><code>NETWORK_QUERY_ERROR</code></li><li><code>NETWORK_QUERY_RECEIVED_ALL</code></li><li><code>NETWORK_QUERY_RECEIVED_REQUIRED</code></li><li><code>NETWORK_QUERY_START</code></li><li><code>STORE_FOUND_ALL</code></li><li><code>STORE_FOUND_REQUIRED</code></li></ul><h2><a class="anchor" name="examples"></a>Examples <a class="hash-link" href="#examples">#</a></h2><h3><a class="anchor" name="fetching-data-from-the-server"></a>Fetching Data from the Server <a class="hash-link" href="#fetching-data-from-the-server">#</a></h3><p>If insufficient data on the client leads Relay to send a server request for more data, we can expect the following behavior:</p><ol><li>Once with <code>ready</code> set to false.</li><li>Once with <code>ready</code> and <code>done</code> set to true.</li></ol><h3><a class="anchor" name="resolving-data-from-the-client"></a>Resolving Data from the Client <a class="hash-link" href="#resolving-data-from-the-client">#</a></h3><p>If sufficient data is available on the client such that Relay does not need to send a server request, we can expect the following behavior:</p><ol><li>Once with <code>ready</code> and <code>done</code> set to true.</li></ol><h3><a class="anchor" name="server-error"></a>Server Error <a class="hash-link" href="#server-error">#</a></h3><p>If a server request results in a failure to load data, we can expect the following behavior:</p><ol><li>Once with <code>ready</code> set to false.</li><li>Once with <code>error</code> set to an <code>Error</code> object.</li></ol><p>Note that <code>ready</code> and <code>done</code> will continue to be false.</p><h3><a class="anchor" name="force-fetching-with-data-from-the-client"></a>Force Fetching with Data from the Client <a class="hash-link" href="#force-fetching-with-data-from-the-client">#</a></h3><p>If a &quot;force fetch&quot; occurs and there is insufficient data on the client, the same behavior as <strong>Fetching Data from the Server</strong> can be expected. However, if a &quot;force fetch&quot; occurs and there <em>is</em> sufficient data on the client to render, we can expect the following behavior:</p><ol><li>Once with <code>ready</code>, <code>done</code>, and <code>stale</code> set to true.</li><li>Once with <code>ready</code> and <code>done</code> set to true, but <code>stale</code> set to false.</li></ol></div><div class="docs-prevnext"><a class="docs-next" href="guides-mutations.html">Next →</a></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Quick Start</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/getting-started.html">Getting Started</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/tutorial.html">Tutorial</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-graphql.html">Thinking in GraphQL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-relay.html">Thinking In Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/videos.html">Videos</a></li></ul></div><div class="nav-docs-section"><h3>Relay Modern</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/relay-modern.html">Introduction to Relay Modern</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/new-in-relay-modern.html">New in Relay Modern</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/relay-environment.html">The Relay &quot;Environment&quot;</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/QueryRenderer.html">QueryRenderer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/FragmentContainer.html">FragmentContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/PaginationContainer.html">PaginationContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/RefetchContainer.html">RefetchContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/routing.html">Routing</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/mutations.html">Mutations</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/babel-plugin-relay.html">babel-plugin-relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/relay-compiler.html">Relay Compiler</a></li></ul></div><div class="nav-docs-section"><h3>Relay Compat</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/relay-compat.html">Compatibility Mode</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/conversion-playbook.html">Conversion Playbook</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/conversion-scripts.html">Conversion Scripts</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/upgrading-setvariables.html">Upgrading setVariables</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/compatibility-cheatsheet.html">Compatibility Cheatsheet</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-cheatsheet.html">API Cheatsheet</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic Guides</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/guides-containers.html">Containers</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-routes.html">Routes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-root-container.html">Root Container</a></li><li><a style="margin-left:0;" class="active" href="/relay/docs/guides-ready-state.html">Ready State</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-mutations.html">Mutations</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-network-layer.html">Network Layer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-babel-plugin.html">Babel Relay Plugin</a></li></ul></div><div class="nav-docs-section"><h3>GraphQL</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-relay-specification.html">GraphQL Relay Specification</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-object-identification.html">Object Identification</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-connections.html">Connection</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-mutations.html">Mutations</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-further-reading.html">Further Reading</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic API</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay.html">Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-container.html">RelayContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-route.html">Relay.Route</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-renderer.html">Relay.Renderer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-root-container.html">Relay.RootContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-ql.html">Relay.QL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-mutation.html">Relay.Mutation</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-graphql-mutation.html">Relay.GraphQLMutation</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-proptypes.html">Relay.PropTypes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-store.html">Relay.Store</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic Interfaces</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/interfaces-relay-network-layer.html">RelayNetworkLayer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/interfaces-relay-mutation-request.html">RelayMutationRequest</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/interfaces-relay-query-request.html">RelayQueryRequest</a></li></ul></div></div></section><footer><span><a class="edit-page-link" href="https://github.com/facebook/relay/blob/master/docs/Guides-ReadyState.md" target="_blank">Edit This Page</a></span><span>Copyright © 2017 Facebook Inc</span></footer></div><div id="fb-root"></div><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-71174216-1', 'auto');
              ga('send', 'pageview');
          </script></body></html>