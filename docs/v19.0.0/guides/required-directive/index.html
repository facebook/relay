<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v19.0.0 plugin-docs plugin-id-default docs-doc-id-guides/required-directive" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">@required Directive | Relay</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://relay.dev/img/relay.png"><meta data-rh="true" name="twitter:image" content="https://relay.dev/img/relay.png"><meta data-rh="true" property="og:url" content="https://relay.dev/docs/v19.0.0/guides/required-directive/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v19.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v19.0.0"><meta data-rh="true" name="docsearch:version" content="v19.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v19.0.0"><meta data-rh="true" property="og:title" content="@required Directive | Relay"><meta data-rh="true" name="description" content="Relay guide to @required"><meta data-rh="true" property="og:description" content="Relay guide to @required"><meta data-rh="true" name="keywords" content="required,directive,optional,nullthrows"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://relay.dev/docs/v19.0.0/guides/required-directive/"><link data-rh="true" rel="alternate" href="https://relay.dev/docs/v19.0.0/guides/required-directive/" hreflang="en"><link data-rh="true" rel="alternate" href="https://relay.dev/docs/v19.0.0/guides/required-directive/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UBPJPW35NS-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Relay RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Relay Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-DCSC7FDGL5","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DCSC7FDGL5"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DCSC7FDGL5",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Relay" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3fffda90.css">
<link rel="preload" href="/assets/js/runtime~main.de535efd.js" as="script">
<link rel="preload" href="/assets/js/main.509dd6b3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Relay</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/help/">Help</a><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v19.0.0/">v19.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/guides/required-directive/">Next ðŸš§</a></li><li><a class="dropdown__link" href="/docs/guides/required-directive/">v20.0.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v19.0.0/guides/required-directive/">v19.0.0</a></li><li><a class="dropdown__link" href="/docs/v18.0.0/guides/required-directive/">v18.0.0</a></li><li><a class="dropdown__link" href="/docs/v17.0.0/guides/required-directive/">v17.0.0</a></li><li><a class="dropdown__link" href="/docs/v16.0.0/guides/required-directive/">v16.0.0</a></li><li><a class="dropdown__link" href="/docs/v15.0.0/guides/required-directive/">v15.0.0</a></li><li><a class="dropdown__link" href="/docs/v14.0.0/guides/required-directive/">v14.0.0</a></li><li><a class="dropdown__link" href="/docs/v13.0.0/guides/required-directive/">v13.0.0</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v19.0.0/">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v19.0.0/getting-started/quick-start/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v19.0.0/tutorial/intro/">Tutorial</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/v19.0.0/guided-tour/list-data/introduction/">Feature Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guided-tour/list-data/introduction/">Fetching Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/v19.0.0/guides/required-directive/">Error Handling</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v19.0.0/guides/required-directive/">@required Directive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v19.0.0/guides/catch-directive/">@catch Directive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v19.0.0/guides/throw-on-field-error-directive/">@throwOnFieldError Directive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v19.0.0/guided-tour/rendering/error-states/">Error States with ErrorBoundaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v19.0.0/guides/semantic-nullability/">Semantic Nullability</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guided-tour/updating-data/introduction/">Updating Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guided-tour/reusing-cached-data/">Caching</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guides/relay-resolvers/introduction/">Client Side Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guides/graphql-server-specification/">GraphQL Server and Network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guides/type-emission/">Typing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/v19.0.0/guides/codemods/">Codemods</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v19.0.0/api-reference/relay-environment-provider/">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v19.0.0/guides/testing-relay-components/">Testing and Debugging</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v19.0.0/principles-and-architecture/thinking-in-graphql/">Principles and Architecture</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v19.0.0/community-learning-resources/">Community Learning Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v19.0.0/glossary/">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Relay<!-- --> <b>v19.0.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/guides/required-directive/">latest version</a></b> (<!-- -->v20.0.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Feature Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Error Handling</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">@required Directive</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v19.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>@required Directive</h1></header><p>The <code>@required</code> directive can be added to fields in your Relay queries to declare how null values should be handled at runtime. You can think of it as saying &quot;if this field is ever null, its parent field is invalid and should be null&quot;.</p><p>When you have a GraphQL schema where many fields are nullable, a considerable amount of product code is needed to handle each field&#x27;s potential &quot;nullness&quot; before the underlying data can be used. With <code>@required</code>, Relay can handle some types of null checks before it returns data to your component, which means that <strong>any field you annotate with</strong> <strong><code>@required</code></strong> <strong>will become non-nullable in the generated types for your response</strong>.</p><p>If a <code>@required</code> field is null at runtime, Relay will &quot;bubble&quot; that nullness up to the field&#x27;s parent. For example, given this query:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:black">MyQuery</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token object">viewer</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token property" style="color:black">name</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token property" style="color:black">age</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>name</code> is null, Relay would return <code>{ viewer: null }</code>. You can think of <code>@required</code> in this instance as saying &quot;<code>viewer</code> is useless without a <code>name</code>&quot;.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="action">Action<a href="#action" class="hash-link" aria-label="Direct link to Action" title="Direct link to Action">â€‹</a></h2><p>The <code>@required</code> directive has a required <code>action</code> argument which has three possible values:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="none-expected"><code>NONE</code> (expected)<a href="#none-expected" class="hash-link" aria-label="Direct link to none-expected" title="Direct link to none-expected">â€‹</a></h3><p>This field is expected to be null sometimes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-recoverable"><code>LOG</code> (recoverable)<a href="#log-recoverable" class="hash-link" aria-label="Direct link to log-recoverable" title="Direct link to log-recoverable">â€‹</a></h3><p>This value is not expected to ever be null, but the component <strong>can still render</strong> if it is. If a field with <code>action: LOG</code> is null, the <a href="/docs/v19.0.0/api-reference/field-logger/">Relay field logger</a> will receive a <code>missing_required_field.log</code> event.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="throw-unrecoverable"><code>THROW</code> (unrecoverable)<a href="#throw-unrecoverable" class="hash-link" aria-label="Direct link to throw-unrecoverable" title="Direct link to throw-unrecoverable">â€‹</a></h3><p>This value should not be null, and the component <strong>cannot render without it</strong>. If a field with <code>action: THROW</code> is null at runtime, the component which reads that field <strong>will throw during render</strong>. The error message includes both the owner and field path. Only use this option if your component is contained within an <a href="https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary" target="_blank" rel="noopener noreferrer">error boundary</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="locality">Locality<a href="#locality" class="hash-link" aria-label="Direct link to Locality" title="Direct link to Locality">â€‹</a></h2><p>A field&#x27;s <code>@required</code> status is <strong>local to the fragment where it is specified</strong>. This allows you to add/remove the directive without having to think about anything outside the scope of your component.</p><p>This choice reflects the fact that some components may be able to recover better from missing data than others. For example, a <code>&lt;RestaurantInfo /&gt;</code> component could probably render something sensible even if the restaurant&#x27;s address is missing, but a <code>&lt;RestaurantLocationMap /&gt;</code> component might not.</p><p>However, all usages of the <code>@required</code> directive on the same field in a single fragment must be consistent with their usage. This situation mostly occurs when selecting fields in inline fragments. For example, the following fragment would fail to compile:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">UserInfo</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token object">job</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token operator" style="color:#b58a5e">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token property" style="color:black">certifications</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token operator" style="color:#b58a5e">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Lawyer</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token property" style="color:black">certifications</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Relay compiler will give you an error like <code>All references to a field must have matching @required declarations.</code>. To fix this, either set the <code>@required</code> directive on each of the fields selected in the inline fragment or remove the directive entirely.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="chaining">Chaining<a href="#chaining" class="hash-link" aria-label="Direct link to Chaining" title="Direct link to Chaining">â€‹</a></h2><p><code>@required</code> directives can be chained to make a deeply nested field accessible after just one null check:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#b58a5e">=</span><span class="token plain"> </span><span class="token function" style="color:black">useFragment</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token plain">graphql</span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql keyword" style="color:#00009f">fragment</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql fragment function" style="color:black">MyUser</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql keyword" style="color:#00009f">on</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name">User</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql property" style="color:black">name</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql directive function" style="color:black">@required</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#2a6883">action</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql constant" style="color:black">LOG</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">)</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql property" style="color:black">profile_picture</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql directive function" style="color:black">@required</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#2a6883">action</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql constant" style="color:black">LOG</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql property" style="color:black">url</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql directive function" style="color:black">@required</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#2a6883">action</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql constant" style="color:black">LOG</span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">)</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:black"><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql punctuation" style="color:#b58a5e">}</span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token punctuation" style="color:#b58a5e">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token punctuation" style="color:#b58a5e">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token plain">user </span><span class="token operator" style="color:#b58a5e">==</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">   </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#b58a5e">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#b58a5e">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#b58a5e">=</span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#b58a5e">.</span><span class="token property-access">profile_picture</span><span class="token punctuation" style="color:#b58a5e">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#b58a5e">=</span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#b58a5e">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"> </span><span class="token operator" style="color:#b58a5e">/</span><span class="token operator" style="color:#b58a5e">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong>: If you use <code>@required</code> on a top level field of a fragment, the object returned from <code>useFragment</code> itself may become nullable. The generated types will reflect this.</p><p>When chaining <code>@required</code> directives, the Relay compiler will help you from unintentionally creating a chain with a more severe action than intended. Consider the following fragment</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">MyUser</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token property" style="color:black">profile_picture</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">THROW</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token property" style="color:black">url</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we want the component to THROW if the <code>profile_picture</code> field is null but we only want to LOG an error if the <code>url</code> field is null. But recall, Relay will &quot;bubble&quot; nullness up to the parent field, if the <code>url</code> field is null it will then cause the <code>profile_picture</code> field to become null as well. And once that happens, the component will THROW. If you implement a pattern like this, the Relay compiler will give you an error</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token constant" style="color:black">A</span><span class="token plain"> @required field may not have an </span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token template-string string" style="color:#65822b">action</span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token plain"> less severe than that </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> its @required parent</span><span class="token punctuation" style="color:#b58a5e">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">This</span><span class="token plain"> @required directive should probably have </span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token template-string string" style="color:#65822b">action: LOG</span><span class="token template-string template-punctuation string" style="color:#65822b">`</span><span class="token plain"> so that it can match its parent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To fix this, either change the <code>profile_picture</code> to use <code>action: LOG</code> or change the <code>url</code> field to use <code>action: THROW</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="caveats-with-connections">Caveats with Connections<a href="#caveats-with-connections" class="hash-link" aria-label="Direct link to Caveats with Connections" title="Direct link to Caveats with Connections">â€‹</a></h2><p>There are currently some limitations in using the <code>@required</code> and <code>@connection</code> directives together. When you use the <code>@connection</code> directive, Relay  automatically inserts some additional fields into the connection, and those fields won&#x27;t be generated with the <code>@required</code> directive. This can result in inconsistencies if you use the <code>@required</code> directive on fields in a Connection type. Consider the following example:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">FriendsList</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token directive function" style="color:black">@refetchable</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">queryName</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token string" style="color:#65822b">&quot;FriendsListQuery&quot;</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token property-query">friends</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">after</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token variable" style="color:black">$cursor</span><span class="token punctuation" style="color:#b58a5e">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#2a6883">first</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token variable" style="color:black">$count</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token directive function" style="color:black">@connection</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">key</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token string" style="color:#65822b">&quot;FriendsList_friends&quot;</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token object">edges</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token property" style="color:black">node</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">        </span><span class="token property" style="color:black">job</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">          </span><span class="token property" style="color:black">title</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">        </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Any usages of <code>@required</code> on the <code>node</code> field or any of its direct child fields will cause the Relay compiler to give you an error saying <code>All references to a field must have matching @required declarations.</code>. In order to bypass this you&#x27;ll need to remove the <code>@required</code> directives on those fields.</p><p>In the above example, we&#x27;d need to remove the <code>@required</code> directives on both the <code>node</code> and <code>job</code> fields, but the usage on the <code>title</code> field would not create an error.</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">FriendsList</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token directive function" style="color:black">@refetchable</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">queryName</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token string" style="color:#65822b">&quot;FriendsListQuery&quot;</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token property-query">friends</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">after</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token variable" style="color:black">$cursor</span><span class="token punctuation" style="color:#b58a5e">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#2a6883">first</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token variable" style="color:black">$count</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token directive function" style="color:black">@connection</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">key</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token string" style="color:#65822b">&quot;FriendsList_friends&quot;</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token object">edges</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token object">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">        </span><span class="token object">job</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">          </span><span class="token property" style="color:black">title</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">LOG</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">        </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">      </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-did-required-make-a-non-nullable-fieldroot-nullable">Why did @required make a non-nullable field/root nullable?<a href="#why-did-required-make-a-non-nullable-fieldroot-nullable" class="hash-link" aria-label="Direct link to Why did @required make a non-nullable field/root nullable?" title="Direct link to Why did @required make a non-nullable field/root nullable?">â€‹</a></h3><p>When using the <code>LOG</code> or <code>NONE</code> actions, Relay will &quot;bubble&quot; a missing field up to its parent field or fragment root. This means that adding <code>@required(action: LOG)</code> (for example) to a child of a non-nullable fragment root will cause the type of the fragment root to become nullable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-happens-if-you-use-required-in-a-plural-field">What happens if you use <code>@required</code> in a plural field<a href="#what-happens-if-you-use-required-in-a-plural-field" class="hash-link" aria-label="Direct link to what-happens-if-you-use-required-in-a-plural-field" title="Direct link to what-happens-if-you-use-required-in-a-plural-field">â€‹</a></h3><p>If a <code>@required(action: LOG)</code> field is missing in a plural field, the <em>item</em> in the list will be returned as null. It will <em>not</em> cause the entire array to become null.. If you have any question about how it will behave, you can inspect the generated Flow types.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-are-required-fields-in-an-inline-fragment-still-nullable">Why are @required fields in an inline fragment still nullable?<a href="#why-are-required-fields-in-an-inline-fragment-still-nullable" class="hash-link" aria-label="Direct link to Why are @required fields in an inline fragment still nullable?" title="Direct link to Why are @required fields in an inline fragment still nullable?">â€‹</a></h3><p>Imagine a fragment like this:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">MyFrag</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token operator" style="color:#b58a5e">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token property" style="color:black">name</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">THROW</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s possible that your <code>Actor</code> will not be a <code>User</code> and therefore not include a <code>name</code>. To represent that in types, we generate a Flow type that looks like this: <code>{name?: string}</code>.</p><p>If you encounter this issue, you can add a <code>__typename</code> like this:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:black;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:black"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:black">MyFrag</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token property" style="color:black">__typename</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token operator" style="color:#b58a5e">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#b58a5e">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">    </span><span class="token property" style="color:black">name</span><span class="token plain"> </span><span class="token directive function" style="color:black">@required</span><span class="token punctuation" style="color:#b58a5e">(</span><span class="token attr-name" style="color:#2a6883">action</span><span class="token punctuation" style="color:#b58a5e">:</span><span class="token plain"> </span><span class="token constant" style="color:black">THROW</span><span class="token punctuation" style="color:#b58a5e">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain">  </span><span class="token punctuation" style="color:#b58a5e">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:black"><span class="token plain"></span><span class="token punctuation" style="color:#b58a5e">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this situation Relay will generate a union type like: <code>{__typename: &#x27;User&#x27;, name: string} | {__typename: &#x27;%ignore this%}</code>. Now you can check the <code>__typename</code> field to narrow your object&#x27;s type down to one that has a non-nullable <code>name</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-not-implement-this-at-the-schemaserver-level">Why not implement this at the schema/server level?<a href="#why-not-implement-this-at-the-schemaserver-level" class="hash-link" aria-label="Direct link to Why not implement this at the schema/server level?" title="Direct link to Why not implement this at the schema/server level?">â€‹</a></h3><p>The &quot;requiredness&quot; of a field is actually a product decision and not a schema question. Therefore we need to implement the handling of it at the product level. Individual components need to be able to decide for themselves how to handle a missing value.</p><p>For example, if a notification is trying to show the price for a Marketplace listing, it could probably just omit the price and still render. If payment flow for that same listing is missing the price, it should probably blow up.</p><p>Another issue is that changes to the server schema are much more difficult to ship since they affect all existing clients across all platforms.</p><p>Basically every value returned by Relay is nullable. This is intentional since we want to be able to handle field-level errors whenever possible. If we lean into KillsParentOnException we would end up wanting to make basically every field use it and our apps would be becomes more brittle since errors which used to be small, become large.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-action-none-be-the-default">Can <code>(action: NONE)</code> be the default?<a href="#can-action-none-be-the-default" class="hash-link" aria-label="Direct link to can-action-none-be-the-default" title="Direct link to can-action-none-be-the-default">â€‹</a></h3><p>On one hand action: NONE makes the most sense as a default (omitted action == no action). However, we are aware that whichever value we choose as the default will be considered the default action for engineers to choose since it&#x27;s the path of least resistance.</p><p>We actually believe that in most cases LOG is the most ideal choice. It gives the component a chance to gracefully recover while also giving us signal that a part of our app is rendering in a sub-optimal way.</p><p>We debated making LOG the default action for that reason, but I think that&#x27;s confusing as well.</p><p>So, for now we are planning to not offer a default argument. After all, it&#x27;s still much less to write out than the equivalent manual null checks. Once we see how people use it we will consider what value (if any) should be the default.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v19.0.0/guides/required-directive.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v19.0.0/guides/alias-directive/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">@alias Directive</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v19.0.0/guides/catch-directive/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">@catch Directive</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action" class="table-of-contents__link toc-highlight">Action</a><ul><li><a href="#none-expected" class="table-of-contents__link toc-highlight"><code>NONE</code> (expected)</a></li><li><a href="#log-recoverable" class="table-of-contents__link toc-highlight"><code>LOG</code> (recoverable)</a></li><li><a href="#throw-unrecoverable" class="table-of-contents__link toc-highlight"><code>THROW</code> (unrecoverable)</a></li></ul></li><li><a href="#locality" class="table-of-contents__link toc-highlight">Locality</a></li><li><a href="#chaining" class="table-of-contents__link toc-highlight">Chaining</a></li><li><a href="#caveats-with-connections" class="table-of-contents__link toc-highlight">Caveats with Connections</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#why-did-required-make-a-non-nullable-fieldroot-nullable" class="table-of-contents__link toc-highlight">Why did @required make a non-nullable field/root nullable?</a></li><li><a href="#what-happens-if-you-use-required-in-a-plural-field" class="table-of-contents__link toc-highlight">What happens if you use <code>@required</code> in a plural field</a></li><li><a href="#why-are-required-fields-in-an-inline-fragment-still-nullable" class="table-of-contents__link toc-highlight">Why are @required fields in an inline fragment still nullable?</a></li><li><a href="#why-not-implement-this-at-the-schemaserver-level" class="table-of-contents__link toc-highlight">Why not implement this at the schema/server level?</a></li><li><a href="#can-action-none-be-the-default" class="table-of-contents__link toc-highlight">Can <code>(action: NONE)</code> be the default?</a></li><li><a href="#does-required-change-anything-about-the-logger-project-field" class="table-of-contents__link toc-highlight">Does @required change anything about the logger project field?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/users/">User Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/relay.svg" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/relay.svg" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright Â© 2025 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.de535efd.js"></script>
<script src="/assets/js/main.509dd6b3.js"></script>
</body>
</html>