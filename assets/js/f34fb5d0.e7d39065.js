"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["26124"],{13695(e,s,n){n.r(s),n.d(s,{metadata:()=>t,default:()=>p,frontMatter:()=>a,contentTitle:()=>l,toc:()=>d,assets:()=>o});var t=JSON.parse('{"id":"guides/relay-resolvers/suspense","title":"Suspense","description":"Handling loading states for live data","source":"@site/versioned_docs/version-v17.0.0/guides/relay-resolvers/suspense.md","sourceDirName":"guides/relay-resolvers","slug":"/guides/relay-resolvers/suspense/","permalink":"/docs/v17.0.0/guides/relay-resolvers/suspense/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v17.0.0/guides/relay-resolvers/suspense.md","tags":[],"version":"v17.0.0","frontMatter":{"id":"suspense","title":"Suspense","slug":"/guides/relay-resolvers/suspense/","description":"Handling loading states for live data"},"sidebar":"docs","previous":{"title":"Live Fields","permalink":"/docs/v17.0.0/guides/relay-resolvers/live-fields/"},"next":{"title":"Error Handling","permalink":"/docs/v17.0.0/guides/relay-resolvers/errors/"}}'),r=n(74848),i=n(28453);let a={id:"suspense",title:"Suspense",slug:"/guides/relay-resolvers/suspense/",description:"Handling loading states for live data"},l,o={},d=[{value:"Suspense Sentinel",id:"suspense-sentinel",level:2}];function u(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["With ",(0,r.jsx)(s.a,{href:"/docs/v17.0.0/guides/relay-resolvers/live-fields/",children:"Live Resolvers"}),", it's possible that the data you are exposing in the graph may not be synchronously available. For example, if you are fetching data from a remote API, it may take some time for the data to be fetched. Relay Resolvers provide a mechanism for handling this loading state."]}),"\n",(0,r.jsx)(s.p,{children:'If a Live Resolver returns the "suspense sentinel" value, all consumers of that field will suspend until that field updates with a non-suspense value.'}),"\n",(0,r.jsx)(s.h2,{id:"suspense-sentinel",children:"Suspense Sentinel"}),"\n",(0,r.jsx)(s.p,{children:"If a Live Resolver is in a loading state, it may return a special sentinel value to indicate that the data is not yet available."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import {suspenseSentinel} from 'relay-runtime';\n\n/**\n * @RelayResolver Query.myIp: String\n * @live\n */\nexport function myIp(): LiveState<string> {\n  return {\n    read: () => {\n      const state = store.getState();\n      const ipLoadObject = state.ip;\n      if (ipLoadObject.status === \"LOADING\") {\n        return suspenseSentinel();\n      }\n      return state.ip;\n    },\n    subscribe: (cb) => {\n      return store.subscribe(cb);\n    },\n  };\n}\n"})}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["If a query or fragment will suspend if it reads any resolver field that is in a suspended state, even if it reads that resolver field indirectly via another resolvers ",(0,r.jsx)(s.code,{children:"@rootFragment"}),"."]})})]})}function p(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453(e,s,n){n.d(s,{R:()=>a,x:()=>l});var t=n(96540);let r={},i=t.createContext(r);function a(e){let s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);