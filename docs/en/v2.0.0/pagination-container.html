<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Pagination Container · Relay</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Pagination Container is also a [higher-order component](https://reactjs.org/docs/higher-order-components.html), similar to a [Fragment Container](./fragment-container.html), that is designed to simplify the workflow of loading more items in a list &amp;mdash; in many cases, we don&#x27;t want to fetch all the data at once but lazily load more data. It relies on a GraphQL server exposing connections in a standardized way. For a detailed spec, please check out [this page](https://facebook.github.io/relay/graphql/connections.htm)."/><meta name="docsearch:version" content="v2.0.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Pagination Container · Relay"/><meta property="og:type" content="website"/><meta property="og:url" content="https://relay.dev/"/><meta property="og:description" content="Pagination Container is also a [higher-order component](https://reactjs.org/docs/higher-order-components.html), similar to a [Fragment Container](./fragment-container.html), that is designed to simplify the workflow of loading more items in a list &amp;mdash; in many cases, we don&#x27;t want to fetch all the data at once but lazily load more data. It relies on a GraphQL server exposing connections in a standardized way. For a detailed spec, please check out [this page](https://facebook.github.io/relay/graphql/connections.htm)."/><meta property="og:image" content="https://relay.dev/img/relay.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://relay.dev/img/relay.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-50', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/redirect.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><h2 class="headerTitle">Relay</h2></a><a href="/en/versions"><h3>v2.0.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/v2.0.0/introduction-to-relay" target="_self">Docs</a></li><li class=""><a href="/en/help" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/relay" target="_self">GitHub</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/introduction-to-relay">Introduction to Relay</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/prerequisites">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/installation-and-setup">Installation and Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/quick-start-guide">Quick Start Guide</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/graphql-in-relay">GraphQL in Relay</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/relay-environment">Relay Environment</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/network-layer">Network Layer</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/query-renderer">QueryRenderer</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/fragment-container">Fragment Container</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/refetch-container">Refetch Container</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/v2.0.0/pagination-container">Pagination Container</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/mutations">Mutations</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/subscriptions">Subscriptions</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/relay-store">Relay Store</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/fetch-query">fetchQuery</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/routing">Routing</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/relay-debugging">Debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/graphql-server-specification">GraphQL Server Specification</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/persisted-queries">Persisted Queries</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Migration Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/new-in-relay-modern">New in Relay Modern</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/relay-compat">Compatibility Mode</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/migration-setup">Migration Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/conversion-playbook">Conversion Playbook</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/conversion-scripts">Conversion Scripts</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/upgrading-setvariables">Upgrading setVariables</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/converting-mutations">Converting Mutations</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/compatibility-cheatsheet">Compatibility Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/api-cheatsheet">API Cheatsheet</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Principles &amp; Architecture<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/thinking-in-graphql">Thinking in GraphQL</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/thinking-in-relay">Thinking In Relay</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/architecture-overview">Architecture Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/compiler-architecture">Compiler Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/runtime-architecture">Runtime Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/videos">Videos</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Community<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/v2.0.0/community-learning-resources">Community Learning Resources</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/relay/edit/master/docs/Modern-PaginationContainer.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Pagination Container</h1></header><article><div><span><p>Pagination Container is also a <a href="https://reactjs.org/docs/higher-order-components.html">higher-order component</a>, similar to a <a href="./fragment-container.html">Fragment Container</a>, that is designed to simplify the workflow of loading more items in a list — in many cases, we don't want to fetch all the data at once but lazily load more data. It relies on a GraphQL server exposing connections in a standardized way. For a detailed spec, please check out <a href="https://facebook.github.io/relay/graphql/connections.htm">this page</a>.</p>
<p>Table of Contents:</p>
<ul>
<li><a href="#connection"><code>@connection</code></a></li>
<li><a href="#createpaginationcontainer"><code>createPaginationContainer</code></a></li>
<li><a href="#hasmore"><code>hasMore</code></a></li>
<li><a href="#isloading"><code>isLoading</code></a></li>
<li><a href="#loadmore"><code>loadMore</code></a></li>
<li><a href="#refetchconnection"><code>refetchConnection</code></a></li>
<li><a href="#pagination-example">Pagination Example</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="connection"></a><a href="#connection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@connection</code></h2>
<p>Pagination Container works in a very similar way to the <a href="https://facebook.github.io/relay/docs/en/fragment-container.html">Fragment Container</a> in that you also specify the data requirements for a component via GraphQL fragments in the <code>fragmentSpec</code>.</p>
<p>However, when <a href="#createpaginationcontainer">specifying connection fragments</a> for a Pagination Container, it is expected that at least one of the fragments contains a <a href="https://facebook.github.io/relay/graphql/connections.htm">GraphQL connection</a> to paginate over, and that the connection field is annotated with a <code>@connection</code> directive.</p>
<p>The purpose of the <code>@connection</code> directive is to allow Relay to uniquely identify different connections under a parent type. The <code>@connection</code> directive takes 2 arguments that help identify the connection:</p>
<pre><code class="hljs css language-graphql"><span class="hljs-symbol">@connection</span>(key: <span class="hljs-built_in">String</span>!, filters: [<span class="hljs-built_in">String</span>])
</code></pre>
<ul>
<li><code>key</code>: <strong>Required</strong> String that serves as a unique identifier for the connection under the parent field type. A good practice could be <code>&lt;ComponentName&gt;_&lt;fieldName | fieldAlias&gt;</code>.</li>
<li><code>filters</code>: <strong>Optional</strong> Array of strings that belong to the set of argument variables defined for the connection field (e.g. <code>orderBy</code>, <code>searchTerm</code>, etc). The values for the variables specified in this array will be used alongside the user-supplied <code>key</code> to uniquely identify a connection. If <code>filters</code> is not provided, by default Relay will use the set of all of the arguments the connection field takes, excluding pagination specific arguments (i.e. <code>first</code>/<code>last</code>, <code>after</code>/<code>before</code>).</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h3>
<p>Specifying just the <code>key</code>:</p>
<pre><code class="hljs css language-javascript">fragment Feed_user on User {
  # This connection, under a specific User, will be uniquely identified by
  # the key &quot;Feed_feed&quot; and the value of `$orderBy` (given that no `filters` were provided)
  feed(
    first: $count
    after: $cursor
    orderby: $orderBy
  ) @connection(key: &quot;Feed_feed&quot;) {
    edges {
      node {
        id,
        ...Story_story
      }
  }
}
</code></pre>
<p>Specifying <code>key</code> and <code>filters</code>:</p>
<pre><code class="hljs css language-javascript">fragment Feed_user on User {
  # This connection, under a specific User, will be uniquely identified by
  # the key &quot;Feed_feed&quot; and /only/ the value of `$searchTerm`, i.e.
  # different values of `orderBy` will not distinguish connections.
  feed(
    first: $count
    after: $cursor
    orderby: $orderBy
    search_term: $searchTerm
  ) @connection(key: &quot;Feed_feed&quot;, filters: [&quot;searchTerm&quot;]) {
    edges {
      node {
        id,
        ...Story_story
      }
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="createpaginationcontainer"></a><a href="#createpaginationcontainer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>createPaginationContainer</code></h2>
<p><code>createPaginationContainer</code> has the following signature:</p>
<pre><code class="hljs css language-javascript">createPaginationContainer(
  component: ReactComponentClass,
  <span class="hljs-attr">fragmentSpec</span>: GraphQLTaggedNode | {[string]: GraphQLTaggedNode},
  <span class="hljs-attr">connectionConfig</span>: ConnectionConfig,
): ReactComponentClass;

type ConnectionConfig = {
  direction?: <span class="hljs-string">&#x27;backward&#x27;</span> | <span class="hljs-string">&#x27;forward&#x27;</span>,
  getConnectionFromProps?: <span class="hljs-function">(<span class="hljs-params">props: <span class="hljs-built_in">Object</span></span>) =&gt;</span> ?ConnectionData,
  getFragmentVariables?: <span class="hljs-function">(<span class="hljs-params">previousVariables: <span class="hljs-built_in">Object</span>, totalCount: number</span>) =&gt;</span> <span class="hljs-built_in">Object</span>,
  <span class="hljs-attr">getVariables</span>: <span class="hljs-function">(<span class="hljs-params">
    props: <span class="hljs-built_in">Object</span>,
    paginationInfo: {count: number, cursor: ?string},
    fragmentVariables: <span class="hljs-built_in">Object</span>,
  </span>) =&gt;</span> <span class="hljs-built_in">Object</span>,
  <span class="hljs-attr">query</span>: GraphQLTaggedNode,
};

type ConnectionData = {
  edges?: ?<span class="hljs-built_in">Array</span>&lt;any&gt;,
  pageInfo?: ?{
    <span class="hljs-attr">endCursor</span>: ?string,
    <span class="hljs-attr">hasNextPage</span>: boolean,
    <span class="hljs-attr">hasPreviousPage</span>: boolean,
    <span class="hljs-attr">startCursor</span>: ?string,
  },
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="arguments"></a><a href="#arguments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Arguments</h3>
<ul>
<li><code>component</code>: The React Component <em>class</em> of the component requiring the fragment data.</li>
<li><code>fragmentSpec</code>: Specifies the data requirements for the Component via a GraphQL fragment. It is expected that one of the fragments specified here will contain a <a href="#connection"><code>@connection</code></a> for pagination. The required data will be available on the component as props that match the shape of the provided fragment. <code>fragmentSpec</code> can be one of 2 things:
<ul>
<li>A <code>graphql</code> tagged fragment. If the fragment uses the name convention <code>&lt;FileName&gt;&lt;...&gt;_&lt;propName&gt;</code>, the fragment's data will be available to the Component as a prop with the given <code>&lt;propName&gt;</code>.
If the fragment name doesn't specify a prop name, the data will be available as a <code>data</code> prop.</li>
<li>An object whose keys are prop names and values are <code>graphql</code> tagged fragments. Each key specified in this object will correspond to a prop available to the resulting Component.</li>
<li><strong>Note:</strong> To enable <a href="./relay-compat.html">compatibility mode</a>, <code>relay-compiler</code> enforces fragments to be named as <code>&lt;FileName&gt;_&lt;propName&gt;</code>.</li>
</ul></li>
<li><code>connectionConfig</code>:
<ul>
<li><code>direction</code>: Either &quot;forward&quot; to indicate forward pagination using after/first, or &quot;backward&quot; to indicate backwards pagination using before/last. If not provided, Relay will infer the direction based on the provided <code>@connection</code> directive. <strong>Note:</strong> <code>direction</code> is not optional in <a href="./relay-compat.html">compatibility mode</a>.</li>
<li><code>getConnectionFromProps</code>: Function that should indicate which connection to paginate over, given the fragment props (i.e. the props corresponding to the <code>fragmentSpec</code>). This is necessary in most cases because the Relay can't automatically tell which connection you mean to paginate over (a container might fetch multiple fragments and connections, but can only paginate one of them). If not provided, Relay will try infer the correct connection to paginate over based on the provided <code>@connection</code> directive. See our <a href="#pagination-example">example</a> for more details. <strong>Note:</strong> <code>getConnectionFromProps</code> is not optional in <a href="./relay-compat.html">compatibility mode</a>.</li>
<li><code>getFragmentVariables</code>: Function that should return the bag of variables  to use for reading out the data from the store when re-rendering the component. This function takes the previous set of variables passed to the pagination <code>query</code>, and the number of elements that have been fetched in total so far. Specifically, this indicates which variables to use when reading out the data from the
local data store <em>after</em> the new pagination <code>query</code> has been fetched. If not specified, Relay will default to using all of the previous variables and using the total count for the <code>count</code> variable. This option is analogous to <a href="./refetch-container#refetch"><code>renderVariables</code></a> in the Refetch Container. See our <a href="#pagination-example">example</a> for more details.</li>
<li><code>getVariables</code>: Function that should return the variables to pass to the pagination <code>query</code> when fetching it from the server, given the current <code>props</code>, <code>count</code> and <code>cursor</code>. You may set whatever variables here, as well as modify the defaults to use for after/first/before/last arguments. See our <a href="#pagination-example">example</a> for more details.</li>
<li><code>query</code>: A <code>graphql</code> tagged query to be used as the pagination query to fetch more data upon calling <a href="#loadmore"><code>loadMore</code></a>.</li>
</ul></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="available-props"></a><a href="#available-props" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Available Props</h3>
<p>The Component resulting from <code>createPaginationContainer</code> will receive the following <code>props</code>:</p>
<pre><code class="hljs css language-javascript">type Props = {
  <span class="hljs-attr">relay</span>: {
    <span class="hljs-attr">environment</span>: Environment,
    hasMore(), <span class="hljs-comment">// See #hasMore section</span>
    isLoading(), <span class="hljs-comment">// See #isLoading section</span>
    loadMore(), <span class="hljs-comment">// See #loadMore section</span>
    refetchConnection(), <span class="hljs-comment">// See #refetchConnection section</span>
  },
  <span class="hljs-comment">// Additional props as specified by the fragmentSpec</span>
}
</code></pre>
<ul>
<li><code>relay</code>:
<ul>
<li><code>environment</code>: The current <a href="./relay-environment.html">Relay Environment</a></li>
<li><code>hasMore</code>: See <code>hasMore</code> <a href="#hasmore">docs</a></li>
<li><code>isLoading</code>: See <code>isLoading</code> <a href="#isloading">docs</a></li>
<li><code>loadMore</code>: See <code>loadMore</code> <a href="#loadmore">docs</a></li>
<li><code>refetchConnection</code>: See <code>refetchConnection</code> <a href="#refetchconnection">docs</a></li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="hasmore"></a><a href="#hasmore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>hasMore()</code></h2>
<p><code>hasMore</code> is a function available on the <code>relay</code> <a href="#available-props">prop</a>. This function indicates whether there are more pages to fetch from the server or not.</p>
<pre><code class="hljs css language-javascript">hasMore: <span class="hljs-function">() =&gt;</span> boolean,
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="isloading"></a><a href="#isloading" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>isLoading</code></h2>
<p><code>isLoading</code> is a function available on the <code>relay</code> <a href="#available-props">prop</a>. This function indicates if a previous call to <a href="#loadmore"><code>loadMore()</code></a> is still pending. This is convenient for avoiding duplicate load calls.</p>
<pre><code class="hljs css language-javascript">isLoading: <span class="hljs-function">() =&gt;</span> boolean,
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="loadmore"></a><a href="#loadmore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>loadMore</code></h2>
<p><code>loadMore</code> is a function available on the <code>relay</code> <a href="#available-props">prop</a>. You can call <code>loadMore()</code> to fetch more items from the server based on the <code>connectionConfig</code> provided to the container. This will return null if there are no more items to fetch, otherwise it will fetch more items and return a Disposable that can be used to cancel the fetch.</p>
<pre><code class="hljs css language-javascript">loadMore(pageSize: number, <span class="hljs-attr">callback</span>: ?<span class="hljs-function">(<span class="hljs-params">error: ?<span class="hljs-built_in">Error</span></span>) =&gt;</span> <span class="hljs-keyword">void</span>): ?Disposable
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="arguments-1"></a><a href="#arguments-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Arguments:</h3>
<ul>
<li><code>pageSize</code>: The number of <strong>additional</strong> items to fetch (not the total).</li>
<li><code>callback</code>: Function called when the new page has been fetched. If an error occurred during refetch, this function will receive that error as an argument.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="refetchconnection"></a><a href="#refetchconnection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>refetchConnection</code></h2>
<p><code>refetchConnection</code> is a function available on the <code>relay</code> <a href="#available-props">prop</a>. You can call <code>refetchConnection</code> to restart pagination on a connection from scratch, with optionally a completely new set of variables to pass to the pagination <code>query</code>. This is useful for example if you are paginating over a collection based on a userID and the userID changes, you'd want to start paginating over the new collection for the new user.</p>
<pre><code class="hljs css language-javascript">refetchConnection:<span class="hljs-function">(<span class="hljs-params">
  totalCount: number,
  callback: (error: ?<span class="hljs-built_in">Error</span>) =&gt; <span class="hljs-keyword">void</span>,
  refetchVariables: ?Variables,
</span>) =&gt;</span> ?Disposable,
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="arguments-2"></a><a href="#arguments-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Arguments:</h3>
<ul>
<li><code>totalCount</code>: The total number of elements to fetch</li>
<li><code>callback</code>: Function called when the new page has been fetched. If an error occurred during refetch, this function will receive that error as an argument.</li>
<li><code>refetchVariables</code>: A potentially new bag of variables to pass to the pagination <code>query</code> when fetching it from the server.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="pagination-example"></a><a href="#pagination-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pagination Example</h2>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// Feed.js</span>
<span class="hljs-keyword">import</span> {createPaginationContainer, graphql} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-relay&#x27;</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Feed</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {this.props.user.feed.edges.map(
          edge =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Story</span> <span class="hljs-attr">story</span>=<span class="hljs-string">{edge.node}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{edge.node.id}</span> /&gt;</span>
        )}
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> this._loadMore()}
          title=&quot;Load More&quot;
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }

  <span class="hljs-function"><span class="hljs-title">_loadMore</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.props.relay.hasMore() || <span class="hljs-built_in">this</span>.props.relay.isLoading()) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-built_in">this</span>.props.relay.loadMore(
      <span class="hljs-number">10</span>,  <span class="hljs-comment">// Fetch the next 10 feed items</span>
      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(error);
      },
    );
  }
}

<span class="hljs-built_in">module</span>.exports = createPaginationContainer(
  Feed,
  {
    <span class="hljs-attr">user</span>: graphql<span class="hljs-string">`
      fragment Feed_user on User
      @argumentDefinitions(
        count: {type: &quot;Int&quot;, defaultValue: 10}
        cursor: {type: &quot;ID&quot;}
        orderby: {type: &quot;[FriendsOrdering]&quot;, defaultValue: [DATE_ADDED]}
      ) {
        feed(
          first: $count
          after: $cursor
          orderby: $orderBy # Non-pagination variables
        ) @connection(key: &quot;Feed_feed&quot;) {
          edges {
            node {
              id
              ...Story_story
            }
          }
        }
      }
    `</span>,
  },
  {
    <span class="hljs-attr">direction</span>: <span class="hljs-string">&#x27;forward&#x27;</span>,
    <span class="hljs-function"><span class="hljs-title">getConnectionFromProps</span>(<span class="hljs-params">props</span>)</span> {
      <span class="hljs-keyword">return</span> props.user &amp;&amp; props.user.feed;
    },
    <span class="hljs-comment">// This is also the default implementation of `getFragmentVariables` if it isn&#x27;t provided.</span>
    <span class="hljs-function"><span class="hljs-title">getFragmentVariables</span>(<span class="hljs-params">prevVars, totalCount</span>)</span> {
      <span class="hljs-keyword">return</span> {
        ...prevVars,
        <span class="hljs-attr">count</span>: totalCount,
      };
    },
    <span class="hljs-function"><span class="hljs-title">getVariables</span>(<span class="hljs-params">props, {count, cursor}, fragmentVariables</span>)</span> {
      <span class="hljs-keyword">return</span> {
        count,
        cursor,
        <span class="hljs-attr">orderBy</span>: fragmentVariables.orderBy,
        <span class="hljs-comment">// userID isn&#x27;t specified as an @argument for the fragment, but it should be a variable available for the fragment under the query root.</span>
        <span class="hljs-attr">userID</span>: fragmentVariables.userID,
      };
    },
    <span class="hljs-attr">query</span>: graphql<span class="hljs-string">`
      # Pagination query to be fetched upon calling `</span>loadMore<span class="hljs-string">`.
      # Notice that we re-use our fragment, and the shape of this query matches our fragment spec.
      query FeedPaginationQuery(
        $count: Int!
        $cursor: ID
        $orderBy: [FriendsOrdering]!
        $userID: ID!
      ) {
        user: node(id: $userID) {
          ...Feed_user @arguments(count: $count, cursor: $cursor, orderBy: $orderBy)
        }
      }
    `</span>
  }
);
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 7/2/2018 by Chris Walter</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/v2.0.0/refetch-container"><span class="arrow-prev">← </span><span>Refetch Container</span></a><a class="docs-next button" href="/docs/en/v2.0.0/mutations"><span>Mutations</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#connection"><code>@connection</code></a><ul class="toc-headings"><li><a href="#examples">Examples</a></li></ul></li><li><a href="#createpaginationcontainer"><code>createPaginationContainer</code></a><ul class="toc-headings"><li><a href="#arguments">Arguments</a></li><li><a href="#available-props">Available Props</a></li></ul></li><li><a href="#hasmore"><code>hasMore()</code></a></li><li><a href="#isloading"><code>isLoading</code></a></li><li><a href="#loadmore"><code>loadMore</code></a><ul class="toc-headings"><li><a href="#arguments-1">Arguments:</a></li></ul></li><li><a href="#refetchconnection"><code>refetchConnection</code></a><ul class="toc-headings"><li><a href="#arguments-2">Arguments:</a></li></ul></li><li><a href="#pagination-example">Pagination Example</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/relay.svg" alt="Relay" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/introduction-to-relay.html">Introduction</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a></div><div><h5>More</h5><a href="https://github.com/facebook/relay">GitHub</a><a href="https://opensource.facebook.com/legal/terms">Terms of Use</a><a href="https://opensource.facebook.com/legal/privacy">Privacy Policy</a><a href="https://opensource.facebook.com/legal/data-policy/">Data Policy</a><a href="https://opensource.facebook.com/legal/cookie-policy/">Cookie Policy</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2021 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '3d7d5825d50ea36bca0e6ad06c926f06',
                indexName: 'relay',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["version:v2.0.0"]}
              });
            </script></body></html>