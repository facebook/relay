"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["51848"],{76609(e,t,n){e.exports=n.p+"a6f1ed1350292778.wasm"},22434(e,t,n){n.d(t,{A:()=>_});var r,l=n(74848);n(48723),n(96399),n(43421),n(74975);var a=n(44487),i=n(96540);let{useMemo:o,useState:s,useLayoutEffect:u,useEffect:c}=r||(r=n.t(i,2)),d={glyphMargin:!1,folding:!1,lineDecorationsWidth:10,lineNumbersMinChars:0,language:"graphql",minimap:{enabled:!1},lineNumbers:"off",automaticLayout:!0,fontSize:"16px",scrollBeyondLastLine:!1,renderIndentGuides:!1,renderLineHighlight:"none",tabSize:2};function _({text:e,onDidChange:t,diagnostics:n,style:r}){let[i,_]=s(null),g=!function(){let[e,t]=s(()=>f());return c(()=>{let e=new MutationObserver((e,n)=>{for(let n of e)"attributes"===n.type&&"data-theme"===n.attributeName&&t(f())});return e.observe(document.documentElement,{attributes:!0}),()=>{e.disconnect()}},[]),e}()?"vs":"vs-dark",m=o(()=>null==i?null:a.EN.create(i,d),[i]);return u(()=>{null!=m&&m.getValue()!==e&&m.setValue(e)},[m,e]),u(()=>{if(null==m)return;let e=m.getModel();if(null==e)return;let t=(n??[]).map(e=>({severity:8,message:e.message,startLineNumber:e.line_start+1,startColumn:e.column_start+1,endLineNumber:e.line_end+1,endColumn:e.column_end+1}));a.EN.setModelMarkers(e,"relay",t)},[m,n]),u(()=>{a.EN.setTheme(g)},[g]),c(()=>{if(null==m||null==t)return;let e=m.onDidChangeModelContent(()=>{t(m.getValue())});return()=>{e.dispose()}},[m,t]),(0,l.jsx)("div",{ref:_,style:r})}function f(){return"dark"===document.documentElement.dataset.theme}},11028(e,t,n){n.r(t),n.d(t,{default:()=>x});var r=n(74848);let l=[{key:"no_inline",label:"@no_inline",kind:"enum",default:!0},{key:"enable_3d_branch_arg_generation",label:"3D Branch Arg Generation",kind:"bool",default:!0},{key:"actor_change_support",label:"Actor Change Support",kind:"enum",default:!0},{key:"text_artifacts",label:"Text Artifacts",kind:"enum",default:!0},{key:"skip_printing_nulls",label:"Skip Printing Nulls",kind:"enum",default:!1},{key:"compact_query_text",label:"Compact Query Text",kind:"enum",default:!1},{key:"enforce_fragment_alias_where_ambiguous",label:"Enforce @alias where ambiguous",kind:"enum",default:!0}],a={schemaText:`
type User {
  name: String
  age: Int
  best_friend: User
}

type Query {
  me: User
}
 `.trim(),documentText:`
query MyQuery {
  me {
    name
    ...AgeFragment
    best_friend {
      ...AgeFragment
    }
  }
}

fragment AgeFragment on User {
  age
}
 `.trim(),inputWindow:"schema",outputType:"operation",featureFlags:Object.fromEntries(l.map(e=>[e.key,e.default])),language:"typescript"};var i=n(32992),o=n(96540),s=n.t(o,2);let{useReducer:u,useMemo:c,useEffect:d}=s,_="relayCompilerExplorerLastContent";function f(e,t){switch(t.type){case"UPDATE_SCHEMA":return{...e,schemaText:t.schemaText};case"UPDATE_DOCUMENT":return{...e,documentText:t.documentText};case"SET_OUTPUT_TYPE":return{...e,outputType:t.outputType};case"UPDATE_INPUT_WINDOW":return{...e,inputWindow:t.inputWindow};case"SET_FEATURE_FLAG":let n={...e.featureFlags,[t.flag]:t.value};return{...e,featureFlags:n};case"SET_LANGUAGE":return{...e,language:t.language};default:throw Error("Unexpected action type: "+t.type)}}function g(){let e=window.location.hash||localStorage.getItem(_);if(null!=e&&"#"===e[0]&&e.length>1){let t=e.slice(1);try{return function(e){if("1"!==e.get("enc"))return console.warn("Unexpected encoding version: "+e.get("enc")),null;for(let t of Object.keys(a)){let n=e.get(t);if("schemaText"==t||"documentText"==t)a[t]=i.decompressFromEncodedURIComponent(n);else if("featureFlags"==t){let n={};for(let{key:t}of l)n[t]="true"===e.get(t);a[t]=n}else a[t]=e.get(t)}return a}(new URLSearchParams(t))||a}catch(e){console.warn("Failed to decode previous state: ",e)}}return a}var m=n(94555),p=n(20053);let{useState:b,useEffect:y,useLayoutEffect:w,useMemo:h}=s;function x(){return(0,r.jsx)(m.A,{title:"Compiler Explorer",children:(0,r.jsx)(T,{minHeight:600,children:(0,r.jsx)(v,{})})})}function T({children:e,minHeight:t}){let[n,l]=b(null),[a,i]=b(null);return w(()=>{if(null==n)return;let e=n.getBoundingClientRect().y;i(Math.max(window.innerHeight-e,t))},[n,t]),(0,r.jsx)("div",{style:{height:a},ref:l,children:null!=a&&e})}function v(){let{state:e,setOutputType:t,setInputWindow:a,setDocumentText:o,setSchemaText:s,setFeatureFlag:m,setLanguage:p}=function(){let[e,t]=u(f,null,g);return d(()=>{let t=function(e){let t=new URLSearchParams;for(let[n,r]of(t.set("enc","1"),Object.entries(e)))if("schemaText"==n||"documentText"==n)t.set(n,i.compressToEncodedURIComponent(r));else if("featureFlags"==n)for(let[e,n]of Object.entries(r))t.set(e,n);else t.set(n,r);return t.toString()}(e),n=`#${t}`;window.history.replaceState(null,null,n),localStorage.setItem(_,n)},[e]),{state:e,...c(()=>({setSchemaText:e=>t({type:"UPDATE_SCHEMA",schemaText:e}),setDocumentText:e=>t({type:"UPDATE_DOCUMENT",documentText:e}),setFeatureFlag:(e,n)=>t({type:"SET_FEATURE_FLAG",flag:e,value:n}),setLanguage:e=>t({type:"SET_LANGUAGE",language:e}),setOutputType:e=>t({type:"SET_OUTPUT_TYPE",outputType:e}),setInputWindow:e=>{t({type:"UPDATE_INPUT_WINDOW",inputWindow:e})}}),[])}}(),w=function(e){var t;let{schemaText:r,documentText:a,language:i,outputType:o}=e,s=c(()=>JSON.stringify(Object.fromEntries(l.map(({key:e,kind:n})=>{let r=t.featureFlags[e];switch(n){case"enum":return[e,{kind:r?"enabled":"disabled"}];case"bool":return[e,r];default:throw Error(`Unexpected feature flag kind: ${n}`)}})),null,2),[(t=e).featureFlags]),u=function(){let[e,t]=b(null);return y(()=>{let e=!1,r=n(59305);return(0,r.default)().then(()=>{e||t(r)}),()=>{e=!0}},[]),e}();return h(()=>{if(null==u)return{Ok:"Loading..."};try{switch(o){case"ast":return JSON.parse(u.parse_to_ast(a));case"ir":return JSON.parse(u.parse_to_ir(r,a));case"reader":return JSON.parse(u.parse_to_reader_ast(s,r,a));case"normalization":return JSON.parse(u.parse_to_normalization_ast(s,r,a));case"operation":return JSON.parse(u.transform(s,r,a));case"types":{let e=JSON.stringify({language:i});return JSON.parse(u.parse_to_types(s,e,r,a))}default:throw Error(`Unknown output type ${o}`)}}catch(e){return{Ok:`Error: The compiler crashed: ${e.message}`}}},[r,a,o,u,s,i])}(e),x=w.Ok??"",T=w.Err?.SchemaDiagnostics,v=w.Err?.DocumentDiagnostics,A=w.Err?.ConfigError,k=h(()=>n(22434).A,[]);return(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",padding:20},children:[(0,r.jsxs)("div",{style:{display:"flex",columnGap:20},children:[(0,r.jsx)("div",{style:{width:"50%",alignSelf:"flex-end"},children:(0,r.jsx)(S,{values:[{value:"schema",label:"Schema"},{value:"document",label:"Document"},{value:"config",label:"Config"}],selectedValue:e.inputWindow,setSelectedValue:e=>a(e)})}),(0,r.jsx)("div",{style:{width:"50%"},children:(0,r.jsx)(S,{values:[{value:"operation",label:"Operation"},{value:"ast",label:"AST"},{value:"ir",label:"IR"},{value:"normalization",label:"Normalization AST"},{value:"reader",label:"Reader AST"},{value:"types",label:"Types"}],selectedValue:e.outputType,setSelectedValue:e=>t(e)})})]}),(0,r.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:20},children:[(0,r.jsx)("div",{style:{width:"50%",display:"flex",flexDirection:"column"},children:(()=>{switch(e.inputWindow){case"schema":return(0,r.jsx)(k,{text:e.schemaText,onDidChange:s,style:{flexGrow:1},diagnostics:T},"schema");case"document":return(0,r.jsx)(k,{text:e.documentText,onDidChange:o,style:{flexGrow:3},diagnostics:v},"document");case"config":return(0,r.jsxs)("div",{style:{display:"flex",padding:20,flexGrow:1,flexDirection:"column",columnGap:20},children:[(0,r.jsx)(E,{setFeatureFlag:m,featureFlags:e.featureFlags}),(0,r.jsx)(j,{setLanguage:p,language:e.language})]})}})()}),(0,r.jsx)("div",{style:{width:"50%",display:"flex"},children:(0,r.jsx)("div",{style:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,r.jsx)(k,{text:A??x,style:{flexGrow:1}})})})]})]})}function E({featureFlags:e,setFeatureFlag:t}){return(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:l.map(({key:n,label:l})=>(0,r.jsxs)("label",{style:{display:"block"},children:[(0,r.jsx)("input",{type:"checkbox",checked:e[n],onChange:e=>t(n,e.target.checked)}),l]},n))})}function j({setLanguage:e,language:t}){return(0,r.jsx)("div",{children:(0,r.jsxs)("label",{children:["Type Generation Language:",(0,r.jsxs)("select",{onChange:t=>e(t.target.value),value:t,children:[(0,r.jsx)("option",{value:"flow",children:"Flow"}),(0,r.jsx)("option",{value:"typescript",children:"TypeScript"})]})]})})}function S({values:e,selectedValue:t,setSelectedValue:n}){return(0,r.jsx)("div",{className:"tabs-container",children:(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:"tabs",children:e.map(({value:e,label:l})=>{let a=t===e;return(0,r.jsx)("li",{role:"tab",tabIndex:a?0:-1,"aria-selected":a,className:(0,p.A)("tabs__item",{"tabs__item--active":a}),onClick:()=>n(e),children:l},e)})})})}},59305(e,t,n){let r;n.r(t),n.d(t,{default:()=>S,initSync:()=>E,parse_to_ast:()=>g,parse_to_ir:()=>m,parse_to_normalization_ast:()=>b,parse_to_reader_ast:()=>p,parse_to_types:()=>y,start:()=>h,transform:()=>w});let l="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&l.decode();let a=null;function i(){return(null===a||0===a.byteLength)&&(a=new Uint8Array(r.memory.buffer)),a}function o(e,t){return e>>>=0,l.decode(i().subarray(e,e+t))}let s=0,u="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},c="function"==typeof u.encodeInto?function(e,t){return u.encodeInto(e,t)}:function(e,t){let n=u.encode(e);return t.set(n),{read:e.length,written:n.length}};function d(e,t,n){if(void 0===n){let n=u.encode(e),r=t(n.length,1)>>>0;return i().subarray(r,r+n.length).set(n),s=n.length,r}let r=e.length,l=t(r,1)>>>0,a=i(),o=0;for(;o<r;o++){let t=e.charCodeAt(o);if(t>127)break;a[l+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),l=n(l,r,r=o+3*e.length,1)>>>0;let t=c(e,i().subarray(l+o,l+r));o+=t.written,l=n(l,r,o,1)>>>0}return s=o,l}let _=null;function f(){return(null===_||!0===_.buffer.detached||void 0===_.buffer.detached&&_.buffer!==r.memory.buffer)&&(_=new DataView(r.memory.buffer)),_}function g(e){let t,n;try{let l=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),a=s,i=r.parse_to_ast(l,a);return t=i[0],n=i[1],o(i[0],i[1])}finally{r.__wbindgen_free(t,n,1)}}function m(e,t){let n,l;try{let a=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),i=s,u=d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=s,_=r.parse_to_ir(a,i,u,c);return n=_[0],l=_[1],o(_[0],_[1])}finally{r.__wbindgen_free(n,l,1)}}function p(e,t,n){let l,a;try{let i=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=s,c=d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),_=s,f=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),g=s,m=r.parse_to_reader_ast(i,u,c,_,f,g);return l=m[0],a=m[1],o(m[0],m[1])}finally{r.__wbindgen_free(l,a,1)}}function b(e,t,n){let l,a;try{let i=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=s,c=d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),_=s,f=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),g=s,m=r.parse_to_normalization_ast(i,u,c,_,f,g);return l=m[0],a=m[1],o(m[0],m[1])}finally{r.__wbindgen_free(l,a,1)}}function y(e,t,n,l){let a,i;try{let u=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=s,_=d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),f=s,g=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),m=s,p=d(l,r.__wbindgen_malloc,r.__wbindgen_realloc),b=s,y=r.parse_to_types(u,c,_,f,g,m,p,b);return a=y[0],i=y[1],o(y[0],y[1])}finally{r.__wbindgen_free(a,i,1)}}function w(e,t,n){let l,a;try{let i=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=s,c=d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),_=s,f=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),g=s,m=r.transform(i,u,c,_,f,g);return l=m[0],a=m[1],o(m[0],m[1])}finally{r.__wbindgen_free(l,a,1)}}function h(){r.start()}async function x(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function T(){let e={};return e.wbg={},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let n,l;try{n=e,l=t,console.error(o(e,t))}finally{r.__wbindgen_free(n,l,1)}},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return Error()},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){let n=d(t.stack,r.__wbindgen_malloc,r.__wbindgen_realloc),l=s;f().setInt32(e+4,l,!0),f().setInt32(e+0,n,!0)},e.wbg.__wbindgen_init_externref_table=function(){let e=r.__wbindgen_export_3,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}function v(e,t){return r=e.exports,j.__wbindgen_wasm_module=t,_=null,a=null,r.__wbindgen_start(),r}function E(e){if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));let t=T();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),v(new WebAssembly.Instance(e,t),e)}async function j(e){if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new URL(n(76609),n.b));let t=T();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:l,module:a}=await x(await e,t);return v(l,a)}let S=j}}]);