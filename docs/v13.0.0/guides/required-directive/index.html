<!doctype html>
<html class="docs-version-v13.0.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Relay RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Relay Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-50","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-50"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-50",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Relay" href="/opensearch.xml"><title data-react-helmet="true">@required Directive | Relay</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" name="twitter:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" property="og:url" content="https://relay.dev/docs/v13.0.0/guides/required-directive/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v13.0.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v13.0.0"><meta data-react-helmet="true" property="og:title" content="@required Directive | Relay"><meta data-react-helmet="true" name="description" content="Relay guide to @required"><meta data-react-helmet="true" property="og:description" content="Relay guide to @required"><meta data-react-helmet="true" name="keywords" content="required,directive,optional,nullthrows"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://relay.dev/docs/v13.0.0/guides/required-directive/"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v13.0.0/guides/required-directive/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v13.0.0/guides/required-directive/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4d704aec.css">
<link rel="preload" href="/assets/js/runtime~main.2e92e18f.js" as="script">
<link rel="preload" href="/assets/js/main.b60abdb4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">Relay</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/help/">Help</a><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/v13.0.0/">v13.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/guides/required-directive/">Next ðŸš§</a></li><li><a class="dropdown__link" href="/docs/guides/required-directive/">v14.0.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v13.0.0/guides/required-directive/">v13.0.0</a></li><li><a class="dropdown__link" href="/docs/v12.0.0/">v12.0.0</a></li><li><a class="dropdown__link" href="/docs/v11.0.0/">v11.0.0</a></li><li><a class="dropdown__link" href="/docs/v10.1.3/">v10.1.3</a></li><li><a class="dropdown__link" href="/docs/v10.1.2/">v10.1.2</a></li><li><a class="dropdown__link" href="/docs/v10.1.1/">v10.1.1</a></li><li><a class="dropdown__link" href="/docs/v10.1.0/">v10.1.0</a></li><li><a class="dropdown__link" href="/docs/v10.0.1/">v10.0.1</a></li><li><a class="dropdown__link" href="/docs/v10.0.0/">v10.0.0</a></li><li><a class="dropdown__link" href="/docs/v9.1.0/">v9.1.0</a></li><li><a class="dropdown__link" href="/docs/v9.0.0/">v9.0.0</a></li><li><a class="dropdown__link" href="/docs/v8.0.0/">v8.0.0</a></li><li><a class="dropdown__link" href="/docs/v7.1.0/">v7.1.0</a></li><li><a class="dropdown__link" href="/docs/v7.0.0/">v7.0.0</a></li><li><a class="dropdown__link" href="/docs/v6.0.0/">v6.0.0</a></li><li><a class="dropdown__link" href="/docs/v5.0.0/">v5.0.0</a></li><li><a class="dropdown__link" href="/docs/v4.0.0/">v4.0.0</a></li><li><a class="dropdown__link" href="/docs/v3.0.0/">v3.0.0</a></li><li><a class="dropdown__link" href="/docs/v2.0.0/">v2.0.0</a></li><li><a class="dropdown__link" href="/docs/v1.7.0/">v1.7.0</a></li><li><a class="dropdown__link" href="/docs/v1.6.2/">v1.6.2</a></li><li><a class="dropdown__link" href="/docs/v1.6.1/">v1.6.1</a></li><li><a class="dropdown__link" href="/docs/v1.6.0/">v1.6.0</a></li><li><a class="dropdown__link" href="/docs/v1.5.0/">v1.5.0</a></li><li><a class="dropdown__link" href="/docs/v1.4.1/">v1.4.1</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">A Guided Tour</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/graphql-server-specification/">GraphQL Server Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/compiler/">Relay Compiler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/type-emission/">Type Emission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/persisted-queries/">Persisted Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/network-layer/">Network Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/client-schema-extensions/">Client Schema Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/testing-relay-components/">Testing Relay Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v13.0.0/guides/testing-relay-with-preloaded-queries/">Testing Relay with Preloaded Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v13.0.0/guides/required-directive/">@required Directive</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Migration and Compatibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Debugging</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Principles and Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v13.0.0/community-learning-resources/">Community Learning Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v13.0.0/glossary/">Glossary</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><div><span class="badge badge--secondary">Version: v13.0.0</span></div><header><h1 class="docTitle_1y8q">@required Directive</h1></header><div class="markdown"><p><code>@required</code> is a directive you can add to fields in your Relay queries to declare how null values should be handled at runtime. You can think of it as saying &quot;if this field is ever null, its parent field is invalid and should be null&quot;.</p><p>When you have a GraphQL schema where many fields are nullable, a considerable amount of product code is needed to handle each field&#x27;s potential &quot;nullness&quot; before the underlying data can be used. With <code>@required</code>, Relay can handle some types of null checks before it returns data to your component, which means that <strong>any field you annotate with</strong> <strong><code>@required</code></strong> <strong>will become non-nullable in the generated types for your response</strong>.</p><p>If a <code>@required</code> field is null at runtime, Relay will &quot;bubble&quot; that nullness up to the field&#x27;s parent. For example, given this query:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> MyQuery </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  viewer </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token directive function" style="color:#d73a49">@required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">LOG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If <code>name</code> is null, relay would return <code>{ viewer: null }</code>. You can think of <code>@required</code> in this instance as saying &quot;<code>viewer</code> is useless without a <code>name</code>&quot;.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="action">Action<a aria-hidden="true" class="hash-link" href="#action" title="Direct link to heading">â€‹</a></h2><p>The <code>@required</code> directive has a required <code>action</code> argument which has three possible values:</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="none-expected"><code>NONE</code> (expected)<a aria-hidden="true" class="hash-link" href="#none-expected" title="Direct link to heading">â€‹</a></h3><p>This field is expected to be null sometimes.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="log-recoverable"><code>LOG</code> (recoverable)<a aria-hidden="true" class="hash-link" href="#log-recoverable" title="Direct link to heading">â€‹</a></h3><p>This value is not expected to ever be null, but the component <strong>can still render</strong> if it is. If a field with <code>action: LOG</code> is null, the Relay environment logger will receive an event that looks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;read.missing_required_field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  owner</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// MyFragmentOrQueryName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fieldPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// path.to.my.field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="throw-unrecoverable"><code>THROW</code> (unrecoverable)<a aria-hidden="true" class="hash-link" href="#throw-unrecoverable" title="Direct link to heading">â€‹</a></h3><p>This value should not be null, and the component <strong>cannot render without it</strong>. If a field with <code>action: THROW</code> is null at runtime, the component which reads that field <strong>will throw during render</strong>. The error message includes both the owner and field path. Only use this option if your component is contained within an <a href="https://reactjs.org/docs/error-boundaries.html" target="_blank" rel="noopener noreferrer">error boundary</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="locality">Locality<a aria-hidden="true" class="hash-link" href="#locality" title="Direct link to heading">â€‹</a></h2><p>A field&#x27;s <code>@required</code> status is <strong>local to the fragment where it is specified</strong>. This allows you to add add/remove the directive without having to think about anything outside the scope of your component.</p><p>This choice reflects the fact that some components may be able to recover better from missing data than others. For example, a <code>&lt;RestaurantInfo /&gt;</code> component could probably render something sensible even if the restaurant&#x27;s address is missing, but a <code>&lt;RestaurantLocationMap /&gt;</code> component might not.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="examples">Examples<a aria-hidden="true" class="hash-link" href="#examples" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="chaining">Chaining<a aria-hidden="true" class="hash-link" href="#chaining" title="Direct link to heading">â€‹</a></h3><p><code>@required</code> directives can be chained to make a deeply nested field accessible after just one null check:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useFragment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  fragment MyUser on User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    name @required(action: LOG)</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    profile_picture @required(action: LOG) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      url @required(action: LOG)</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">profile_picture</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Note</strong>: If you use <code>@required</code> on a top level field of a fragment, the object returned from <code>useFragment</code> itself may become nullable. The generated types will reflect this.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="faq">FAQ<a aria-hidden="true" class="hash-link" href="#faq" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="why-did-required-make-a-non-nullable-fieldroot-nullable">Why did @required make a non-nullable field/root nullable?<a aria-hidden="true" class="hash-link" href="#why-did-required-make-a-non-nullable-fieldroot-nullable" title="Direct link to heading">â€‹</a></h3><p>When using the <code>LOG</code> or <code>NONE</code> actions, Relay will &quot;bubble&quot; a missing field up to its parent field or fragment root. This means that adding <code>@required(action: LOG)</code> (for example) to a child of a non-nullable fragment root will cause the type of the fragment root to become nullable.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="what-happens-if-you-use-required-in-a-plural-field">What happens if you use <code>@required</code> in a plural field<a aria-hidden="true" class="hash-link" href="#what-happens-if-you-use-required-in-a-plural-field" title="Direct link to heading">â€‹</a></h3><p>If a <code>@required(action: LOG)</code> field is missing in a plural field, the <em>item</em> in the list will be returned as null. It will <em>not</em> cause the entire array to become null.. If you have any question about how it will behave, you can inspect the generated Flow types.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="why-are-required-fields-in-an-inline-fragment-still-nullable">Why are @required fields in an inline fragment still nullable?<a aria-hidden="true" class="hash-link" href="#why-are-required-fields-in-an-inline-fragment-still-nullable" title="Direct link to heading">â€‹</a></h3><p>Imagine a fragment like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">MyFrag</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token directive function" style="color:#d73a49">@required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THROW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It&#x27;s possible that your <code>Actor</code> will not be at <code>User</code> and therefore not include a <code>name</code>. To represent that in types, we generate a Flow type that looks like this: <code>{name?: string}</code>.</p><p>If you encounter this issue, you can add a <code>__typename</code> like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">MyFrag</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token directive function" style="color:#d73a49">@required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THROW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this situation Relay will generate a union type like: <code>{__typename: &#x27;User&#x27;, name: string} | {__typename: &#x27;%ignore this%}</code>. Now you can check the <code>__typename</code> field to narrow your object&#x27;s type down to one that has a non-nullalble <code>name</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="why-not-implement-this-at-the-schemaserver-level">Why not implement this at the schema/server level?<a aria-hidden="true" class="hash-link" href="#why-not-implement-this-at-the-schemaserver-level" title="Direct link to heading">â€‹</a></h3><p>The &quot;requiredness&quot; of a field is actually a product decision and not a schema question. Therefore we need to implement the handling of it at the product level. Individual components need to be able to decide for themselves how to handle a missing value.</p><p>For example, if a notification is trying to show the price for a Marketplace listing, it could probably just omit the price and still render. If payment flow for that same listing is missing the price, it should probably blow up.</p><p>Another issue is that changes to the server schema are much more difficult to ship since they affect all existing clients across all platforms.</p><p>Basically every value returned by Relay is nullable. This is intentional since we want to be able to handle field-level errors whenever possible. If we lean into KillsParentOnException we would end up wanting to make basically every field use it and our apps would be becomes more brittle since errors which used to be small, become large.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="can-action-none-be-the-default">Can <code>(action: NONE)</code> be the default?<a aria-hidden="true" class="hash-link" href="#can-action-none-be-the-default" title="Direct link to heading">â€‹</a></h3><p>On one hand action: NONE makes the most sense as a default (omitted action == no action). However, we are aware that whichever value we choose as the default will be considered the default action for engineers to choose since it&#x27;s the path of least resistance.</p><p>We actually believe that in most cases LOG is the most ideal choice. It gives the component a chance to gracefully recover while also giving us signal that a part of our app is rendering in a sub-optimal way.</p><p>We debated making LOG the default action for that reason, but I think that&#x27;s confusing as well.</p><p>So, for now we are planning to not offer a default argument. After all, it&#x27;s still much less to write out than the equivalent manual null checks. Once we see how people use it we will consider what value (if any) should be the default.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/v13.0.0/guides/testing-relay-with-preloaded-queries/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Testing Relay with Preloaded Queries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/v13.0.0/migration-and-compatibility/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrading to Relay Hooks<!-- --> Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action" class="table-of-contents__link toc-highlight">Action</a><ul><li><a href="#none-expected" class="table-of-contents__link toc-highlight"><code>NONE</code> (expected)</a></li><li><a href="#log-recoverable" class="table-of-contents__link toc-highlight"><code>LOG</code> (recoverable)</a></li><li><a href="#throw-unrecoverable" class="table-of-contents__link toc-highlight"><code>THROW</code> (unrecoverable)</a></li></ul></li><li><a href="#locality" class="table-of-contents__link toc-highlight">Locality</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#chaining" class="table-of-contents__link toc-highlight">Chaining</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#why-did-required-make-a-non-nullable-fieldroot-nullable" class="table-of-contents__link toc-highlight">Why did @required make a non-nullable field/root nullable?</a></li><li><a href="#what-happens-if-you-use-required-in-a-plural-field" class="table-of-contents__link toc-highlight">What happens if you use <code>@required</code> in a plural field</a></li><li><a href="#why-are-required-fields-in-an-inline-fragment-still-nullable" class="table-of-contents__link toc-highlight">Why are @required fields in an inline fragment still nullable?</a></li><li><a href="#why-not-implement-this-at-the-schemaserver-level" class="table-of-contents__link toc-highlight">Why not implement this at the schema/server level?</a></li><li><a href="#can-action-none-be-the-default" class="table-of-contents__link toc-highlight">Can <code>(action: NONE)</code> be the default?</a></li><li><a href="#does-required-change-anything-about-the-logger-project-field" class="table-of-contents__link toc-highlight">Does @required change anything about the logger project field?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/users/">User Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div></div></div></footer></div>
<script src="/assets/js/runtime~main.2e92e18f.js"></script>
<script src="/assets/js/main.b60abdb4.js"></script>
</body>
</html>