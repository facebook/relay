"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9275],{1332:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var r="\ntype User {\n  name: String\n  age: Int\n  best_friend: User\n}\n\ntype Query {\n  me: User\n}\n ".trim(),a="\nquery MyQuery {\n  me {\n    name\n    ...AgeFragment\n    best_friend {\n      ...AgeFragment\n    }\n  }\n}\n\nfragment AgeFragment on User {\n  age\n}\n ".trim(),i=[{key:"no_inline",label:"@no_inline",kind:"enum",default:!0},{key:"enable_3d_branch_arg_generation",label:"3D Branch Arg Generation",kind:"bool",default:!0},{key:"actor_change_support",label:"Actor Change Support",kind:"enum",default:!0},{key:"text_artifacts",label:"Text Artifacts",kind:"enum",default:!0},{key:"skip_printing_nulls",label:"Skip Printing Nulls",kind:"enum",default:!1},{key:"compact_query_text",label:"Compact Query Text",kind:"enum",default:!1},{key:"enforce_fragment_alias_where_ambiguous",label:"Enforce @alias where ambiguous",kind:"enum",default:!0}],l={schemaText:r,documentText:a,inputWindow:"schema",outputType:"operation",featureFlags:Object.fromEntries(i.map(function(e){return[e.key,e.default]})),language:"typescript"},o=t(79232),u=t(32992),s="1";var c=t(96540),d=c.useReducer,f=c.useMemo,_=c.useEffect,g="relayCompilerExplorerLastContent";function p(){var e=d(m,null,b),n=e[0],t=e[1];_(function(){var e=function(e){var n=new URLSearchParams;n.set("enc",s);for(var t=0,r=Object.entries(e);t<r.length;t++){var a=r[t],i=a[0],l=a[1];if("schemaText"==i||"documentText"==i)n.set(i,u.compressToEncodedURIComponent(l));else if("featureFlags"==i)for(var o=0,c=Object.entries(l);o<c.length;o++){var d=c[o],f=d[0],_=d[1];n.set(f,_)}else n.set(i,l)}return n.toString()}(n),t="#"+e;window.history.replaceState(null,null,t),localStorage.setItem(g,t)},[n]);var r=f(function(){return{setSchemaText:function(e){return t({type:"UPDATE_SCHEMA",schemaText:e})},setDocumentText:function(e){return t({type:"UPDATE_DOCUMENT",documentText:e})},setFeatureFlag:function(e,n){return t({type:"SET_FEATURE_FLAG",flag:e,value:n})},setLanguage:function(e){return t({type:"SET_LANGUAGE",language:e})},setOutputType:function(e){return t({type:"SET_OUTPUT_TYPE",outputType:e})},setInputWindow:function(e){t({type:"UPDATE_INPUT_WINDOW",inputWindow:e})}}},[]);return Object.assign({state:n},r)}function m(e,n){var t;switch(n.type){case"UPDATE_SCHEMA":return Object.assign({},e,{schemaText:n.schemaText});case"UPDATE_DOCUMENT":return Object.assign({},e,{documentText:n.documentText});case"SET_OUTPUT_TYPE":return Object.assign({},e,{outputType:n.outputType});case"UPDATE_INPUT_WINDOW":return Object.assign({},e,{inputWindow:n.inputWindow});case"SET_FEATURE_FLAG":var r=Object.assign({},e.featureFlags,((t={})[n.flag]=n.value,t));return Object.assign({},e,{featureFlags:r});case"SET_LANGUAGE":return Object.assign({},e,{language:n.language});default:throw new Error("Unexpected action type: "+n.type)}}function b(){var e=window.location.hash||localStorage.getItem(g);if(null!=e&&"#"===e[0]&&e.length>1){var n=e.slice(1);try{return function(e){if(e.get("enc")!==s)return console.warn("Unexpected encoding version: "+e.get("enc")),null;for(var n=l,t=0,r=Object.keys(l);t<r.length;t++){var a=r[t],c=e.get(a);if("schemaText"==a||"documentText"==a)n[a]=u.decompressFromEncodedURIComponent(c);else if("featureFlags"==a){for(var d,f={},_=(0,o.A)(i);!(d=_()).done;){var g=d.value.key;f[g]="true"===e.get(g)}n[a]=f}else n[a]=e.get(a)}return n}(new URLSearchParams(n))||l}catch(t){return console.warn("Failed to decode previous state: ",t),l}}return l}var y=t(90847),v=t(20053),w=t(74848),h=c.useState,x=c.useEffect,T=c.useLayoutEffect,E=c.useMemo;function j(){return(0,w.jsx)(y.A,{title:"Compiler Explorer",children:(0,w.jsx)(k,{minHeight:600,children:(0,w.jsx)(A,{})})})}function k(e){var n=e.children,t=e.minHeight,r=h(null),a=r[0],i=r[1],l=h(null),o=l[0],u=l[1];return T(function(){if(null!=a){var e=a.getBoundingClientRect().y,n=Math.max(window.innerHeight-e,t);u(n)}},[a,t]),(0,w.jsx)("div",{style:{height:o},ref:i,children:null!=o&&n})}function A(){var e,n,r,a,l=p(),o=l.state,u=l.setOutputType,s=l.setInputWindow,c=l.setDocumentText,d=l.setSchemaText,_=l.setFeatureFlag,g=l.setLanguage,m=function(e){var n=e.schemaText,r=e.documentText,a=e.language,l=e.outputType,o=function(e){return f(function(){var n=Object.fromEntries(i.map(function(n){var t=n.key,r=n.kind,a=e.featureFlags[t];switch(r){case"enum":return[t,{kind:a?"enabled":"disabled"}];case"bool":return[t,a];default:throw new Error("Unexpected feature flag kind: "+r)}}));return JSON.stringify(n,null,2)},[e.featureFlags])}(e),u=function(){var e=h(null),n=e[0],r=e[1];return x(function(){var e=!1,n=t(59593);return(0,n.default)().then(function(){e||r(n)}),function(){e=!0}},[]),n}();return E(function(){if(null==u)return{Ok:"Loading..."};try{switch(l){case"ast":return JSON.parse(u.parse_to_ast(r));case"ir":return JSON.parse(u.parse_to_ir(n,r));case"reader":return JSON.parse(u.parse_to_reader_ast(o,n,r));case"normalization":return JSON.parse(u.parse_to_normalization_ast(o,n,r));case"operation":return JSON.parse(u.transform(o,n,r));case"types":var e=JSON.stringify({language:a});return JSON.parse(u.parse_to_types(o,e,n,r));default:throw new Error("Unknown output type "+l)}}catch(t){return{Ok:"Error: The compiler crashed: "+t.message}}},[n,r,l,u,o,a])}(o),b=null!=(e=m.Ok)?e:"",y=null==(n=m.Err)?void 0:n.SchemaDiagnostics,v=null==(r=m.Err)?void 0:r.DocumentDiagnostics,T=null==(a=m.Err)?void 0:a.ConfigError,j=E(function(){return t(3418).A},[]);return(0,w.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",padding:20},children:[(0,w.jsxs)("div",{style:{display:"flex",columnGap:20},children:[(0,w.jsx)("div",{style:{width:"50%",alignSelf:"flex-end"},children:(0,w.jsx)(U,{values:[{value:"schema",label:"Schema"},{value:"document",label:"Document"},{value:"config",label:"Config"}],selectedValue:o.inputWindow,setSelectedValue:function(e){return s(e)}})}),(0,w.jsx)("div",{style:{width:"50%"},children:(0,w.jsx)(U,{values:[{value:"operation",label:"Operation"},{value:"ast",label:"AST"},{value:"ir",label:"IR"},{value:"normalization",label:"Normalization AST"},{value:"reader",label:"Reader AST"},{value:"types",label:"Types"}],selectedValue:o.outputType,setSelectedValue:function(e){return u(e)}})})]}),(0,w.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:20},children:[(0,w.jsx)("div",{style:{width:"50%",display:"flex",flexDirection:"column"},children:function(){switch(o.inputWindow){case"schema":return(0,w.jsx)(j,{text:o.schemaText,onDidChange:d,style:{flexGrow:1},diagnostics:y},"schema");case"document":return(0,w.jsx)(j,{text:o.documentText,onDidChange:c,style:{flexGrow:3},diagnostics:v},"document");case"config":return(0,w.jsxs)("div",{style:{display:"flex",padding:20,flexGrow:1,flexDirection:"column",columnGap:20},children:[(0,w.jsx)(S,{setFeatureFlag:_,featureFlags:o.featureFlags}),(0,w.jsx)(O,{setLanguage:g,language:o.language})]})}}()}),(0,w.jsx)("div",{style:{width:"50%",display:"flex"},children:(0,w.jsx)("div",{style:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,w.jsx)(j,{text:null!=T?T:b,style:{flexGrow:1}})})})]})]})}function S(e){var n=e.featureFlags,t=e.setFeatureFlag;return(0,w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:i.map(function(e){var r=e.key,a=e.label;return(0,w.jsxs)("label",{style:{display:"block"},children:[(0,w.jsx)("input",{type:"checkbox",checked:n[r],onChange:function(e){return t(r,e.target.checked)}}),a]},r)})})}function O(e){var n=e.setLanguage,t=e.language;return(0,w.jsx)("div",{children:(0,w.jsxs)("label",{children:["Type Generation Language:",(0,w.jsxs)("select",{onChange:function(e){return n(e.target.value)},value:t,children:[(0,w.jsx)("option",{value:"flow",children:"Flow"}),(0,w.jsx)("option",{value:"typescript",children:"TypeScript"})]})]})})}function U(e){var n=e.values,t=e.selectedValue,r=e.setSelectedValue;return(0,w.jsx)("div",{className:"tabs-container",children:(0,w.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:"tabs",children:n.map(function(e){var n=e.value,a=e.label,i=t===n;return(0,w.jsx)("li",{role:"tab",tabIndex:i?0:-1,"aria-selected":i,className:(0,v.A)("tabs__item",{"tabs__item--active":i}),onClick:function(){return r(n)},children:a},n)})})})}},3418:(e,n,t)=>{t.d(n,{A:()=>f});var r=t(79232),a=(t(6961),t(94980),t(70713),t(442),t(12981)),i=t(96540),l=t(74848),o=i.useMemo,u=i.useState,s=i.useLayoutEffect,c=i.useEffect,d={glyphMargin:!1,folding:!1,lineDecorationsWidth:10,lineNumbersMinChars:0,language:"graphql",minimap:{enabled:!1},lineNumbers:"off",automaticLayout:!0,fontSize:"16px",scrollBeyondLastLine:!1,renderIndentGuides:!1,renderLineHighlight:"none",tabSize:2};function f(e){var n,t,i,f=e.text,g=e.onDidChange,p=e.diagnostics,m=e.style,b=u(null),y=b[0],v=b[1],w=(n=u(function(){return _()}),t=n[0],i=n[1],c(function(){var e=new MutationObserver(function(e,n){for(var t,a=(0,r.A)(e);!(t=a()).done;){var l=t.value;"attributes"===l.type&&"data-theme"===l.attributeName&&i(_())}}),n={attributes:!0};return e.observe(document.documentElement,n),function(){e.disconnect()}},[]),t)?"vs-dark":"vs",h=o(function(){return null==y?null:a.EN.create(y,d)},[y]);return s(function(){null!=h&&h.getValue()!==f&&h.setValue(f)},[h,f]),s(function(){if(null!=h){var e=h.getModel();if(null!=e){var n=(null!=p?p:[]).map(function(e){return{severity:8,message:e.message,startLineNumber:e.line_start+1,startColumn:e.column_start+1,endLineNumber:e.line_end+1,endColumn:e.column_end+1}});a.EN.setModelMarkers(e,"relay",n)}}},[h,p]),s(function(){a.EN.setTheme(w)},[w]),c(function(){if(null!=h&&null!=g){var e=h.onDidChangeModelContent(function(){g(h.getValue())});return function(){e.dispose()}}},[h,g]),(0,l.jsx)("div",{ref:v,style:m})}function _(){return"dark"===document.documentElement.dataset.theme}},59593:(e,n,t)=>{t.r(n),t.d(n,{default:()=>D,initSync:()=>S,parse_to_ast:()=>m,parse_to_ir:()=>b,parse_to_normalization_ast:()=>v,parse_to_reader_ast:()=>y,parse_to_types:()=>w,start:()=>x,transform:()=>h});var r,a=t(67055),i=t(71328),l="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:function(){throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&l.decode();var o=null;function u(){return null!==o&&0!==o.byteLength||(o=new Uint8Array(r.memory.buffer)),o}function s(e,n){return e>>>=0,l.decode(u().subarray(e,e+n))}var c=0,d="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:function(){throw Error("TextEncoder not available")}},f="function"==typeof d.encodeInto?function(e,n){return d.encodeInto(e,n)}:function(e,n){var t=d.encode(e);return n.set(t),{read:e.length,written:t.length}};function _(e,n,t){if(void 0===t){var r=d.encode(e),a=n(r.length,1)>>>0;return u().subarray(a,a+r.length).set(r),c=r.length,a}for(var i=e.length,l=n(i,1)>>>0,o=u(),s=0;s<i;s++){var _=e.charCodeAt(s);if(_>127)break;o[l+s]=_}if(s!==i){0!==s&&(e=e.slice(s)),l=t(l,i,i=s+3*e.length,1)>>>0;var g=u().subarray(l+s,l+i);l=t(l,i,s+=f(e,g).written,1)>>>0}return c=s,l}var g=null;function p(){return(null===g||!0===g.buffer.detached||void 0===g.buffer.detached&&g.buffer!==r.memory.buffer)&&(g=new DataView(r.memory.buffer)),g}function m(e){var n,t;try{var a=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),i=c,l=r.parse_to_ast(a,i);return n=l[0],t=l[1],s(l[0],l[1])}finally{r.__wbindgen_free(n,t,1)}}function b(e,n){var t,a;try{var i=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),l=c,o=_(n,r.__wbindgen_malloc,r.__wbindgen_realloc),u=c,d=r.parse_to_ir(i,l,o,u);return t=d[0],a=d[1],s(d[0],d[1])}finally{r.__wbindgen_free(t,a,1)}}function y(e,n,t){var a,i;try{var l=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),o=c,u=_(n,r.__wbindgen_malloc,r.__wbindgen_realloc),d=c,f=_(t,r.__wbindgen_malloc,r.__wbindgen_realloc),g=c,p=r.parse_to_reader_ast(l,o,u,d,f,g);return a=p[0],i=p[1],s(p[0],p[1])}finally{r.__wbindgen_free(a,i,1)}}function v(e,n,t){var a,i;try{var l=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),o=c,u=_(n,r.__wbindgen_malloc,r.__wbindgen_realloc),d=c,f=_(t,r.__wbindgen_malloc,r.__wbindgen_realloc),g=c,p=r.parse_to_normalization_ast(l,o,u,d,f,g);return a=p[0],i=p[1],s(p[0],p[1])}finally{r.__wbindgen_free(a,i,1)}}function w(e,n,t,a){var i,l;try{var o=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=c,d=_(n,r.__wbindgen_malloc,r.__wbindgen_realloc),f=c,g=_(t,r.__wbindgen_malloc,r.__wbindgen_realloc),p=c,m=_(a,r.__wbindgen_malloc,r.__wbindgen_realloc),b=c,y=r.parse_to_types(o,u,d,f,g,p,m,b);return i=y[0],l=y[1],s(y[0],y[1])}finally{r.__wbindgen_free(i,l,1)}}function h(e,n,t){var a,i;try{var l=_(e,r.__wbindgen_malloc,r.__wbindgen_realloc),o=c,u=_(n,r.__wbindgen_malloc,r.__wbindgen_realloc),d=c,f=_(t,r.__wbindgen_malloc,r.__wbindgen_realloc),g=c,p=r.transform(l,o,u,d,f,g);return a=p[0],i=p[1],s(p[0],p[1])}finally{r.__wbindgen_free(a,i,1)}}function x(){r.start()}function T(e,n){return E.apply(this,arguments)}function E(){return(E=(0,i.A)((0,a.A)().m(function e(n,t){var r,i,l;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!("function"==typeof Response&&n instanceof Response)){e.n=8;break}if("function"!=typeof WebAssembly.instantiateStreaming){e.n=5;break}return e.p=1,e.n=2,WebAssembly.instantiateStreaming(n,t);case 2:case 7:return e.a(2,e.v);case 3:if(e.p=3,l=e.v,"application/wasm"==n.headers.get("Content-Type")){e.n=4;break}console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",l),e.n=5;break;case 4:throw l;case 5:return e.n=6,n.arrayBuffer();case 6:return r=e.v,e.n=7,WebAssembly.instantiate(r,t);case 8:return e.n=9,WebAssembly.instantiate(n,t);case 9:if(!((i=e.v)instanceof WebAssembly.Instance)){e.n=10;break}return e.a(2,{instance:i,module:n});case 10:return e.a(2,i);case 11:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function j(){var e={wbg:{}};return e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,n){var t,a;try{t=e,a=n,console.error(s(e,n))}finally{r.__wbindgen_free(t,a,1)}},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,n){var t=_(n.stack,r.__wbindgen_malloc,r.__wbindgen_realloc),a=c;p().setInt32(e+4,a,!0),p().setInt32(e+0,t,!0)},e.wbg.__wbindgen_init_externref_table=function(){var e=r.__wbindgen_export_3,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},e}function k(e,n){}function A(e,n){return r=e.exports,O.__wbindgen_wasm_module=n,g=null,o=null,r.__wbindgen_start(),r}function S(e){if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?e=e.module:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));var n=j();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),A(new WebAssembly.Instance(e,n),e)}function O(e){return U.apply(this,arguments)}function U(){return(U=(0,i.A)((0,a.A)().m(function e(n){var i,l,o,u,s;return(0,a.A)().w(function(e){for(;;)switch(e.n){case 0:if(void 0===r){e.n=1;break}return e.a(2,r);case 1:return void 0!==n&&(Object.getPrototypeOf(n)===Object.prototype?n=n.module_or_path:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===n&&(n=new URL(t(76609),t.b)),i=j(),("string"==typeof n||"function"==typeof Request&&n instanceof Request||"function"==typeof URL&&n instanceof URL)&&(n=fetch(n)),k(),s=T,e.n=2,n;case 2:return e.n=3,s(e.v,i);case 3:return l=e.v,o=l.instance,u=l.module,e.a(2,A(o,u))}},e)}))).apply(this,arguments)}const D=O},76609:(e,n,t)=>{e.exports=t.p+"a6f1ed1350292778.wasm"}}]);