<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Relay Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Relay Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-50","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-50"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-50",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Relay" href="/opensearch.xml">
<script src="https://widget.surveymonkey.com/collect/website/js/tRaiETqnLgj758hTBazgdx2NnQ5W6bg3p3XoJtoYjHDMWZrhV7glVKgJgKV87xxk.js" defer="defer"></script><title data-react-helmet="true">Refetch Container | Relay</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://relay.dev/docs/v9.0.0/refetch-container/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v9.0.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v9.0.0"><meta data-react-helmet="true" property="og:title" content="Refetch Container | Relay"><meta data-react-helmet="true" name="description" content="A Refetch Container is also a higher-order component that works like a regular Fragment Container, but provides the additional ability to fetch a new GraphQL query with different variables and re-render the component with the new result."><meta data-react-helmet="true" property="og:description" content="A Refetch Container is also a higher-order component that works like a regular Fragment Container, but provides the additional ability to fetch a new GraphQL query with different variables and re-render the component with the new result."><meta data-react-helmet="true" property="og:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" name="twitter:image" content="https://relay.dev/img/relay.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://relay.dev/docs/v9.0.0/refetch-container/"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v9.0.0/refetch-container/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v9.0.0/refetch-container/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.00c6a02c.css">
<link rel="preload" href="/assets/js/runtime~main.c9220814.js" as="script">
<link rel="preload" href="/assets/js/main.859941f7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">Relay</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/help/">Help</a><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/v9.0.0/">v9.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Next ðŸš§</a></li><li><a class="dropdown__link" href="/docs/">v13.0.0</a></li><li><a class="dropdown__link" href="/docs/v12.0.0/">v12.0.0</a></li><li><a class="dropdown__link" href="/docs/v11.0.0/">v11.0.0</a></li><li><a class="dropdown__link" href="/docs/v10.1.3/refetch-container/">v10.1.3</a></li><li><a class="dropdown__link" href="/docs/v10.1.2/refetch-container/">v10.1.2</a></li><li><a class="dropdown__link" href="/docs/v10.1.1/refetch-container/">v10.1.1</a></li><li><a class="dropdown__link" href="/docs/v10.1.0/refetch-container/">v10.1.0</a></li><li><a class="dropdown__link" href="/docs/v10.0.1/refetch-container/">v10.0.1</a></li><li><a class="dropdown__link" href="/docs/v10.0.0/refetch-container/">v10.0.0</a></li><li><a class="dropdown__link" href="/docs/v9.1.0/refetch-container/">v9.1.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v9.0.0/refetch-container/">v9.0.0</a></li><li><a class="dropdown__link" href="/docs/v8.0.0/refetch-container/">v8.0.0</a></li><li><a class="dropdown__link" href="/docs/v7.1.0/refetch-container/">v7.1.0</a></li><li><a class="dropdown__link" href="/docs/v7.0.0/refetch-container/">v7.0.0</a></li><li><a class="dropdown__link" href="/docs/v6.0.0/refetch-container/">v6.0.0</a></li><li><a class="dropdown__link" href="/docs/v5.0.0/refetch-container/">v5.0.0</a></li><li><a class="dropdown__link" href="/docs/v4.0.0/refetch-container/">v4.0.0</a></li><li><a class="dropdown__link" href="/docs/v3.0.0/refetch-container/">v3.0.0</a></li><li><a class="dropdown__link" href="/docs/v2.0.0/refetch-container/">v2.0.0</a></li><li><a class="dropdown__link" href="/docs/v1.7.0/refetch-container/">v1.7.0</a></li><li><a class="dropdown__link" href="/docs/v1.6.2/refetch-container/">v1.6.2</a></li><li><a class="dropdown__link" href="/docs/v1.6.1/refetch-container/">v1.6.1</a></li><li><a class="dropdown__link" href="/docs/v1.6.0/refetch-container/">v1.6.0</a></li><li><a class="dropdown__link" href="/docs/v1.5.0/refetch-container/">v1.5.0</a></li><li><a class="dropdown__link" href="/docs/v1.4.1/refetch-container/">v1.4.1</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><b class="navbar__title">Relay</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/help/">Help</a></li><li class="menu__list-item"><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/">Next ðŸš§</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">v13.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v12.0.0/">v12.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v11.0.0/">v11.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.3/refetch-container/">v10.1.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.2/refetch-container/">v10.1.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.1/refetch-container/">v10.1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.1.0/refetch-container/">v10.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.0.1/refetch-container/">v10.0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v10.0.0/refetch-container/">v10.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v9.1.0/refetch-container/">v9.1.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/v9.0.0/refetch-container/">v9.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v8.0.0/refetch-container/">v8.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v7.1.0/refetch-container/">v7.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v7.0.0/refetch-container/">v7.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v6.0.0/refetch-container/">v6.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v5.0.0/refetch-container/">v5.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v4.0.0/refetch-container/">v4.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v3.0.0/refetch-container/">v3.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v2.0.0/refetch-container/">v2.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.7.0/refetch-container/">v1.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.2/refetch-container/">v1.6.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.1/refetch-container/">v1.6.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.6.0/refetch-container/">v1.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.5.0/refetch-container/">v1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.4.1/refetch-container/">v1.4.1</a></li><li class="menu__list-item"><a class="menu__link" href="/versions/">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/">Introduction to Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/prerequisites/">Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/installation-and-setup/">Installation and Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/quick-start-guide/">Quick Start Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/graphql-in-relay/">GraphQL in Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/relay-environment/">Relay Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/network-layer/">Network Layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/query-renderer/">QueryRenderer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/fragment-container/">Fragment Container</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/v9.0.0/refetch-container/">Refetch Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/pagination-container/">Pagination Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/mutations/">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/subscriptions/">Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/relay-store/">Relay Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/fetch-query/">fetchQuery</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/routing/">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/relay-debugging/">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/graphql-server-specification/">GraphQL Server Specification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/persisted-queries/">Persisted Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/type-emission/">Type Emission</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/testing-relay-components/">Testing Relay Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/local-state-management/">Local State Management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Principles &amp; Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/thinking-in-graphql/">Thinking in GraphQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/thinking-in-relay/">Thinking In Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/architecture-overview/">Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/compiler-architecture/">Compiler Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/runtime-architecture/">Runtime Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/videos/">Videos</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v9.0.0/community-learning-resources/">Community Learning Resources</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Relay <b>v9.0.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/">latest version</a></b> (v13.0.0).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: v9.0.0</span><div class="markdown"><header><h1 class="h1Heading_27L5">Refetch Container</h1></header><p>A Refetch Container is also a <a href="https://reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener noreferrer">higher-order component</a> that works like a regular <a href="/docs/v9.0.0/fragment-container/">Fragment Container</a>, but provides the additional ability to fetch a new GraphQL query with different variables and re-render the component with the new result.</p><p>Table of Contents:</p><ul><li><a href="#createrefetchcontainer"><code>createRefetchContainer</code></a></li><li><a href="#refetch"><code>refetch</code></a></li><li><a href="#examples">Examples</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="createrefetchcontainer"></a><code>createRefetchContainer</code><a class="hash-link" href="#createrefetchcontainer" title="Direct link to heading">#</a></h2><p><code>createRefetchContainer</code> has the following signature:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createRefetchContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReactComponentClass</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fragmentSpec</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLTaggedNode</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  refetchQuery</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLTaggedNode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReactComponentClass</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="arguments"></a>Arguments<a class="hash-link" href="#arguments" title="Direct link to heading">#</a></h3><ul><li><code>component</code>: The React Component <em>class</em> of the component requiring the fragment data.</li><li><code>fragmentSpec</code>: Specifies the data requirements for the Component via a GraphQL fragment. The required data will be available on the component as props that match the shape of the provided fragment. <code>fragmentSpec</code> should be an object whose keys are prop names and values are <code>graphql</code> tagged fragments. Each key specified in this object will correspond to a prop available to the resulting Component.<ul><li><strong>Note:</strong> <code>relay-compiler</code> enforces fragments to be named as <code>&lt;FileName&gt;_&lt;propName&gt;</code>.</li></ul></li><li><code>refetchQuery</code>: A <code>graphql</code> tagged query to be fetched upon calling <a href="#refetch"><code>props.relay.refetch</code></a>. As with any query, upon fetching this query, its result will be normalized into the store, any relevant subscriptions associated with the changed records will be fired, and subscribed components will re-render.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="available-props"></a>Available Props<a class="hash-link" href="#available-props" title="Direct link to heading">#</a></h3><p>The Component resulting from <code>createRefetchContainer</code> will receive the following <code>props</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  relay</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Environment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">refetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// See #refetch section</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Additional props as specified by the fragmentSpec</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>relay</code>:<ul><li><code>environment</code>: The current <a href="/docs/v9.0.0/relay-environment/">Relay Environment</a></li><li><code>refetch</code>: See <code>refetch</code> <a href="#refetch">docs</a></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="refetch"></a><code>refetch</code><a class="hash-link" href="#refetch" title="Direct link to heading">#</a></h2><p><code>refetch</code> is a function available on the <code>relay</code> <a href="#available-props">prop</a> which can be used to execute the <code>refetchQuery</code> and potentially re-render the component with the newly fetched data. Specifically, upon fetching the <code>refetchQuery</code>, its result will be normalized into the store, and any relevant subscriptions associated with the changed records will be fired, causing relevant components to re-render.</p><p><strong>Note:</strong> <code>refetch</code> is meant to be used for changing variables in the component&#x27;s fragment. Specifically, in order for <em>this</em> component to re-render, it must be subscribed to changes in the records affected by this query. If the fragment for the component doesn&#x27;t use variables, the component won&#x27;t be subscribed to changes to new records that might be fetched by this query. A common example of this is using <code>refetch</code> to fetch a new node and re-render the component with the data for the new node; in this case the fragment needs to use a variable for the node&#x27;s id, otherwise the component won&#x27;t pick up the changes for the new node.</p><p><code>refetch</code> has the following signature:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">RefetchOptions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  force</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Disposable</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">refetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  refetchVariables</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fragmentVariables</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Object</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  renderVariables</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  callback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter operator" style="color:#393A34">?</span><span class="token parameter">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">RefetchOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Disposable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="arguments-1"></a>Arguments<a class="hash-link" href="#arguments-1" title="Direct link to heading">#</a></h3><ul><li><code>refetchVariables</code>:<ul><li>A bag of variables to pass to the <code>refetchQuery</code> when fetching it from the server.</li><li>Or, a function that receives the previous set of variables used to query the data, and returns a new set of variables to pass to the <code>refetchQuery</code> when fetching it from the server.</li></ul></li><li><code>renderVariables</code>: Optional bag of variables that indicate which variables to use for reading out the data from the store when re-rendering the component. Specifically, this indicates which variables to use when querying the data from the
local data store <em>after</em> the new query has been fetched. If not specified, the <code>refetchVariables</code> will be used. This is useful when the data you need to render in your component doesn&#x27;t necessarily match the data you queried the server for. For example, to implement pagination, you would fetch a page with variables like <code>{first: 5, after: &#x27;&lt;cursor&gt;&#x27;}</code>, but you might want to render the full collection with <code>{first: 10}</code>.</li><li><code>callback</code>: Function to be called after the refetch has completed. If an error occurred during refetch, this function will receive that error as an argument.</li><li><code>options</code>: Optional object containing set of options.<ul><li><code>force</code>: If the <a href="/docs/v9.0.0/network-layer/">Network Layer</a> has been configured with a cache, this option forces a refetch even if the data for this query and variables is already available in the cache.</li><li><code>fetchPolicy</code>: If the data is already present in the store, using the <code>&#x27;store-or-network&#x27;</code> option will use that data without making an additional network request. Using the <code>&#x27;network-only&#x27;</code> option, which is the default behavior, will ignore any data present in the store and make a network request.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-value"></a>Return Value<a class="hash-link" href="#return-value" title="Direct link to heading">#</a></h3><p>Returns a <code>Disposable</code> on which you could call <code>dispose()</code> to cancel the refetch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="refetching-latest-data"></a>Refetching latest data<a class="hash-link" href="#refetching-latest-data" title="Direct link to heading">#</a></h3><p>In this simple example, let&#x27;s assume we want to fetch the latest data for a <code>TodoItem</code> from the server:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// TodoItem.js</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">createRefetchContainer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> graphql</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react-relay&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TodoItem</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">item</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Checkbox</span><span class="token plain"> checked</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isComplete</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">text</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onPress</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_refetch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Refresh&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">_refetch</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">relay</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">refetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">itemID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Our refetchQuery needs to know the `itemID`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// We can use the refetchVariables as renderVariables</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Refetch done&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">force</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Assuming we&#x27;ve configured a network layer cache, we want to ensure we fetch the latest data.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createRefetchContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">TodoItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      fragment TodoItem_item on Todo {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        text</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        isComplete</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Refetch query to be fetched upon calling </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain">refetch</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">.</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Notice that we re-use our fragment and the shape of this query matches our fragment spec.</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query TodoItemRefetchQuery($itemID: ID!) {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      item: node(id: $itemID) {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ...TodoItem_item</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="loading-more-data"></a>Loading more data<a class="hash-link" href="#loading-more-data" title="Direct link to heading">#</a></h3><p>In this example we are using a Refetch Container to fetch more stories in a story feed component.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">createRefetchContainer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> graphql</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react-relay&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FeedStories</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">feed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">stories</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">edges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token parameter">edge</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Story</span><span class="token plain"> story</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">edge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">node</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">edge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          onPress</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_loadMore</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          title</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Load More&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">_loadMore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Increments the number of stories being rendered by 10.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">refetchVariables</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">fragmentVariables</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fragmentVariables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">relay</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">refetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">refetchVariables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createRefetchContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">FeedStories</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    feed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      fragment FeedStories_feed on Feed</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      @argumentDefinitions(</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        count: {type: &quot;Int&quot;, defaultValue: 10}</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      ) {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        stories(first: $count) {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          edges {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            node {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">              id</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">              ...Story_story</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Refetch query to be fetched upon calling </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain">refetch</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">.</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Notice that we re-use our fragment and the shape of this query matches our fragment spec.</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query FeedStoriesRefetchQuery($count: Int) {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      feed {</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ...FeedStories_feed @arguments(count: $count)</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v9.0.0/Modern-RefetchContainer.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2022-01-24T20:08:20.000Z">1/24/2022</time></b> by <b>Digant Kasundra</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/v9.0.0/fragment-container/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Fragment Container</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/v9.0.0/pagination-container/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pagination Container Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#createrefetchcontainer" class="table-of-contents__link"><code>createRefetchContainer</code></a><ul><li><a href="#arguments" class="table-of-contents__link">Arguments</a></li><li><a href="#available-props" class="table-of-contents__link">Available Props</a></li></ul></li><li><a href="#refetch" class="table-of-contents__link"><code>refetch</code></a><ul><li><a href="#arguments-1" class="table-of-contents__link">Arguments</a></li><li><a href="#return-value" class="table-of-contents__link">Return Value</a></li></ul></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#refetching-latest-data" class="table-of-contents__link">Refetching latest data</a></li><li><a href="#loading-more-data" class="table-of-contents__link">Loading more data</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/users/">User Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div></div></div></footer></div>
<script src="/assets/js/runtime~main.c9220814.js"></script>
<script src="/assets/js/main.859941f7.js"></script>
</body>
</html>