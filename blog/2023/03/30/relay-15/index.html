<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Relay v15.0 | Relay</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://relay.dev/img/relay.png /><meta data-rh=true name=twitter:image content=https://relay.dev/img/relay.png /><meta data-rh=true property=og:url content=https://relay.dev/blog/2023/03/30/relay-15/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docusaurus_tag content=default /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docsearch:docusaurus_tag content=default /><meta data-rh=true property=og:title content="Relay v15.0 | Relay"/><meta data-rh=true name=description content="The Relay team is happy to announce the release of Relay v15. While this release is a major version bump and includes a couple of breaking changes, we expect that most users will be unaffected and will experience a seamless upgrade. You can find the full list of changes in the v15 Release Notes."/><meta data-rh=true property=og:description content="The Relay team is happy to announce the release of Relay v15. While this release is a major version bump and includes a couple of breaking changes, we expect that most users will be unaffected and will experience a seamless upgrade. You can find the full list of changes in the v15 Release Notes."/><meta data-rh=true property=og:type content=article /><meta data-rh=true property=article:published_time content=2023-03-30T00:00:00.000Z /><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://relay.dev/blog/2023/03/30/relay-15/ /><link data-rh=true rel=alternate href=https://relay.dev/blog/2023/03/30/relay-15/ hreflang=en /><link data-rh=true rel=alternate href=https://relay.dev/blog/2023/03/30/relay-15/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://UBPJPW35NS-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://relay.dev/blog/2023/03/30/relay-15","@type":"BlogPosting","author":{"@type":"Person","name":"The Relay Team"},"datePublished":"2023-03-30T00:00:00.000Z","description":"The Relay team is happy to announce the release of Relay v15. While this release is a major version bump and includes a couple of breaking changes, we expect that most users will be unaffected and will experience a seamless upgrade. You can find the full list of changes in the v15 Release Notes.","headline":"Relay v15.0","isPartOf":{"@id":"https://relay.dev/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://relay.dev/blog/2023/03/30/relay-15","name":"Relay v15.0","url":"https://relay.dev/blog/2023/03/30/relay-15"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Relay RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Relay Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-DCSC7FDGL5","auto"),ga("send","pageview")</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-DCSC7FDGL5"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DCSC7FDGL5",{})</script><link rel=search type=application/opensearchdescription+xml title=Relay href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.deec89cd.css /><script src=/assets/js/runtime~main.a8bcdfc7.js defer></script><script src=/assets/js/main.a2788f68.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id=internaldocs-banner></div><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbar--primary"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">Relay</b></a><a class="navbar__item navbar__link" href=/docs/>Docs</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog/>Blog</a><a class="navbar__item navbar__link" href=/help/>Help</a><a href=https://github.com/facebook/relay target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/docs/>v20.1.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/next/>Next ðŸš§</a><li><a class=dropdown__link href=/docs/>v20.1.0</a><li><a class=dropdown__link href=/docs/v20.0.0/>v20.0.0</a><li><a class=dropdown__link href=/docs/v19.0.0/>v19.0.0</a><li><a class=dropdown__link href=/docs/v18.0.0/>v18.0.0</a><li><a class=dropdown__link href=/docs/v17.0.0/>v17.0.0</a><li><a class=dropdown__link href=/docs/v16.0.0/>v16.0.0</a><li><a class=dropdown__link href=/docs/v15.0.0/>v15.0.0</a><li><a class=dropdown__link href=/docs/v14.0.0/>v14.0.0</a><li><a class=dropdown__link href=/docs/v13.0.0/>v13.0.0</a><li><a class=dropdown__link href=/versions/>All versions</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2025/06/13/relay-20/>Relay v20.0</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2025/04/02/relay-19/>Relay v19.0</a></ul></div><div role=group><h3 class=yearGroupHeading_rMGB>2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2023/10/24/how-relay-enables-optimal-data-fetching/>How Relay Enables Optimal Data Fetching</a><li class=sidebarItem__DBe><a aria-current=page class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href=/blog/2023/03/30/relay-15/>Relay v15.0</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/2023/01/03/resilient-relay-apps/>Resilient Relay Applications</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_f1Hy>Relay v15.0</h1><div class="container_mt6G margin-vert--md"><time datetime=2023-03-30T00:00:00.000Z>March 30, 2023</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><span class=authorName_yefp translate=no>The Relay Team</span></div><div class=authorSocials_rSDt></div></div></div></div></div></header><div id=__blog-post-container class=markdown><p>The Relay team is happy to announce the release of Relay v15. While this release is a major version bump and includes a couple of breaking changes, we expect that most users will be unaffected and will experience a seamless upgrade. You can find the full list of changes in the <a href=https://github.com/facebook/relay/releases/tag/v15.0.0 target=_blank rel="noopener noreferrer" class="">v15 Release Notes</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=whats-new-in-relay-15>What's new in Relay 15?<a href=#whats-new-in-relay-15 class=hash-link aria-label="Direct link to What's new in Relay 15?" title="Direct link to What's new in Relay 15?" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=support-for-refetchable-on-interfaces>Support for <code>@refetchable</code> on interfaces<a href=#support-for-refetchable-on-interfaces class=hash-link aria-label="Direct link to support-for-refetchable-on-interfaces" title="Direct link to support-for-refetchable-on-interfaces" translate=no>â€‹</a></h3>
<p>Previously it wasn't possible to add the <code>@refetchable</code> directive on fragment definitions on server interface types.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token comment" style=color:#999988;font-style:italic>// schema.graphql</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token class-name">RefetchableInterfaceFoo</span><span class="token plain"> @</span><span class="token function" style=color:black>fetchable</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain">field_name</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>"id"</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token literal-property property" style=color:black>id</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token constant" style=color:black>ID</span><span class="token operator" style=color:#b58a5e>!</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">extend type </span><span class="token maybe-class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token function" style=color:black>fetch__RefetchableInterfaceFoo</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain">id</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token constant" style=color:black>ID</span><span class="token operator" style=color:#b58a5e>!</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token maybe-class-name">RefetchableInterfaceFoo</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// fragment</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">fragment </span><span class="token maybe-class-name">RefetchableFragmentFoo</span><span class="token plain"> on </span><span class="token maybe-class-name">RefetchableInterfaceFoo</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  @</span><span class="token function" style=color:black>refetchable</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token plain">queryName</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>"RefetchableFragmentFooQuery"</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  id</span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=persisted-query-improvements>Persisted query improvements<a href=#persisted-query-improvements class=hash-link aria-label="Direct link to Persisted query improvements" title="Direct link to Persisted query improvements" translate=no>â€‹</a></h3>
<p>If you use URL-based persisted queries, you can now specify custom headers to send with the request that persists the query. For example, this can be used to send auth headers to your query persistence URL endpoint.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token literal-property property" style=color:black>persistConfig</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>url</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'example.com/persist'</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>headers</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">    </span><span class="token literal-property property" style=color:black>Authorization</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'bearer TOKEN'</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<p>For file-based persisted queries, we added a new feature flag, <code>compact_query_text</code>, that removes all whitespace from the persisted query text. This can make the file more than 60% smaller. This new feature flag can be enabled within your Relay config file.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token literal-property property" style=color:black>persistConfig</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>file</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'path/to/file.json'</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>algorithm</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token string" style=color:#65822b>'SHA256'</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token literal-property property" style=color:black>featureFlags</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token literal-property property" style=color:black>compact_query_text</span><span class="token operator" style=color:#b58a5e>:</span><span class="token plain"> </span><span class="token boolean" style=color:black>true</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=typesafe-updates-now-support-missing-field-handlers>Typesafe updates now support missing field handlers<a href=#typesafe-updates-now-support-missing-field-handlers class=hash-link aria-label="Direct link to Typesafe updates now support missing field handlers" title="Direct link to Typesafe updates now support missing field handlers" translate=no>â€‹</a></h3>
<p>Typesafe updaters now support missing field handlers. Previously, if you selected <code>node(id: 4) { ... on User { name, __typename } }</code> in a typesafe updater, but that user was fetched in a different way (e.g. with <code>best_friend { name }</code>), you would not be able to access and mutate that user using the typesafe updater.</p>
<p>In this release, we add support for missing field handlers in typesafe updaters, meaning that if a missing field handler is set up for node (as in <a href=https://relay.dev/docs/next/guided-tour/reusing-cached-data/filling-in-missing-data/#internaldocs-banner target=_blank rel="noopener noreferrer" class="">this example</a>), you will be able to update the user's name with this missing field handler.</p>
<p>In order to support this, the signature of <a href=https://relay.dev/docs/guided-tour/reusing-cached-data/filling-in-missing-data target=_blank rel="noopener noreferrer" class="">missing field handlers</a> has been changed. The <code>record</code> argument to the handler used to receive a <code>Record</code> type (which is an untyped grab-bag of data). It now receives a <code>ReadOnlyRecordProxy</code>. Furthermore, the field argument of type <code>NormalizationLinkedField</code> is now <code>CommonLinkedField</code>, which is a type containing the properties found in both <code>ReaderLinkedField</code> and <code>NormalizationLinkedField</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=flow-type-improvements>Flow type improvements<a href=#flow-type-improvements class=hash-link aria-label="Direct link to Flow type improvements" title="Direct link to Flow type improvements" translate=no>â€‹</a></h3>
<p>Flow users will now get types inferred from <code>graphql</code> literals with more Relay APIs. No longer do Flow users need to explicitly type the return value of the <code>usePreloadedQuery</code>, <code>useQueryLoader</code>, <code>useRefetchableFragment</code>, <code>usePaginationFragment</code>, and <code>useBlockingPaginationFragment</code> API methods.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=relay-resolver-improvements>Relay Resolver improvements<a href=#relay-resolver-improvements class=hash-link aria-label="Direct link to Relay Resolver improvements" title="Direct link to Relay Resolver improvements" translate=no>â€‹</a></h3>
<p>A significant portion of our development effort since our last release has gone into improving <a href=https://relay.dev/api-reference/relay-resolvers/introduction/ target=_blank rel="noopener noreferrer" class="">Relay Resolvers</a> (a mechanism for exposing derived data in the graph). It is worth noting that Relay Resolvers are still experimental and API changes might occur in the future.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=terser-docblock-tags>Terser docblock tags<a href=#terser-docblock-tags class=hash-link aria-label="Direct link to Terser docblock tags" title="Direct link to Terser docblock tags" translate=no>â€‹</a></h4>
<p>The annotation for Relay Resolver functions has been simplified. In many scenarios you can now use the <code>ParentType.field_name: ReturnType</code> syntax to define what new field your Relay Resolver exposes.</p>
<p>Before:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * @RelayResolver</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@onType</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> User</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@fieldName</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> favorite_page</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@rootFragment</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> myRootFragment</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><br/></span></code></pre></div></div>
<p>After:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * @RelayResolver User.favorite_page: Page</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@rootFragment</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> myRootFragment</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><br/></span></code></pre></div></div>
<p>In the above example, the <code>Page</code> type is a schema type. If your Relay Resolver doesn't return a schema type, you can use fixed <code>RelayResolverValue</code> value as your return type</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * @RelayResolver User.best_friend: RelayResolverValue</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@rootFragment</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> myRootFragment</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=define-multiple-resolvers-per-file>Define multiple resolvers per file<a href=#define-multiple-resolvers-per-file class=hash-link aria-label="Direct link to Define multiple resolvers per file" title="Direct link to Define multiple resolvers per file" translate=no>â€‹</a></h4>
<p>Prior to this release we only allowed a single Relay Resolver per file and required the Relay Resolver function to be the default export. In Relay 15 you're now able to define multiple Relay Resolvers per file and use named exports.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:black;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:black;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * @RelayResolver User.favorite_page: Page</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@rootFragment</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> favoritePageFragment</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:black>usersFavoritePage</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token spread operator" style=color:#b58a5e>...</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * @RelayResolver User.best_friend: RelayResolverValue</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@rootFragment</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> bestFriendFragment</span><br/></span><span class=token-line style=color:black><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:black>usersBestFriend</span><span class="token punctuation" style=color:#b58a5e>(</span><span class="token punctuation" style=color:#b58a5e>)</span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  </span><span class="token spread operator" style=color:#b58a5e>...</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:black><span class="token plain">module</span><span class="token punctuation" style=color:#b58a5e>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#b58a5e>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#b58a5e>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  usersFavoritePage</span><span class="token punctuation" style=color:#b58a5e>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:black><span class="token plain">  usersBestFriend</span><br/></span><span class=token-line style=color:black><span class="token plain"></span><span class="token punctuation" style=color:#b58a5e>}</span><br/></span></code></pre></div></div>
<p>Happy Querying!</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/2023/10/24/how-relay-enables-optimal-data-fetching/><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>How Relay Enables Optimal Data Fetching</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/2023/01/03/resilient-relay-apps/><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Resilient Relay Applications</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#whats-new-in-relay-15 class="table-of-contents__link toc-highlight">What's new in Relay 15?</a><ul><li><a href=#support-for-refetchable-on-interfaces class="table-of-contents__link toc-highlight">Support for <code>@refetchable</code> on interfaces</a><li><a href=#persisted-query-improvements class="table-of-contents__link toc-highlight">Persisted query improvements</a><li><a href=#typesafe-updates-now-support-missing-field-handlers class="table-of-contents__link toc-highlight">Typesafe updates now support missing field handlers</a><li><a href=#flow-type-improvements class="table-of-contents__link toc-highlight">Flow type improvements</a><li><a href=#relay-resolver-improvements class="table-of-contents__link toc-highlight">Relay Resolver improvements</a></ul></ul></div></div></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item target=_self href=/docs/>Introduction</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item target=_self href=/users/>User Showcase</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legal</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://opensource.facebook.com/legal/privacy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/terms/ target=_blank rel="noopener noreferrer" class=footer__link-item>Terms<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/data-policy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Data Policy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/cookie-policy/ target=_blank rel="noopener noreferrer" class=footer__link-item>Cookie Policy<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/relay.svg class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/relay.svg class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"/></div><div class=footer__copyright>Copyright Â© 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div></body>