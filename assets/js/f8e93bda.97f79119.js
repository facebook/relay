"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[96321],{3905:(e,a,t)=>{t.r(a),t.d(a,{MDXContext:()=>s,MDXProvider:()=>u,mdx:()=>f,useMDXComponents:()=>p,withMDXComponents:()=>m});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(){return i=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i.apply(this,arguments)}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),m=function(e){return function(a){var t=p(a.components);return n.createElement(e,i({},a,{components:t}))}},p=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},u=function(e){var a=p(e.components);return n.createElement(s.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},h=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),m=p(t),u=r,h=m["".concat(l,".").concat(u)]||m[u]||c[u]||i;return t?n.createElement(h,o(o({ref:a},s),{},{components:t})):n.createElement(h,o({ref:a},s))}));function f(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=h;var o={};for(var d in a)hasOwnProperty.call(a,d)&&(o[d]=a[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=t[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},68629:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(39960),r=t(86341),i=t(67294);function l(){var e=window.encodeURI(JSON.stringify({title:"Feedback about "+window.location.pathname,description:"**!!! Required !!!**\n\nPlease modify the task description to let us know how the docs can be improved.\n\n**Please do not ask support questions via this form! Instead, ask in fburl.com/relay_support**",tag_ids:{add:[0xac96423e5b680,0x64079768ac750]}}));window.open("https://www.internalfb.com/tasks/?n="+e)}function o(e){var a=e.children;return i.createElement("div",{className:"docsRating",id:"docsRating"},i.createElement("hr",null),a)}var d=function(){var e=i.useState(!1),a=e[0],t=e[1],n=function(e){t(!0),function(e){window.ga&&window.ga("send",{hitType:"event",eventCategory:"button",eventAction:"feedback",eventValue:e})}(e)};return a?"Thank you for letting us know!":i.createElement(i.Fragment,null,"Is this page useful?",i.createElement("svg",{className:"i_thumbsup",alt:"Like",id:"docsRating-like",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 81.13 89.76",onClick:function(){return n(1)}},i.createElement("path",{d:"M22.9 6a18.57 18.57 0 002.67 8.4 25.72 25.72 0 008.65 7.66c3.86 2 8.67 7.13 13.51 11 3.86 3.11 8.57 7.11 11.54 8.45s13.59.26 14.64 1.17c1.88 1.63 1.55 9-.11 15.25-1.61 5.86-5.96 10.55-6.48 16.86-.4 4.83-2.7 4.88-10.93 4.88h-1.35c-3.82 0-8.24 2.93-12.92 3.62a68 68 0 01-9.73.5c-3.57 0-7.86-.08-13.25-.08-3.56 0-4.71-1.83-4.71-4.48h8.42a3.51 3.51 0 000-7H12.28a2.89 2.89 0 01-2.88-2.88 1.91 1.91 0 01.77-1.78h16.46a3.51 3.51 0 000-7H12.29c-3.21 0-4.84-1.83-4.84-4a6.41 6.41 0 011.17-3.78h19.06a3.5 3.5 0 100-7H9.75A3.51 3.51 0 016 42.27a3.45 3.45 0 013.75-3.48h13.11c5.61 0 7.71-3 5.71-5.52-4.43-4.74-10.84-12.62-11-18.71-.15-6.51 2.6-7.83 5.36-8.56m0-6a6.18 6.18 0 00-1.53.2c-6.69 1.77-10 6.65-9.82 14.5.08 5.09 2.99 11.18 8.52 18.09H9.74a9.52 9.52 0 00-6.23 16.9 12.52 12.52 0 00-2.07 6.84 9.64 9.64 0 003.65 7.7 7.85 7.85 0 00-1.7 5.13 8.9 8.9 0 005.3 8.13 6 6 0 00-.26 1.76c0 6.37 4.2 10.48 10.71 10.48h13.25a73.75 73.75 0 0010.6-.56 35.89 35.89 0 007.58-2.18 17.83 17.83 0 014.48-1.34h1.35c4.69 0 7.79 0 10.5-1 3.85-1.44 6-4.59 6.41-9.38.2-2.46 1.42-4.85 2.84-7.62a41.3 41.3 0 003.42-8.13 48 48 0 001.59-10.79c.1-5.13-1-8.48-3.35-10.55-2.16-1.87-4.64-1.87-9.6-1.88a46.86 46.86 0 01-6.64-.29c-1.92-.94-5.72-4-8.51-6.3l-1.58-1.28c-1.6-1.3-3.27-2.79-4.87-4.23-3.33-3-6.47-5.79-9.61-7.45a20.2 20.2 0 01-6.43-5.53 12.44 12.44 0 01-1.72-5.36 6 6 0 00-6-5.86z"})),i.createElement("svg",{className:"i_thumbsdown",alt:"Dislike",id:"docsRating-dislike",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 81.13 89.76",onClick:function(){return n(0)}},i.createElement("path",{d:"M22.9 6a18.57 18.57 0 002.67 8.4 25.72 25.72 0 008.65 7.66c3.86 2 8.67 7.13 13.51 11 3.86 3.11 8.57 7.11 11.54 8.45s13.59.26 14.64 1.17c1.88 1.63 1.55 9-.11 15.25-1.61 5.86-5.96 10.55-6.48 16.86-.4 4.83-2.7 4.88-10.93 4.88h-1.35c-3.82 0-8.24 2.93-12.92 3.62a68 68 0 01-9.73.5c-3.57 0-7.86-.08-13.25-.08-3.56 0-4.71-1.83-4.71-4.48h8.42a3.51 3.51 0 000-7H12.28a2.89 2.89 0 01-2.88-2.88 1.91 1.91 0 01.77-1.78h16.46a3.51 3.51 0 000-7H12.29c-3.21 0-4.84-1.83-4.84-4a6.41 6.41 0 011.17-3.78h19.06a3.5 3.5 0 100-7H9.75A3.51 3.51 0 016 42.27a3.45 3.45 0 013.75-3.48h13.11c5.61 0 7.71-3 5.71-5.52-4.43-4.74-10.84-12.62-11-18.71-.15-6.51 2.6-7.83 5.36-8.56m0-6a6.18 6.18 0 00-1.53.2c-6.69 1.77-10 6.65-9.82 14.5.08 5.09 2.99 11.18 8.52 18.09H9.74a9.52 9.52 0 00-6.23 16.9 12.52 12.52 0 00-2.07 6.84 9.64 9.64 0 003.65 7.7 7.85 7.85 0 00-1.7 5.13 8.9 8.9 0 005.3 8.13 6 6 0 00-.26 1.76c0 6.37 4.2 10.48 10.71 10.48h13.25a73.75 73.75 0 0010.6-.56 35.89 35.89 0 007.58-2.18 17.83 17.83 0 014.48-1.34h1.35c4.69 0 7.79 0 10.5-1 3.85-1.44 6-4.59 6.41-9.38.2-2.46 1.42-4.85 2.84-7.62a41.3 41.3 0 003.42-8.13 48 48 0 001.59-10.79c.1-5.13-1-8.48-3.35-10.55-2.16-1.87-4.64-1.87-9.6-1.88a46.86 46.86 0 01-6.64-.29c-1.92-.94-5.72-4-8.51-6.3l-1.58-1.28c-1.6-1.3-3.27-2.79-4.87-4.23-3.33-3-6.47-5.79-9.61-7.45a20.2 20.2 0 01-6.43-5.53 12.44 12.44 0 01-1.72-5.36 6 6 0 00-6-5.86z"})))},s=function(){return i.createElement("p",null,"Let us know how these docs can be improved by",i.createElement("a",{className:"button",role:"button",tabIndex:0,onClick:l},"Filing a task"))},m=function(){return i.createElement("p",null,"Help us make the site even better by"," ",i.createElement(n.default,{to:"https://www.surveymonkey.com/r/FYC9TCJ"},"answering a few quick questions"),".")},p=function(){return i.createElement(o,null,i.createElement(s,null),i.createElement(d,null),i.createElement(m,null))},u=function(){return i.createElement(o,null,i.createElement(d,null),i.createElement(m,null))};const c=function(){return(0,r.fbContent)({internal:i.createElement(p,null),external:i.createElement(u,null)})}},7154:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>u,contentTitle:()=>m,default:()=>f,frontMatter:()=>s,metadata:()=>p,toc:()=>c});var n=t(83117),r=t(80102),i=(t(67294),t(3905)),l=t(68629),o=t(86341),d=["components"],s={id:"glossary",title:"Glossary",slug:"/glossary/",description:"Relay terms glossary",keywords:["glossary"]},m=void 0,p={unversionedId:"glossary/glossary",id:"version-v20.0.0/glossary/glossary",title:"Glossary",description:"Relay terms glossary",source:"@site/versioned_docs/version-v20.0.0/glossary/glossary.md",sourceDirName:"glossary",slug:"/glossary/",permalink:"/docs/v20.0.0/glossary/",draft:!1,editUrl:"https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v20.0.0/glossary/glossary.md",tags:[],version:"v20.0.0",frontMatter:{id:"glossary",title:"Glossary",slug:"/glossary/",description:"Relay terms glossary",keywords:["glossary"]},sidebar:"docs",previous:{title:"Community Learning Resources",permalink:"/docs/v20.0.0/community-learning-resources/"}},u={},c=[{value:"3D",id:"3d",level:2},{value:"Abstract Type",id:"abstract-type",level:2},{value:"Abstract Type Refinement",id:"abstract-type-refinement",level:2},{value:"@arguments",id:"arguments",level:2},{value:"@argumentDefinitions",id:"argumentdefinitions",level:2},{value:"Artifact",id:"artifact",level:2},{value:"AST",id:"ast",level:2},{value:"Availability",id:"availability",level:2},{value:"Babel Transform",id:"babel-transform",level:2},{value:"Client Schema Extension",id:"client-schema-extension",level:2},{value:"CacheConfig",id:"cacheconfig",level:2},{value:"Check",id:"check",level:2},{value:"Commit",id:"commit",level:2},{value:"Compiler",id:"compiler",level:2},{value:"Concrete Request",id:"concrete-request",level:2},{value:"Config",id:"config",level:2},{value:"@connection",id:"connection",level:2},{value:"Connection",id:"connection-1",level:2},{value:"Container",id:"container",level:2},{value:"Data Checker",id:"data-checker",level:2},{value:"DataID",id:"dataid",level:2},{value:"Data Masking",id:"data-masking",level:2},{value:"@defer",id:"defer",level:2},{value:"Definition",id:"definition",level:2},{value:"Descriptor",id:"descriptor",level:2},{value:"DevTools",id:"devtools",level:2},{value:"Document",id:"document",level:2},{value:"Directive",id:"directive",level:2},{value:"Disposable",id:"disposable",level:2},{value:"Entrypoint",id:"entrypoint",level:2},{value:"Environment",id:"environment",level:2},{value:"Execute",id:"execute",level:2},{value:"Fetch Policy",id:"fetch-policy",level:2},{value:"Field",id:"field",level:2},{value:"Fragment",id:"fragment",level:2},{value:"Fragments as a GraphQL concept",id:"fragments-as-a-graphql-concept",level:3},{value:"Fragments within Relay",id:"fragments-within-relay",level:3},{value:"Fragment Identifier",id:"fragment-identifier",level:2},{value:"Fragment Reference",id:"fragment-reference",level:2},{value:"Fragment Resource",id:"fragment-resource",level:2},{value:"Fragment Spec Resolver",id:"fragment-spec-resolver",level:2},{value:"Fragment Spread",id:"fragment-spread",level:2},{value:"Garbage Collection",id:"garbage-collection",level:2},{value:"GraphQLTaggedNode",id:"graphqltaggednode",level:2},{value:"Handler",id:"handler",level:2},{value:"ID",id:"id",level:2},{value:"@include",id:"include",level:2},{value:"@inline",id:"inline",level:2},{value:"Interface (GraphQL)",id:"interface-graphql",level:2},{value:"Invalidation",id:"invalidation",level:2},{value:"JSResource",id:"jsresource",level:2},{value:"Lazy Loading",id:"lazy-loading",level:2},{value:"Linked Record",id:"linked-record",level:2},{value:"Literal",id:"literal",level:2},{value:"@live",id:"live",level:2},{value:"@live_query",id:"live_query",level:2},{value:"Lookup",id:"lookup",level:2},{value:"@match",id:"match",level:2},{value:"MatchContainer",id:"matchcontainer",level:2},{value:"Missing Field Handler",id:"missing-field-handler",level:2},{value:"@module",id:"module",level:2},{value:"Module",id:"module-1",level:2},{value:"Mutation",id:"mutation",level:2},{value:"Mutation Root Query",id:"mutation-root-query",level:2},{value:"Network",id:"network",level:2},{value:"Node",id:"node",level:2},{value:"Normalization",id:"normalization",level:2},{value:"Normalization AST",id:"normalization-ast",level:2},{value:"Normalization Selector",id:"normalization-selector",level:2},{value:"Notify",id:"notify",level:2},{value:"Observable",id:"observable",level:2},{value:"Operation",id:"operation",level:2},{value:"Operation Descriptor",id:"operation-descriptor",level:2},{value:"Operation Mock Resolver",id:"operation-mock-resolver",level:2},{value:"Operation Tracker",id:"operation-tracker",level:2},{value:"Optimistic Update",id:"optimistic-update",level:2},{value:"Optimistic Updater",id:"optimistic-updater",level:2},{value:"Pagination",id:"pagination",level:2},{value:"Payload",id:"payload",level:2},{value:"Plural Field",id:"plural-field",level:2},{value:"@preloadable",id:"preloadable",level:2},{value:"Preloadable Concrete Request",id:"preloadable-concrete-request",level:2},{value:"Preloadable Query Registry",id:"preloadable-query-registry",level:2},{value:"Project",id:"project",level:2},{value:"Profiler",id:"profiler",level:2},{value:"Publish",id:"publish",level:2},{value:"Publish Queue",id:"publish-queue",level:2},{value:"Query",id:"query",level:2},{value:"Query Executor",id:"query-executor",level:2},{value:"Query Reference",id:"query-reference",level:2},{value:"Query Resource",id:"query-resource",level:2},{value:"<code>@raw_response_type</code>",id:"raw_response_type",level:2},{value:"Reader",id:"reader",level:2},{value:"Reader AST",id:"reader-ast",level:2},{value:"Reader Fragment",id:"reader-fragment",level:2},{value:"Reader Selector",id:"reader-selector",level:2},{value:"Record",id:"record",level:2},{value:"Record Source",id:"record-source",level:2},{value:"Record Source Selector Proxy",id:"record-source-selector-proxy",level:2},{value:"Record Proxy",id:"record-proxy",level:2},{value:"Ref Counting",id:"ref-counting",level:2},{value:"Reference Marker",id:"reference-marker",level:2},{value:"@refetchable",id:"refetchable",level:2},{value:"@relay",id:"relay",level:2},{value:"Relay Classic",id:"relay-classic",level:2},{value:"Relay Hooks",id:"relay-hooks",level:2},{value:"Relay Modern",id:"relay-modern",level:2},{value:"Relay Resolvers",id:"relay-resolvers",level:2},{value:"Release Buffer",id:"release-buffer",level:2},{value:"<code>@required</code>",id:"required",level:2},{value:"Request",id:"request",level:2},{value:"Request Descriptor",id:"request-descriptor",level:2},{value:"Resolver",id:"resolver",level:2},{value:"When describing a field",id:"when-describing-a-field",level:3},{value:"Other meanings",id:"other-meanings",level:3},{value:"Response",id:"response",level:2},{value:"Response Normalizer",id:"response-normalizer",level:2},{value:"Restore",id:"restore",level:2},{value:"Retain",id:"retain",level:2},{value:"Render Policy",id:"render-policy",level:2},{value:"Revert",id:"revert",level:2},{value:"Root Field",id:"root-field",level:2},{value:"Root Type",id:"root-type",level:2},{value:"Root",id:"root",level:2},{value:"Scalar",id:"scalar",level:2},{value:"Scheduler",id:"scheduler",level:2},{value:"Schema",id:"schema",level:2},{value:"Schema Sync",id:"schema-sync",level:2},{value:"Schema Extension",id:"schema-extension",level:2},{value:"Selection",id:"selection",level:2},{value:"Selector",id:"selector",level:2},{value:"@skip",id:"skip",level:2},{value:"Snapshot",id:"snapshot",level:2},{value:"Stale",id:"stale",level:2},{value:"Store",id:"store",level:2},{value:"@stream",id:"stream",level:2},{value:"@stream_connection",id:"stream_connection",level:2},{value:"Subscribe",id:"subscribe",level:2},{value:"Subscription",id:"subscription",level:2},{value:"Transaction ID",id:"transaction-id",level:2},{value:"Traversal",id:"traversal",level:2},{value:"Type",id:"type",level:2},{value:"Type Refinement",id:"type-refinement",level:2},{value:"Updater",id:"updater",level:2},{value:"Value",id:"value",level:2},{value:"Variables",id:"variables",level:2}],h={toc:c};function f(e){var a=e.components,t=(0,r.Z)(e,d);return(0,i.mdx)("wrapper",(0,n.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,i.mdx)("h2",{id:"3d"},"3D"),(0,i.mdx)("p",null,"Data-Driven Dependencies. Facebook's way of including the code to render a particular component if and only if it will actually be rendered. Canonical use cases are"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Fields that are typically null"),", and which are only rendered when not null."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Unions"),'. For example, the core news feed item has many different variants, each of which is a separate React component. Which one we render depends on the data (i.e. is "data-driven"). On a given feed, it is likely that most variants will not be rendered, and need not be downloaded.'),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Component can have different rendering strategies, depending on the data."))),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"#match"},"@match")," directive, ",(0,i.mdx)("a",{parentName:"p",href:"#module"},"@module")," directive and ",(0,i.mdx)("a",{parentName:"p",href:"../guides/data-driven-dependencies/server-3d"},"the 3D guide"),".")),(0,i.mdx)(o.OssOnly,{mdxType:"OssOnly"},(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"#match"},"@match")," directive and the ",(0,i.mdx)("a",{parentName:"p",href:"#module"},"@module")," directive.")),(0,i.mdx)("h2",{id:"abstract-type"},"Abstract Type"),(0,i.mdx)("p",null,"GraphQL unions and interfaces are abstract types. See ",(0,i.mdx)("a",{parentName:"p",href:"#interface-graphql"},"interface"),"."),(0,i.mdx)("h2",{id:"abstract-type-refinement"},"Abstract Type Refinement"),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"#type-refinement"},"type refinement"),". If type refinement is a way of conditionally including fields if a type implements a particular concrete type (such as ",(0,i.mdx)("inlineCode",{parentName:"p"},"... on User { name }"),"), abstract type refinement refers to conditionally including fields if a type implements a particular abstract type (i.e. interface). So, ",(0,i.mdx)("inlineCode",{parentName:"p"},"... on Actor { field }"),"."),(0,i.mdx)("h2",{id:"arguments"},"@arguments"),(0,i.mdx)("p",null,"A ",(0,i.mdx)("a",{parentName:"p",href:"#directive"},"directive")," that modifies a ",(0,i.mdx)("a",{parentName:"p",href:"#fragment-spread"},"fragment spread")," and is used to pass arguments (defined with ",(0,i.mdx)("a",{parentName:"p",href:"#argumentdefinitions"},(0,i.mdx)("inlineCode",{parentName:"a"},"@argumentDefinitions")),") to that fragment."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},'...Story_story @arguments(storyId: "1234")\n')),(0,i.mdx)("h2",{id:"argumentdefinitions"},"@argumentDefinitions"),(0,i.mdx)("p",null,"A directive that modifies a fragment definition and defines the names of the local arguments that the fragment can take, as well as their type."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},'fragment Store_story on Story\n  @argumentDefinitions(storyId: {type: "ID!"}) {\n  # etc\n}\n')),(0,i.mdx)("p",null,"If a variable is used in a fragment but not included in an ",(0,i.mdx)("inlineCode",{parentName:"p"},"@argumentDefinitions")," directive, Relay will require that the fragment is only spread in queries which declare these variables, or in fragments which ultimately are spread in such a query."),(0,i.mdx)("p",null,"Compare with ",(0,i.mdx)("a",{parentName:"p",href:"#variables"},"variables")," and see the ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/rendering/variables"},"relevant section")," in the guided tour."),(0,i.mdx)("h2",{id:"artifact"},"Artifact"),(0,i.mdx)("p",null,"Files that are generated by the ",(0,i.mdx)("a",{parentName:"p",href:"/docs/v20.0.0/guides/compiler/"},"Relay compiler"),", typically ending in ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js"),"."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/wiki/Relay-team/generated-artifacts/"},"a guide to Relay artifacts"),".")),(0,i.mdx)("h2",{id:"ast"},"AST"),(0,i.mdx)("p",null,"Abstract Syntax Tree. In Relay, there are two types of ASTs, ",(0,i.mdx)("a",{parentName:"p",href:"#normalization-ast"},"normalization")," and ",(0,i.mdx)("a",{parentName:"p",href:"#reader-ast"},"reader")," ASTs."),(0,i.mdx)("p",null,"The default export of a ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," file is an AST."),(0,i.mdx)("p",null,"The Relay compiler parses and transforms GraphQL literals, and generates Relay ASTs (see ",(0,i.mdx)("a",{parentName:"p",href:"#artifact"},"artifact"),"). Doing this work at compile time allows the Relay runtime to be faster."),(0,i.mdx)("h2",{id:"availability"},"Availability"),(0,i.mdx)("p",null,"The concept of availability refers to whether there is enough non-stale, non-invalidated data in the store to fulfill a particular request immediately, or whether a request to server needs to be made in order to fulfill that request."),(0,i.mdx)("h2",{id:"babel-transform"},"Babel Transform"),(0,i.mdx)("p",null,"A build-time transformation of the Javascript codebase, which turns calls to"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"graphql`...`\n")),(0,i.mdx)("p",null,"into ",(0,i.mdx)("inlineCode",{parentName:"p"},"require(NAME_OF_GENERATED_ARTIFACT)")," calls. See ",(0,i.mdx)("a",{parentName:"p",href:"/docs/v20.0.0/getting-started/babel-plugin/"},"Babel Plugin"),"."),(0,i.mdx)("h2",{id:"client-schema-extension"},"Client Schema Extension"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://spec.graphql.org/June2018/#sec-Schema-Extension"},"The GraphQL spec")," allow you to define new types, new fields on types, new directives, etc. locally."),(0,i.mdx)("p",null,"Relay supports adding types and fields in client schema extension files. Developers use this feature to add fields that contain purely local state that is associated with items on the graph. For example, an ",(0,i.mdx)("inlineCode",{parentName:"p"},"is_selected")," field on a ",(0,i.mdx)("inlineCode",{parentName:"p"},"User"),"."),(0,i.mdx)("h2",{id:"cacheconfig"},"CacheConfig"),(0,i.mdx)("p",null,"A value used to control how a query's response may be cached. Ultimately passed to ",(0,i.mdx)("inlineCode",{parentName:"p"},"environment.execute"),"."),(0,i.mdx)("h2",{id:"check"},"Check"),(0,i.mdx)("p",null,"One of the core functions of the store. Given an operation, determines whether the store has all of the data necessary to render that operation. Calls ",(0,i.mdx)("inlineCode",{parentName:"p"},"DataChecker.check"),", which synchronously starts with the root node associated with the operation and walks the data in the store."),(0,i.mdx)("p",null,"In practice, exposed as a method on ",(0,i.mdx)("inlineCode",{parentName:"p"},"environment"),"."),(0,i.mdx)("p",null,"In conjunction with the fetch policy, used by ",(0,i.mdx)("inlineCode",{parentName:"p"},"loadQuery")," (and other methods) to determine whether it is necessary to make a network request call to fulfill a query."),(0,i.mdx)("h2",{id:"commit"},"Commit"),(0,i.mdx)("p",null,"After receiving a network response, the payload is committed, or written to the store."),(0,i.mdx)("p",null,"Commit is also the verb used to describe initiating a mutation and writing its data to the store."),(0,i.mdx)("h2",{id:"compiler"},"Compiler"),(0,i.mdx)("p",null,"The piece of code which scans your Javascript files for ",(0,i.mdx)("inlineCode",{parentName:"p"},"graphql")," tagged nodes and generates the appropriate files (",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," files, ",(0,i.mdx)("inlineCode",{parentName:"p"},"$Parameters.js")," files, etc.)"),(0,i.mdx)("p",null,"The generated output from the compiler is committed and checked into the repository."),(0,i.mdx)("h2",{id:"concrete-request"},"Concrete Request"),(0,i.mdx)("p",null,"An Abstract Syntax Tree representing a query, subscription or mutation."),(0,i.mdx)("p",null,"The default export of a ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," file corresponding to a query, subscription or mutation."),(0,i.mdx)("p",null,"In addition, calls to ",(0,i.mdx)("inlineCode",{parentName:"p"},"graphql"),"...`` are turned into concrete requests at build time via the Relay Babel transform."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"See the important safety notes at Preloadable Concrete Request.")),(0,i.mdx)("h2",{id:"config"},"Config"),(0,i.mdx)("p",null,"A ",(0,i.mdx)("a",{parentName:"p",href:"/docs/v20.0.0/getting-started/compiler-config/"},"file or javascript object")," which controls, among other things, which files are scanned by the Relay ",(0,i.mdx)("a",{parentName:"p",href:"#compiler"},"compiler")," for your project."),(0,i.mdx)("h2",{id:"connection"},"@connection"),(0,i.mdx)("p",null,"A directive which declares that a field implements the ",(0,i.mdx)("a",{parentName:"p",href:"#connection"},"connection")," spec."),(0,i.mdx)("h2",{id:"connection-1"},"Connection"),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"A field implementing the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/graphql/connections.htm"},"connection spec"),". See ",(0,i.mdx)("a",{href:"https://www.internalfb.com/intern/wiki/Graphql-connections-for-hack-developers/Connection-spec/"},"here")," for more details on the spec, and the section of the guided tour on ",(0,i.mdx)("a",{href:"../guided-tour/list-data/pagination/"},"rendering list data and pagination"),".")),(0,i.mdx)(o.OssOnly,{mdxType:"OssOnly"},(0,i.mdx)("p",null,"A field implementing the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/graphql/connections.htm"},"connection spec"),". See the section of the guided tour on ",(0,i.mdx)("a",{href:"../guided-tour/list-data/pagination/"},"rendering list data and pagination"),".")),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"../api-reference/use-pagination-fragment"},(0,i.mdx)("inlineCode",{parentName:"a"},"usePaginationFragment")),"."),(0,i.mdx)("h2",{id:"container"},"Container"),(0,i.mdx)("p",null,"A term for a higher order component that provided a child component with the data from queries and fragments. Associated with Relay Modern."),(0,i.mdx)("p",null,"You should use the Relay hooks API when possible."),(0,i.mdx)("h2",{id:"data-checker"},"Data Checker"),(0,i.mdx)("p",null,"A class exposing a single method, ",(0,i.mdx)("inlineCode",{parentName:"p"},"check"),", which synchronously starts with the root node associated with the operation and walks the data in the store. It determines whether the data in the store suffices to fulfill a given operation."),(0,i.mdx)("p",null,"Called by ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.check"),"."),(0,i.mdx)("h2",{id:"dataid"},"DataID"),(0,i.mdx)("p",null,"The globally-unique identifier of a record. Can be generated on the client with ",(0,i.mdx)("a",{parentName:"p",href:"#missing-field-handler"},"missing field handlers"),". Usually corresponds to an Ent's ID (if available), but guaranteed to equal the value of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"__id")," field."),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"#updater"},(0,i.mdx)("inlineCode",{parentName:"a"},"updater"))," and ",(0,i.mdx)("a",{parentName:"p",href:"#optimisticupdater"},(0,i.mdx)("inlineCode",{parentName:"a"},"optimisticUpdater"))," functions are passed instances of ",(0,i.mdx)("a",{parentName:"p",href:"#recordproxy"},(0,i.mdx)("inlineCode",{parentName:"a"},"RelaySourceSelectorProxy")),". Calling ",(0,i.mdx)("inlineCode",{parentName:"p"},".get(id)")," with the DataID on a ",(0,i.mdx)("inlineCode",{parentName:"p"},"RelaySourceSelectorProxy")," will look up that item in the store, and return a proxy of it."),(0,i.mdx)("h2",{id:"data-masking"},"Data Masking"),(0,i.mdx)("p",null,"Refers to the idea that a component should not be able to access any data it does declare in its fragment or query, even inadvertently. This prevents accidental coupling of data between components, and means that every component can be refactored in isolation. It negates the risk that removing a field in a child component will accidentally break a different component, allowing components to ",(0,i.mdx)("em",{parentName:"p"},"move fast, with stable infrastructure"),"."),(0,i.mdx)("p",null,"Also refers to the practice of hiding the data of child components from their parents, in keeping with the idea."),(0,i.mdx)("p",null,"In Relay, a query declared like ",(0,i.mdx)("inlineCode",{parentName:"p"},"query FooQuery { viewer { ...subcomponent_``viewer_name } }")," will not be able to access the data declared by ",(0,i.mdx)("inlineCode",{parentName:"p"},"subcomponent_viewer_name")," without access to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ReaderFragment")," representing the ",(0,i.mdx)("inlineCode",{parentName:"p"},"subcomponent_viewer_name")," fragment."),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../principles-and-architecture/thinking-in-relay#data-masking"},"Thinking in Relay guide"),"."),(0,i.mdx)("h2",{id:"defer"},"@defer"),(0,i.mdx)("p",null,"A directive which can be added to a fragment spread or inline fragment to avoid blocking on that fragment's data. For more detail refer to GraphQL's ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/graphql/graphql-wg/blob/main/rfcs/DeferStream.md#defer"},"documentation on the @defer directive"),"."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/staticdocs/relay/docs/guides/incremental-data-delivery/"},"Incremental Data Delivery"),".")),(0,i.mdx)("h2",{id:"definition"},"Definition"),(0,i.mdx)("p",null,"In the compiler, a definition refers to the text within a GraphQL literal where an operation or fragment was defined."),(0,i.mdx)("h2",{id:"descriptor"},"Descriptor"),(0,i.mdx)("p",null,"Can refer to an ",(0,i.mdx)("inlineCode",{parentName:"p"},"OperationDescriptor")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"RequestDescriptor"),". Descriptors are types used internally to the Relay codebase, and generally, refer to an object containing the minimum amount of information needed to uniquely identify an operation or request, such as (for a ",(0,i.mdx)("inlineCode",{parentName:"p"},"RequestIdentifier"),"), a node, identifier and variables."),(0,i.mdx)("h2",{id:"devtools"},"DevTools"),(0,i.mdx)("p",null,'An awesome Chrome extension for debugging Relay network requests, the Relay store and Relay events. Helpful for answering questions like "Why am I not seeing the data I expect to see?" "Why did this component suspend?" etc.'),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/docs/debugging/relay-devtools/"},"documentation"),"."),(0,i.mdx)("h2",{id:"document"},"Document"),(0,i.mdx)("p",null,"In the compiler, a Document refers to a GraphQL literal that contains one or more operation or fragment ",(0,i.mdx)("a",{parentName:"p",href:"#definition"},"definitions"),". Relay requires that GraphQL literals in JavaScript files contain a single definition."),(0,i.mdx)("h2",{id:"directive"},"Directive"),(0,i.mdx)("p",null,"A special instruction, starting with ",(0,i.mdx)("inlineCode",{parentName:"p"},"@")," and contained in a ",(0,i.mdx)("inlineCode",{parentName:"p"},"graphql")," literal or graphql file, which provides special instructions to the Relay compiler or to the server. Examples include ",(0,i.mdx)("inlineCode",{parentName:"p"},"@defer"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"@stream")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"@match"),"."),(0,i.mdx)("h2",{id:"disposable"},"Disposable"),(0,i.mdx)("p",null,"Any object which contains a ",(0,i.mdx)("inlineCode",{parentName:"p"},".dispose")," method which takes no parameters and provides no return value. Many objects in Relay (such query references and entrypoint references) and the return value of many methods (such as calls to ",(0,i.mdx)("inlineCode",{parentName:"p"},".subscribe")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},".retain"),") are disposables."),(0,i.mdx)("h2",{id:"entrypoint"},"Entrypoint"),(0,i.mdx)("p",null,"A lightweight object containing information on the components which need to be loaded (as in the form of calls to ",(0,i.mdx)("inlineCode",{parentName:"p"},"JSResource"),") and which queries need to be loaded (in the form of preloadable concrete requests) before a particular route, popover or other piece of conditionally loaded UI can be rendered."),(0,i.mdx)("p",null,"All queries which are required for the initial rendering of a piece of UI should be included in that UI's entrypoint."),(0,i.mdx)("p",null,"Entrypoints can contain queries and other entrypoints."),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"#preloadable-concrete-request"},"preloadable concrete request")," and ",(0,i.mdx)("a",{parentName:"p",href:"#jsresource"},"JSResource"),"."),(0,i.mdx)("h2",{id:"environment"},"Environment"),(0,i.mdx)("p",null,"An object bringing together many other Relay objects, most importantly a store and a network. Also, includes a publish queue, operation loader, scheduler and ",(0,i.mdx)("a",{parentName:"p",href:"#missing-field-handler"},"missing fields handlers"),"."),(0,i.mdx)("p",null,"Set using a ",(0,i.mdx)("inlineCode",{parentName:"p"},"RelayEnvironmentProvider")," and passed down through React context."),(0,i.mdx)("p",null,"All non-internal Relay hooks require being called within a Relay environment context."),(0,i.mdx)("h2",{id:"execute"},"Execute"),(0,i.mdx)("p",null,'Executing a query, mutation or subscription (collectively, an operation) roughly means "create a lazy observable that, when subscribed to, will make a network request fulfilling the operation and write the returned data to the store."'),(0,i.mdx)("p",null,"A variety of ",(0,i.mdx)("inlineCode",{parentName:"p"},"execute")," methods are exposed on the Relay environment."),(0,i.mdx)("h2",{id:"fetch-policy"},"Fetch Policy"),(0,i.mdx)("p",null,"A string that determines in what circumstances to make a network request in which circumstances to fulfill the query using data in the store, if available. Either ",(0,i.mdx)("inlineCode",{parentName:"p"},"network-only"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"store-and-network"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"store-or-network")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"store-only"),". (Some methods do not accept all fetch policies.)"),(0,i.mdx)("h2",{id:"field"},"Field"),(0,i.mdx)("p",null,"Basically, anything you can select using a query, mutation, subscription or fragment. For example, ",(0,i.mdx)("inlineCode",{parentName:"p"},"viewer"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"comment_create(input: $CommentCreateData)")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"name")," are all fields."),(0,i.mdx)("p",null,"The GraphQL schema comprises many fields."),(0,i.mdx)("h2",{id:"fragment"},"Fragment"),(0,i.mdx)("p",null,"Fragment is an overloaded term, and has at least two distinct meanings in Relay."),(0,i.mdx)("h3",{id:"fragments-as-a-graphql-concept"},"Fragments as a GraphQL concept"),(0,i.mdx)("p",null,"The fundamental reusable unit of GraphQL. Unlike queries, subscriptions and mutations, fragments cannot be queried on their own and must be embedded within a request."),(0,i.mdx)("p",null,"Fragments can be spread into queries, mutations, subscriptions and other fragments."),(0,i.mdx)("p",null,"Fragments can be standalone (as in ",(0,i.mdx)("inlineCode",{parentName:"p"},"fragment Component_user on User { name }"),") or inline, as in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"... on User { name }")," in ",(0,i.mdx)("inlineCode",{parentName:"p"},"query MyQuery { node(id: $id) { ... on User { name } } }"),"."),(0,i.mdx)("p",null,"Fragments are always defined on a particular type (",(0,i.mdx)("inlineCode",{parentName:"p"},"User")," in the example), which defines what fields can be selected within it."),(0,i.mdx)("h3",{id:"fragments-within-relay"},"Fragments within Relay"),(0,i.mdx)("p",null,"Within Relay, a fragment refers to the fields that are read out for a given fragment/operation. The term is also used colloquially to refer to reader ASTs. So, e.g. the following query and fragment might have identical reader ASTs:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},"query Foo {\n  actor { name }\n}\n")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"fragment Bar on Query {\n  actor { name }\n}\n")),(0,i.mdx)("h2",{id:"fragment-identifier"},"Fragment Identifier"),(0,i.mdx)("p",null,"A string, providing enough information to provide the data for a particular fragment. For example:"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},'1234{"scale":2}/Story_story/{"scale":2}/"4567"')),(0,i.mdx)("p",null,"This identifies by its persist ID (",(0,i.mdx)("inlineCode",{parentName:"p"},"1234"),"), followed by the variables it accepts, followed by the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Story_story")," fragment (which does not have a persist id) and the variables it uses, followed by the Data ID (likely, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"id")," field) of whatever Story happened to be referenced."),(0,i.mdx)("h2",{id:"fragment-reference"},"Fragment Reference"),(0,i.mdx)("p",null,"A parameter passed to ",(0,i.mdx)("inlineCode",{parentName:"p"},"useFragment"),". Obtained by accessing the value onto which a fragment was spread in another ",(0,i.mdx)("a",{parentName:"p",href:"#query"},"query"),", fragment, subscription or mutation. For example,"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"const queryData = usePreloadedQuery(\n  graphql`query ComponentQuery { viewer { account_user { ...Component_name } } }`,\n  {},\n);\n\n// queryData.viewer is the FragmentReference\n// Though this would usually happen in another file, you can\n// extract the value of Component_name as follows:\nconst fragmentData = useFragment(\n  graphql`fragment Component_name on User { name }`,\n  queryData?.viewer?.account_user,\n);\n")),(0,i.mdx)("p",null,"Just like a query reference and a graphql tagged literal describing a query (i.e. a concrete request) can be used to access the data from a query, a fragment reference and a graphql tagged literal describing a fragment (i.e. a reader fragment) can be used to access the data referenced from a fragment."),(0,i.mdx)("h2",{id:"fragment-resource"},"Fragment Resource"),(0,i.mdx)("p",null,"An internal class supporting lazily loaded queries. Exposes two important methods:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"read"),", which is meant to be called during a component's render phase. It will attempt to fulfill a query from the store (by calling ",(0,i.mdx)("inlineCode",{parentName:"li"},"environment.lookup"),") and suspend if the data is not available. It furthermore writes the results from the attempted read (whether a promise, error or result) to an internal cache, and updates that cached value when the promise resolves or rejects."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"subscribe"),", which is called during the commit phase, and establishes subscriptions to the Relay store.")),(0,i.mdx)("p",null,"If the component which calls ",(0,i.mdx)("inlineCode",{parentName:"p"},".read")," successfully loads a query, but suspends on a subsequent hook before committing, the data from that query can be garbage collected before the component ultimately renders. Thus, components which rely on ",(0,i.mdx)("inlineCode",{parentName:"p"},"FragmentResource")," are at risk of rendering null data."),(0,i.mdx)("p",null,"Compare to ",(0,i.mdx)("a",{parentName:"p",href:"#query-resource"},"query resource"),"."),(0,i.mdx)("h2",{id:"fragment-spec-resolver"},"Fragment Spec Resolver"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"fragment-spread"},"Fragment Spread"),(0,i.mdx)("p",null,"A fragment spread is how one fragment is contained in a query, subscription, mutation or other fragment. In the following example, ",(0,i.mdx)("inlineCode",{parentName:"p"},"...Component_name")," is a fragment spread:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},"query ComponentQuery {\n  viewer {\n    account_user {\n      ...Component_name\n    }\n  }\n}\n")),(0,i.mdx)("p",null,"In order for a fragment to be spread in a particular location, the types must match. For example, if ",(0,i.mdx)("inlineCode",{parentName:"p"},"Component_name")," was defined as follows: ",(0,i.mdx)("inlineCode",{parentName:"p"},"fragment Component_name on User { name }"),", this spread would be valid, as ",(0,i.mdx)("inlineCode",{parentName:"p"},"viewer.account_user")," has type ",(0,i.mdx)("inlineCode",{parentName:"p"},"User"),"."),(0,i.mdx)("h2",{id:"garbage-collection"},"Garbage Collection"),(0,i.mdx)("p",null,"Relay can periodically garbage collect data from queries which are no longer being retained."),(0,i.mdx)("p",null,"See more information in the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/docs/guided-tour/reusing-cached-data/presence-of-data/#garbage-collection-in-relay"},"guided tour"),"."),(0,i.mdx)("h2",{id:"graphqltaggednode"},"GraphQLTaggedNode"),(0,i.mdx)("p",null,"This is the type of the call to"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"graphql`...`\n")),(0,i.mdx)("p",null,"It is the union of ReaderFragment, ReaderInlineDataFragment, ConcreteRequest, and ConcreteUpdatableQuery."),(0,i.mdx)(o.OssOnly,{mdxType:"OssOnly"},(0,i.mdx)("p",null,"Note that Flow can be configured to understand that the type of a GraphQL literal is the type of the default export of the generated ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," file.")),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"Note that Flow is configured to understand that the type of a GraphQL literal is the type of the default export of the generated ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," file.")),(0,i.mdx)("h2",{id:"handler"},"Handler"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"id"},"ID"),(0,i.mdx)("p",null,"Relay treats ids specially. In particular, it does the following two things:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"The compiler automatically adds a selection of the ",(0,i.mdx)("inlineCode",{parentName:"li"},"id")," field on every type where the ",(0,i.mdx)("inlineCode",{parentName:"li"},"id")," field has type ",(0,i.mdx)("inlineCode",{parentName:"li"},"ID")," or ",(0,i.mdx)("inlineCode",{parentName:"li"},"ID!"),"."),(0,i.mdx)("li",{parentName:"ul"},"When ",(0,i.mdx)("a",{parentName:"li",href:"#normalization"},"normalizing")," data, if an object has an ",(0,i.mdx)("inlineCode",{parentName:"li"},"id")," property, that field is used as its ID in the store.")),(0,i.mdx)("p",null,"There are types in the schema where the ",(0,i.mdx)("inlineCode",{parentName:"p"},"id")," field does not have type ",(0,i.mdx)("inlineCode",{parentName:"p"},"ID")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"ID!")," (e.g. has the type ",(0,i.mdx)("inlineCode",{parentName:"p"},"string")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"number"),"). If a user selects this field themselves, this field is used as an id. This is unexpected and incorrect behavior."),(0,i.mdx)("h2",{id:"include"},"@include"),(0,i.mdx)("p",null,"A directive that is added to fields, inline fragments and fragment spreads, and allows for conditional inclusion. It is the opposite of the ",(0,i.mdx)("a",{parentName:"p",href:"#skip"},(0,i.mdx)("inlineCode",{parentName:"a"},"@skip"))," directive."),(0,i.mdx)("p",null,"In the compiler, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"@include"),"/",(0,i.mdx)("inlineCode",{parentName:"p"},"@skip")," directives are treated specially, and produce ",(0,i.mdx)("inlineCode",{parentName:"p"},"Condition")," nodes."),(0,i.mdx)("h2",{id:"inline"},"@inline"),(0,i.mdx)("p",null,"A directive that applies to fragments which enables developers to pass masked data to functions that are executed outside of the React render phase."),(0,i.mdx)("p",null,"Normally, data is read out using ",(0,i.mdx)("inlineCode",{parentName:"p"},"useFragment"),". However, this function can only be called during the render phase. If store data is needed in a outside of the render phase, a developer has several options:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"read that data during the render phase, and pass it to the function/have the function close over that data. (See also ","[#relay]",")"),(0,i.mdx)("li",{parentName:"ul"},"pass a reference to an ",(0,i.mdx)("inlineCode",{parentName:"li"},"@inline")," fragment, which can then be accessed (outside of the render phase) using the ",(0,i.mdx)("inlineCode",{parentName:"li"},"readInlineData")," function.")),(0,i.mdx)("p",null,"This directive causes them to be read out when the parent fragment is read out, and unmasked by the call to ",(0,i.mdx)("inlineCode",{parentName:"p"},"readInlineData"),"."),(0,i.mdx)("h2",{id:"interface-graphql"},"Interface (GraphQL)"),(0,i.mdx)("p",null,"An ",(0,i.mdx)("em",{parentName:"p"},"Interface")," is an abstract type that includes a certain set of fields that a type must include to implement the interface."),(0,i.mdx)("p",null,"You can spread an fragment on an interface onto a concrete type (for example ",(0,i.mdx)("inlineCode",{parentName:"p"},"query MyQuery { viewer { account_user { ...on Actor { can_viewer_message } } }"),") or a fragment on a concrete type onto an interface (for example ",(0,i.mdx)("inlineCode",{parentName:"p"},"query MyQuery { node(id: 4) { ... on User { name } } }"),"). You are no longer allowed to spread a fragment on an interface onto an interface."),(0,i.mdx)("p",null,"See also abstract type refinement."),(0,i.mdx)("h2",{id:"invalidation"},"Invalidation"),(0,i.mdx)("p",null,'In certain cases, it is easy to determine the outcome of a mutation. For example, if you "like" a Feedback, the like count will increment and ',(0,i.mdx)("inlineCode",{parentName:"p"},"viewer_did_like")," will be set to true. However, in other cases, such as when you are blocking another user, the full impact on the data in your store is hard to determine."),(0,i.mdx)("p",null,"For situations like these, Relay allows you to invalidate a record (or the whole store), which will cause the data to be re-fetched the next time it is rendered."),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/docs/guided-tour/reusing-cached-data/staleness-of-data/"},"section in the guide"),"."),(0,i.mdx)("h2",{id:"jsresource"},"JSResource"),(0,i.mdx)("p",null,"A lightweight API for specifying a that a React component should be loaded on demand, instead of being bundled with the first require (as would be the case if you imported or required it directly.)"),(0,i.mdx)("p",null,"This API is safe to use in entrypoint files."),(0,i.mdx)(o.OssOnly,{mdxType:"OssOnly"},(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"https://www.npmjs.com/package/jsresource"},"the npm module"),".")),(0,i.mdx)("h2",{id:"lazy-loading"},"Lazy Loading"),(0,i.mdx)("p",null,"A query or entry point is lazy loaded if the request for the data occurs at render time."),(0,i.mdx)("p",null,"Lazy loaded queries and entry points have performance downsides, are vulnerable to being over- and under-fetched, and can result in components being rendered with null data. They should be avoided."),(0,i.mdx)("h2",{id:"linked-record"},"Linked Record"),(0,i.mdx)("p",null,"A linked record is a record that is directly accessible from another record. For example, in the query ",(0,i.mdx)("inlineCode",{parentName:"p"},"query MyQuery { viewer { account_user { active_instant_game { id } } } }"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"active_instant_game")," (which has the type ",(0,i.mdx)("inlineCode",{parentName:"p"},"Application")," is a linked record of ",(0,i.mdx)("inlineCode",{parentName:"p"},"account_user"),"."),(0,i.mdx)("p",null,"A linked record cannot be queried by itself, but must be queried by selecting subfields on it."),(0,i.mdx)("p",null,"Compare to ",(0,i.mdx)("a",{parentName:"p",href:"#value"},"value"),"."),(0,i.mdx)("h2",{id:"literal"},"Literal"),(0,i.mdx)("p",null,"A GraphQL literal is a call to"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"graphql`...`\n")),(0,i.mdx)("p",null,"in your code. These are pre-processed, and replaced at build time with a ",(0,i.mdx)("a",{parentName:"p",href:"#graphqltaggednode"},"GraphQLTaggedNode")," containing an ",(0,i.mdx)("a",{parentName:"p",href:"#ast"},"AST")," representation of the contents of the literal."),(0,i.mdx)("h2",{id:"live"},"@live"),(0,i.mdx)("p",null,"A docblock tag that can be added to mark a Relay resolver as live. To learn more, refer to the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/docs/guides/relay-resolvers/live-fields/"},"live fields section")," of the Relay resolver documentation."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("h2",{id:"live_query"},"@live_query"),(0,i.mdx)("p",null,"A directive used on GraphQL queries that enables data updates to be delivered over time without any custom server-side code. This directive provides a more efficient and maintainable alternative to polling (running the same query over and over again)."),(0,i.mdx)("p",null,"Live queries are a feature of GraphQL within Meta and supported by the ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/omh/view/real_time_graphql/oncall_profile"},"Real-Time GraphQL team"),". To learn more about GraphQL live queries, refer to the ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/wiki/GraphQL_Live_Queries/Overview/"},"GraphQL Live Queries wiki"),"."),(0,i.mdx)("p",null,"You can learn more about how to use @live",(0,i.mdx)("em",{parentName:"p"},"query with Relay on Web with server-polling ",(0,i.mdx)("a",{parentName:"em",href:"https://www.internalfb.com/intern/wiki/GraphQL_Live_Queries/Live_Queries_for_Relay/"},"here")," and client-polling ","[here]","(",(0,i.mdx)("a",{parentName:"em",href:"https://www.internalfb.com/intern/wiki/GraphQL_Live_Queries/Live_Queries_for_Relay"},"https://www.internalfb.com/intern/wiki/GraphQL_Live_Queries/Live_Queries_for_Relay")),"(Client_Polling)/).")),(0,i.mdx)("h2",{id:"lookup"},"Lookup"),(0,i.mdx)("p",null,"One of the main methods exposed by the Relay store. Using a ",(0,i.mdx)("a",{parentName:"p",href:"#reader-selector"},"reader selector"),", traverses the data in the store and returns a ",(0,i.mdx)("a",{parentName:"p",href:"#snapshot"},"snapshot"),", which contains the data being read, as well as information about whether data is missing and other pieces of information. Also exposed via the Relay environment."),(0,i.mdx)("p",null,"Calls ",(0,i.mdx)("a",{parentName:"p",href:"#reader"},(0,i.mdx)("inlineCode",{parentName:"a"},"Reader.read")),"."),(0,i.mdx)("h2",{id:"match"},"@match"),(0,i.mdx)("p",null,"A directive that, when used in combination with ",(0,i.mdx)("a",{parentName:"p",href:"#module"},"@module"),", allows users to download specific JS components alongside the rest of the GraphQL payload if the field decorated with @match has a certain type. See ",(0,i.mdx)("a",{parentName:"p",href:"#3d"},"3D"),"."),(0,i.mdx)("h2",{id:"matchcontainer"},"MatchContainer"),(0,i.mdx)("p",null,"A component that renders the component returned in conjunction with a field decorated with the ",(0,i.mdx)("a",{parentName:"p",href:"#match"},"@match")," directive. See ",(0,i.mdx)("a",{parentName:"p",href:"#3d"},"3D"),"."),(0,i.mdx)("h2",{id:"missing-field-handler"},"Missing Field Handler"),(0,i.mdx)("p",null,"A function that provides a ",(0,i.mdx)("a",{parentName:"p",href:"#dataid"},"DataID")," for a field (for singular and plural linked fields) and default values (for scalar fields)."),(0,i.mdx)("p",null,"For example, you may have already fetched an item with id: 4, and are executing a query which selects ",(0,i.mdx)("inlineCode",{parentName:"p"},"node(id: 4)"),". Without a missing field handler, Relay would not know that the item with id: 4 will be returned by ",(0,i.mdx)("inlineCode",{parentName:"p"},"node(id: 4)"),", and would thus attempt to fetch this data over the network. Providing a missing field handler can inform Relay that the results of this selection are present at id: 4, thus allowing Relay to avoid a network request."),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"getRelayFBMissingFieldHandlers.js")," provides this and other missing field handlers."),(0,i.mdx)("h2",{id:"module"},"@module"),(0,i.mdx)("p",null,"A directive that, when used in combination with ",(0,i.mdx)("a",{parentName:"p",href:"#match"},"@match"),", allows users to specify which JS components to download if the field decorated with @match has a certain type. See ",(0,i.mdx)("a",{parentName:"p",href:"#3d"},"3D"),"."),(0,i.mdx)("h2",{id:"module-1"},"Module"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"mutation"},"Mutation"),(0,i.mdx)("p",null,"A mutation is a combination of two things: a mutation on the backend, followed by query against updated data."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/updating-data/graphql-mutations"},"guide on mutations"),", and ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/wiki/Graphql-for-hack-developers/mutation-root-fields/"},"this article")," on defining mutations in your hack code.")),(0,i.mdx)(o.OssOnly,{mdxType:"OssOnly"},(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/updating-data/graphql-mutations"},"guide on mutations"),".")),(0,i.mdx)("h2",{id:"mutation-root-query"},"Mutation Root Query"),(0,i.mdx)("p",null,"The root object of a mutation query. In an ",(0,i.mdx)("inlineCode",{parentName:"p"},"updater")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"optimisticUpdater"),", calling ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.getRootField('field_name')")," will return the object from the mutation root query named ",(0,i.mdx)("inlineCode",{parentName:"p"},"field_name"),"."),(0,i.mdx)("p",null,"The fields exposed on this object are ",(0,i.mdx)("strong",{parentName:"p"},"not")," the same as those available for queries, and differ across mutations."),(0,i.mdx)("h2",{id:"network"},"Network"),(0,i.mdx)("p",null,"Relay environments contain a ",(0,i.mdx)("inlineCode",{parentName:"p"},"network")," object, which exposes a single ",(0,i.mdx)("inlineCode",{parentName:"p"},"execute")," function. All network requests initiated by Relay will go through this piece of code."),(0,i.mdx)("p",null,"This provides a convenient place to handle cross-cutting concerns, like authentication and authorization."),(0,i.mdx)("h2",{id:"node"},"Node"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"normalization"},"Normalization"),(0,i.mdx)("p",null,"Normalization is the process of turning nested data (such as the server response) and turning it into flat data (which is how Relay stores it in the store.)"),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"#response-normalizer"},"response normalizer"),"."),(0,i.mdx)("h2",{id:"normalization-ast"},"Normalization AST"),(0,i.mdx)("p",null,"An ",(0,i.mdx)("a",{parentName:"p",href:"#ast"},"AST")," that is associated with an ",(0,i.mdx)("a",{parentName:"p",href:"#operation"},"operation")," that (in combination with ",(0,i.mdx)("a",{parentName:"p",href:"#variables"},"variables"),") can be used to:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"write a network payload to the store,"),(0,i.mdx)("li",{parentName:"ul"},"write an optimistic response to the store,"),(0,i.mdx)("li",{parentName:"ul"},"determine whether a query can be fulfilled from data in the store, and"),(0,i.mdx)("li",{parentName:"ul"},"determine which records in the store are reachable (used in ",(0,i.mdx)("a",{parentName:"li",href:"#garbage-collection"},"garbage collection"),").")),(0,i.mdx)("p",null,"Unlike the ",(0,i.mdx)("a",{parentName:"p",href:"#reader-ast"},"reader AST"),", the normalization AST includes information on the contents of nested fragments."),(0,i.mdx)("p",null,"The generated artifact associated with an operation (e.g. ",(0,i.mdx)("inlineCode",{parentName:"p"},"FooQuery.graphql.js"),") contains both a normalization AST and a reader AST."),(0,i.mdx)("h2",{id:"normalization-selector"},"Normalization Selector"),(0,i.mdx)("p",null,"A selector defines the starting point for a traversal into the graph for the purposes of targeting a subgraph, combining a GraphQL fragment, variables, and the Data ID for the root object from which traversal should progress."),(0,i.mdx)("h2",{id:"notify"},"Notify"),(0,i.mdx)("p",null,"A method exposed by the store which will notify each ",(0,i.mdx)("a",{parentName:"p",href:"#subscribe"},"subscriber")," whose data has been modified. Causes components which are rendering data that has been modified to re-render with new data."),(0,i.mdx)("h2",{id:"observable"},"Observable"),(0,i.mdx)("p",null,"The fundamental abstraction in Relay for representing data that may currently be present, but may also only be available in the future."),(0,i.mdx)("p",null,"Observables differ from promises in that if the data in an observable has already been loaded, you can access it synchronously as follows:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},'const completedObservable = Observable.from("Relay is awesome!");\nlet valueFromObservable;\nobservable.subscribe({\n  next: (value) => {\n    valueFromObservable = value;\n    /* this will execute in the same tick */\n  },\n});\nconsole.log(valueFromObservable); // logs out "Relay is awesome!"\n')),(0,i.mdx)("p",null,"This is advantageous, as it allows Relay hooks to not suspend if data is already present in the store."),(0,i.mdx)("p",null,"In Relay, observables are a partial implementation of ",(0,i.mdx)("a",{parentName:"p",href:"https://rxjs-dev.firebaseapp.com/guide/observable"},"RxJS Observables"),"."),(0,i.mdx)("h2",{id:"operation"},"Operation"),(0,i.mdx)("p",null,"In ",(0,i.mdx)("a",{parentName:"p",href:"https://spec.graphql.org/June2018/#sec-Language.Operations"},"GraphQL"),", a query, subscription or mutation."),(0,i.mdx)("p",null,"In Relay, every operation also has an associated ",(0,i.mdx)("a",{parentName:"p",href:"#fragments-within-relay"},"fragment"),". So, an accurate mental model is that operations are fragments whose ",(0,i.mdx)("a",{parentName:"p",href:"#type-condition"},"type condition")," is that they are on ",(0,i.mdx)("a",{parentName:"p",href:"#root-type"},"Query/Mutation/Subscription")," and for which Relay knows how to make a network request."),(0,i.mdx)("h2",{id:"operation-descriptor"},"Operation Descriptor"),(0,i.mdx)("p",null,"Colloquially, an operation descriptor is an operation and variables."),(0,i.mdx)("p",null,"The operation descriptor flowtype contains the three pieces of information that Relay needs to work with the data: ",(0,i.mdx)("a",{parentName:"p",href:"#reader-selector"},"a reader selector"),", a ",(0,i.mdx)("a",{parentName:"p",href:"#normalization-selector"},"normalization selector")," and a ",(0,i.mdx)("a",{parentName:"p",href:"#request-descriptor"},"request descriptor"),"."),(0,i.mdx)("p",null,"The variables are filtered to exclude unneeded variables and are populated to include default values for missing variables, thus ensuring that requests that differ in irrelevant ways are cached using the same request ID."),(0,i.mdx)("h2",{id:"operation-mock-resolver"},"Operation Mock Resolver"),(0,i.mdx)("p",null,"A function taking an operation descriptor and returning a network response or error, used when testing."),(0,i.mdx)("h2",{id:"operation-tracker"},"Operation Tracker"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"optimistic-update"},"Optimistic Update"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"optimistic-updater"},"Optimistic Updater"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"pagination"},"Pagination"),(0,i.mdx)("p",null,"Querying a list of data (a ",(0,i.mdx)("a",{parentName:"p",href:"#connection"},"connection"),") in parts is known as pagination."),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"https://graphql.org/learn/pagination/"},"graphql docs")," and our ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/list-data/pagination"},"guided tour"),"."),(0,i.mdx)("h2",{id:"payload"},"Payload"),(0,i.mdx)("p",null,"The value returned from the GraphQL server as part of the response to a request."),(0,i.mdx)("h2",{id:"plural-field"},"Plural Field"),(0,i.mdx)("p",null,"A field for which the value is an array of ",(0,i.mdx)("a",{parentName:"p",href:"#value"},"values")," or ",(0,i.mdx)("a",{parentName:"p",href:"#record"},"records"),"."),(0,i.mdx)("h2",{id:"preloadable"},"@preloadable"),(0,i.mdx)("p",null,"A directive that modifies queries and which causes Relay to generate ",(0,i.mdx)("inlineCode",{parentName:"p"},"$Parameters.js")," files and preloadable concrete requests. Required if the query is going to be used as part of an entry point."),(0,i.mdx)("h2",{id:"preloadable-concrete-request"},"Preloadable Concrete Request"),(0,i.mdx)("p",null,"A small, lightweight object that provides enough information to initiate the query and fetch the full query AST (the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ConcreteRequest"),".) This object will only be generated if the query is annotated with ",(0,i.mdx)("inlineCode",{parentName:"p"},"@preloadable"),", and is the default export of ",(0,i.mdx)("inlineCode",{parentName:"p"},"$parameters.js")," files. It is only generated for queries which are annotated with ",(0,i.mdx)("inlineCode",{parentName:"p"},"@preloadable"),"."),(0,i.mdx)("p",null,"Unlike concrete requests (the default export of ",(0,i.mdx)("inlineCode",{parentName:"p"},".graphql.js")," files), preloadable concrete requests are extremely light weight."),(0,i.mdx)("p",null,"Note that entrypoints accept either preloadable concrete requests or concrete requests in the ",(0,i.mdx)("inlineCode",{parentName:"p"},".queries[queryName].parameters")," position. However, ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("em",{parentName:"strong"},"because a concrete request is not a lightweight object, you should only include preloadable concrete requests here."))),(0,i.mdx)("p",null,"Note also that preloadable queries have ",(0,i.mdx)("inlineCode",{parentName:"p"},"id")," fields, whereas other queries do not."),(0,i.mdx)("h2",{id:"preloadable-query-registry"},"Preloadable Query Registry"),(0,i.mdx)("p",null,"A central registry which will execute callbacks when a particular Query AST (concrete request) is loaded."),(0,i.mdx)("p",null,"Required because of current limitations on dynamically loading components in React Native."),(0,i.mdx)("h2",{id:"project"},"Project"),(0,i.mdx)("p",null,"For Relay to process a file with a GraphQL literal, it must be included in a project. A project specifies the folders to which it applies and the schema against which to evaluate GraphQL literals, and includes other information needed by the Relay compiler."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"Projects are defined in a single ",(0,i.mdx)("a",{parentName:"p",href:"#config"},"config")," file, found ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/diffusion/WWW/browse/master/scripts/relay/compiler-rs/config.www.json"},"here")," and ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/diffusion/FBS/browse/master/xplat/relay/compiler-rs/config.xplat.json"},"here"),".")),(0,i.mdx)("h2",{id:"profiler"},"Profiler"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"publish"},"Publish"),(0,i.mdx)("p",null,"One of the main methods exposed by the ",(0,i.mdx)("inlineCode",{parentName:"p"},"store"),". Accepts a ",(0,i.mdx)("a",{parentName:"p",href:"#record-source"},"record source"),", from which the records in the store are updated. Also updates the mapping of which records in the store have been updated as a result of publishing."),(0,i.mdx)("p",null,"One or more calls to ",(0,i.mdx)("inlineCode",{parentName:"p"},"publish")," should be followed by a call to ",(0,i.mdx)("a",{parentName:"p",href:"#notify"},(0,i.mdx)("inlineCode",{parentName:"a"},"notify")),"."),(0,i.mdx)("h2",{id:"publish-queue"},"Publish Queue"),(0,i.mdx)("p",null,"A class used internally by the environment to keep track of, apply and revert pending (optimistic) updates; commit client updates; and commit server responses."),(0,i.mdx)("p",null,"Exposes mutator methods like ",(0,i.mdx)("inlineCode",{parentName:"p"},"commitUpdate")," that only add or remove updates from the queue, as well as a ",(0,i.mdx)("inlineCode",{parentName:"p"},"run")," method that actually performs these updates and calls ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.publish")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.notify"),"."),(0,i.mdx)("h2",{id:"query"},"Query"),(0,i.mdx)("p",null,"A ",(0,i.mdx)("a",{parentName:"p",href:"https://graphql.org/learn/queries/"},"GraphQL query")," is a request that can be sent to a GraphQL server in combination with a set of ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/rendering/variables"},"variables"),", in order to fetch some data. It consists of a ",(0,i.mdx)("a",{parentName:"p",href:"#selection"},"selection")," of fields, and potentially includes other ",(0,i.mdx)("a",{parentName:"p",href:"#fragment"},"fragments"),"."),(0,i.mdx)("h2",{id:"query-executor"},"Query Executor"),(0,i.mdx)("p",null,"A class that normalizes and publishes optimistic responses and network responses from a network observable to the store."),(0,i.mdx)("p",null,"After each response is published to the store, ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.notify")," is called, updating all components that need to re-render."),(0,i.mdx)("p",null,"Used by ",(0,i.mdx)("inlineCode",{parentName:"p"},"environment")," in methods such as ",(0,i.mdx)("inlineCode",{parentName:"p"},"execute"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"executeWithSource")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"executeMutation"),", among others."),(0,i.mdx)("h2",{id:"query-reference"},"Query Reference"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"query-resource"},"Query Resource"),(0,i.mdx)("p",null,"A class for helping with lazily loaded queries and exposing two important methods: ",(0,i.mdx)("inlineCode",{parentName:"p"},"prepare")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"retain"),"."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"prepare")," is called during a component's render method, and will either read an existing cached value for the query, or fetch the query and suspend. It also stores the results of the attempted read (whether the data, a promise for the data or an error) in a local cache."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"retain")," is called after the component has successfully rendered.")),(0,i.mdx)("p",null,"If the component which calls ",(0,i.mdx)("inlineCode",{parentName:"p"},".prepare")," successfully loads a query, but suspends on a subsequent hook before committing, the data from that query can be garbage collected before the component ultimately renders. Thus, components which rely on ",(0,i.mdx)("inlineCode",{parentName:"p"},"QueryResource")," are at risk of rendering null data."),(0,i.mdx)("p",null,"Compare to ",(0,i.mdx)("a",{parentName:"p",href:"#fragment-resource"},"fragment resource"),"."),(0,i.mdx)("h2",{id:"raw_response_type"},(0,i.mdx)("inlineCode",{parentName:"h2"},"@raw_response_type")),(0,i.mdx)("p",null,"A directive added to queries which tells Relay to generate types that cover the ",(0,i.mdx)("inlineCode",{parentName:"p"},"optimisticResponse")," parameter to ",(0,i.mdx)("inlineCode",{parentName:"p"},"commitMutation"),"."),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/updating-data/graphql-mutations/#optimistic-response"},"guided tour on updating data")," for more."),(0,i.mdx)("h2",{id:"reader"},"Reader"),(0,i.mdx)("p",null,"TODO this section"),(0,i.mdx)("h2",{id:"reader-ast"},"Reader AST"),(0,i.mdx)("p",null,"An ",(0,i.mdx)("a",{parentName:"p",href:"#AST"},"AST")," that is used to read the data selected in a given fragment."),(0,i.mdx)("p",null,"Both ",(0,i.mdx)("a",{parentName:"p",href:"#operation"},"operations")," and ",(0,i.mdx)("a",{parentName:"p",href:"#fragment"},"fragments")," have reader ASTs."),(0,i.mdx)("p",null,"A reader AST contains information about which fragments are spread at a given location, but unlike a ",(0,i.mdx)("a",{parentName:"p",href:"#normalization-ast"},"normalization AST"),", does not include information about the fields selected within these fragments."),(0,i.mdx)("h2",{id:"reader-fragment"},"Reader Fragment"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"#graphqltaggednode"},"GraphQLTaggedNode"),"."),(0,i.mdx)("h2",{id:"reader-selector"},"Reader Selector"),(0,i.mdx)("p",null,'An object containing enough information for the store to traverse its data and construct an object represented by a query or fragment. Intuitively, this "selects" a portion of the object graph.'),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"#lookup"},"lookup"),"."),(0,i.mdx)("h2",{id:"record"},"Record"),(0,i.mdx)("p",null,"A record refers to any item in the Relay ",(0,i.mdx)("a",{parentName:"p",href:"#store"},"store")," that is stored by ",(0,i.mdx)("a",{parentName:"p",href:"#id"},"ID"),". ",(0,i.mdx)("a",{parentName:"p",href:"#value"},"Values")," are not records; most everything else is."),(0,i.mdx)("h2",{id:"record-source"},"Record Source"),(0,i.mdx)("p",null,"An abstract interface for storing ",(0,i.mdx)("a",{parentName:"p",href:"#record"},"records"),", keyed by ",(0,i.mdx)("a",{parentName:"p",href:"#dataid"},"DataID"),", used both for representing the store's cache for updates to it."),(0,i.mdx)("h2",{id:"record-source-selector-proxy"},"Record Source Selector Proxy"),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"#record-proxy"},"record proxy"),"."),(0,i.mdx)("h2",{id:"record-proxy"},"Record Proxy"),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../api-reference/store"},"store documentation"),"."),(0,i.mdx)("h2",{id:"ref-counting"},"Ref Counting"),(0,i.mdx)("p",null,"The pattern of keeping track of how many other objects can access a particular object, and cleaning it up or disposing of it when that number reaches zero. This pattern is implemented throughout the Relay codebase."),(0,i.mdx)("h2",{id:"reference-marker"},"Reference Marker"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"refetchable"},"@refetchable"),(0,i.mdx)("p",null,"A directive that modifies a fragment, and causes Relay to generate a query for that fragment."),(0,i.mdx)("p",null,"This yields efficiency gains. The fragment can be loaded as part of a single, larger query initially (thus requiring only a single request to fetch all of the data), and yet refetched independently."),(0,i.mdx)("h2",{id:"relay"},"@relay"),(0,i.mdx)("p",null,"A directive that allows you to turn off data masking and is used on plural types."),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"../api-reference/graphql-and-directives/#relaymask-boolean"},"the documentation"),"."),(0,i.mdx)("h2",{id:"relay-classic"},"Relay Classic"),(0,i.mdx)("p",null,"An even older version of Relay."),(0,i.mdx)("h2",{id:"relay-hooks"},"Relay Hooks"),(0,i.mdx)("p",null,"The easiest-to-use, safest Relay API. It relies on suspense, and is safe to use in React concurrent mode."),(0,i.mdx)("p",null,"You should not write new code using Relay Classic or Relay Modern."),(0,i.mdx)("h2",{id:"relay-modern"},"Relay Modern"),(0,i.mdx)("p",null,"An older version of Relay. This version of Relay had an API that was heavily focused on Containers."),(0,i.mdx)("h2",{id:"relay-resolvers"},"Relay Resolvers"),(0,i.mdx)("p",null,"Relay Resolvers is an experimental Relay feature which enables modeling derived state as client-only fields in Relay\u2019s GraphQL graph."),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"/docs/v20.0.0/guides/relay-resolvers/introduction"},"the Relay Resolvers Introduction"),"."),(0,i.mdx)("h2",{id:"release-buffer"},"Release Buffer"),(0,i.mdx)("p",null,"As queries are released (no longer ",(0,i.mdx)("a",{parentName:"p",href:"#retain"},"retained"),"), their root nodes are stored in a release buffer of fixed size, and only evicted by newly released queries when there isn't enough space in the release buffer. When Relay runs garbage collection, queries that are present in the release buffer and not disposed."),(0,i.mdx)("p",null,"The size of the release buffer is configured with the ",(0,i.mdx)("inlineCode",{parentName:"p"},"gcReleaseBufferSize")," parameter."),(0,i.mdx)("h2",{id:"required"},(0,i.mdx)("inlineCode",{parentName:"h2"},"@required")),(0,i.mdx)("p",null,"A Relay directive that makes handling potentially ",(0,i.mdx)("inlineCode",{parentName:"p"},"null")," values more ergonomic."),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"../guides/required-directive/"},"the ",(0,i.mdx)("inlineCode",{parentName:"a"},"@required")," guide"),"."),(0,i.mdx)("h2",{id:"request"},"Request"),(0,i.mdx)("p",null,"A request refers to an API call made over the network to access or mutate some data, or both."),(0,i.mdx)("p",null,"A query, when initiated, may or may not involve making a request, depending on whether the query can be fulfilled from the store or not."),(0,i.mdx)("h2",{id:"request-descriptor"},"Request Descriptor"),(0,i.mdx)("p",null,"An object associating a ",(0,i.mdx)("a",{parentName:"p",href:"#concrete-request"},"concrete request")," and ",(0,i.mdx)("a",{parentName:"p",href:"#variables"},"variables"),", as well as a pre-computed request ID. The variables should be filtered to exclude unneeded variables and are populated to include default values for missing variables, thus ensuring that requests that differ in irrelevant ways are cached using the same request ID."),(0,i.mdx)("h2",{id:"resolver"},"Resolver"),(0,i.mdx)("p",null,"An overloaded term, mostly referring to virtual fields, but also occasionally referring to other things."),(0,i.mdx)("h3",{id:"when-describing-a-field"},"When describing a field"),(0,i.mdx)("p",null,'A resolver field is a "virtual" field that is backed by a function from a fragment reference on the same type to some arbitrary value.'),(0,i.mdx)("p",null,'A live resolver is a "virtual" field that is backed by an external data source. e.g. one might use an external resolver to expose some state that is stored in local storage, or in an external Flux store.'),(0,i.mdx)("h3",{id:"other-meanings"},"Other meanings"),(0,i.mdx)("p",null,"It can also be a ",(0,i.mdx)("a",{parentName:"p",href:"#fragment-spec-resolver"},"fragment spec resolver")," or a ",(0,i.mdx)("a",{parentName:"p",href:"#operation-mock-resolver"},"operation mock resolver"),"."),(0,i.mdx)("h2",{id:"response"},"Response"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"response-normalizer"},"Response Normalizer"),(0,i.mdx)("p",null,"A class, exposing a single method ",(0,i.mdx)("inlineCode",{parentName:"p"},"normalize"),". This will traverse the denormalized response from the API request, normalize it and write the normalized results into a given ",(0,i.mdx)("inlineCode",{parentName:"p"},"MutableRecordSource"),". It is called from the query executor."),(0,i.mdx)("h2",{id:"restore"},"Restore"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"retain"},"Retain"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"render-policy"},"Render Policy"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"revert"},"Revert"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"root-field"},"Root Field"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"root-type"},"Root Type"),(0,i.mdx)("p",null,"The ",(0,i.mdx)("a",{parentName:"p",href:"https://spec.graphql.org/June2018/#sec-Root-Operation-Types"},"GraphQL spec")," defines three special root types: Query, Mutation and Subscription. Queries must select fields off of the Query root type, etc."),(0,i.mdx)("h2",{id:"root"},"Root"),(0,i.mdx)("p",null,"Outermost React Component for a given page or screen. Can be associated with an entrypoint."),(0,i.mdx)("p",null,"Roots for entrypoints are referred to by the ",(0,i.mdx)("a",{parentName:"p",href:"#JSResource"},(0,i.mdx)("inlineCode",{parentName:"a"},"JSResource"))," to the root React component module."),(0,i.mdx)("h2",{id:"scalar"},"Scalar"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"scheduler"},"Scheduler"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"schema"},"Schema"),(0,i.mdx)("p",null,"A collection of all of the GraphQL types that are known to Relay, for a given ",(0,i.mdx)("a",{parentName:"p",href:"#project"},"project"),"."),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("h2",{id:"schema-sync"},"Schema Sync"),(0,i.mdx)("p",null,"The GraphQL ",(0,i.mdx)("a",{parentName:"p",href:"#schema"},"schema")," is derived from annotations on Hack classes in the www repository."),(0,i.mdx)("p",null,"Periodically, those changes are synced to fbsource in a schema sync diff. If the updated schema would break Relay on fbsource, these schema sync diffs will not land."),(0,i.mdx)("p",null,"If a field is removed from www, but is only used in fbsource, the application developer may not notice that the field cannot be removed. This is a common source of schema breakages."),(0,i.mdx)("p",null,"For more info, look ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/wiki/GraphQL/Build_Infra/Schema_Sync/"},"here")," and ",(0,i.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/intern/wiki/Relay-team/GraphQL_Schema_Sync/"},"here"),".")),(0,i.mdx)("h2",{id:"schema-extension"},"Schema Extension"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"selection"},"Selection"),(0,i.mdx)("p",null,'A "selection of fields" refers to the fields you are requesting on an object that you are accessing, as part of a query, mutation, subscription or fragment.'),(0,i.mdx)("h2",{id:"selector"},"Selector"),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"#normalization-selector"},"normalization selector"),"."),(0,i.mdx)("h2",{id:"skip"},"@skip"),(0,i.mdx)("p",null,"A directive that is added to fields, inline fragments and fragment spreads, and allows for conditional inclusion. It is the opposite of the ",(0,i.mdx)("a",{parentName:"p",href:"#include"},(0,i.mdx)("inlineCode",{parentName:"a"},"@include"))," directive."),(0,i.mdx)("h2",{id:"snapshot"},"Snapshot"),(0,i.mdx)("p",null,"The results of running a reader selector against the data currently in the store. See ",(0,i.mdx)("a",{parentName:"p",href:"#lookup"},"lookup"),"."),(0,i.mdx)("h2",{id:"stale"},"Stale"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"store"},"Store"),(0,i.mdx)("p",null,"TODO"),(0,i.mdx)("h2",{id:"stream"},"@stream"),(0,i.mdx)("p",null,"A directive which can be added to a field of ",(0,i.mdx)("inlineCode",{parentName:"p"},"List")," type that enables the individual items in the list to be delivered incrementally. The client can render the initial\nset of items while waiting for the server to deliver the rest of the items. For more detail refer to GraphQL's ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/graphql/graphql-wg/blob/main/rfcs/DeferStream.md#stream"},"documentation on the @stream directive"),"."),(0,i.mdx)("h2",{id:"stream_connection"},"@stream_connection"),(0,i.mdx)("p",null,"A directive that is like the @connection directive for pagination, except modified to enable items in the pagination queue to be delivered incrementally. It has the additional parameter ",(0,i.mdx)("inlineCode",{parentName:"p"},"initial_count")," to specify how many items to deliver in the initial payload. To learn more about how to use this directive refer to the ",(0,i.mdx)("a",{parentName:"p",href:"https://relay.dev/docs/guided-tour/list-data/streaming-pagination/"},"Streaming Pagination page"),"."),(0,i.mdx)("h2",{id:"subscribe"},"Subscribe"),(0,i.mdx)("p",null,"A method exposed by the Relay store. Accepts a callback and a snapshot (see ",(0,i.mdx)("a",{parentName:"p",href:"#lookup"},"lookup"),"). The Relay store will call this callback when ",(0,i.mdx)("a",{parentName:"p",href:"#notify"},(0,i.mdx)("inlineCode",{parentName:"a"},"notify"))," is called, if the data referenced by that snapshot has been updated or invalidated."),(0,i.mdx)("h2",{id:"subscription"},"Subscription"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/updating-data/graphql-subscriptions"},"GraphQL Subscriptions")," are a mechanism which allow clients to subscribe to changes in a piece of data from the server, and get notified whenever that data changes."),(0,i.mdx)("p",null,"A GraphQL Subscription looks very similar to a query, with the exception that it uses the subscription keyword:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},"subscription FeedbackLikeSubscription($input: FeedbackLikeSubscribeData!) {\n  feedback_like_subscribe(data: $input) {\n    feedback {\n      id\n      like_count\n    }\n  }\n}\n")),(0,i.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"../guides/writing-subscriptions"},"the guide"),".")),(0,i.mdx)("h2",{id:"transaction-id"},"Transaction ID"),(0,i.mdx)("p",null,"A unique id for a given instance of a call to ",(0,i.mdx)("inlineCode",{parentName:"p"},"network.execute"),". This ID will be consistent for the entire duration of a network request. It can be consumed by custom log functions passed to ",(0,i.mdx)("inlineCode",{parentName:"p"},"RelayModernEnvironment"),"."),(0,i.mdx)("h2",{id:"traversal"},"Traversal"),(0,i.mdx)("p",null,"There are four tree traversals that are core to understanding the internal behavior of Relay."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Using the normalization AST:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"When Relay normalizes the payload it receives from the GraphQL server in the Response Normalizer;"),(0,i.mdx)("li",{parentName:"ul"},"When Relay reads determines whether there is enough data for to fulfill an operation, in the Data Checker; and"),(0,i.mdx)("li",{parentName:"ul"},"When Relay determines what data is no longer accessible during garbage collection, in the Reference Marker."))),(0,i.mdx)("li",{parentName:"ul"},"Using the reader AST:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"When Relay reads data for rendering, in the Reader.")))),(0,i.mdx)("h2",{id:"type"},"Type"),(0,i.mdx)("p",null,"The GraphQL type of a field is a description of a field on a schema, in terms of what subfields it has, or what it's representation is (String, number, etc.)."),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"#interface-graphql"},"interface"),", ",(0,i.mdx)("a",{parentName:"p",href:"#abstract-type"},"abstract type")," and ",(0,i.mdx)("a",{parentName:"p",href:"https://graphql.org/learn/schema/#type-language"},"the GraphQL docs")," for more info."),(0,i.mdx)("h2",{id:"type-refinement"},"Type Refinement"),(0,i.mdx)("p",null,"The inclusion of a fragment of particular type in a location only known to potentially implement that type. This allows us to select fields if and only if they are defined on that particular object, and return null otherwise."),(0,i.mdx)("p",null,"For example, ",(0,i.mdx)("inlineCode",{parentName:"p"},"node(id: 4) { ... on User { name } }"),". In this case, we do now know ahead of time whether ",(0,i.mdx)("inlineCode",{parentName:"p"},"node(id: 4)")," is a User. If it is, this fragment will include the user name."),(0,i.mdx)("p",null,"See also ",(0,i.mdx)("a",{parentName:"p",href:"#abstract-type-refinement"},"abstract type refinement"),"."),(0,i.mdx)("h2",{id:"updater"},"Updater"),(0,i.mdx)("p",null,"A callback passed to ",(0,i.mdx)("inlineCode",{parentName:"p"},"commitMutation"),", which provides the application developer with imperative control over the data in the store."),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"/docs/v20.0.0/guided-tour/updating-data/introduction"},"the documentation")," and also optimistic updater."),(0,i.mdx)("h2",{id:"value"},"Value"),(0,i.mdx)("p",null,"A single value on a record, such as ",(0,i.mdx)("inlineCode",{parentName:"p"},"has_viewer_liked"),", or ",(0,i.mdx)("inlineCode",{parentName:"p"},"name"),"."),(0,i.mdx)("p",null,"Compare with ",(0,i.mdx)("a",{parentName:"p",href:"#linked-record"},"linked record"),"."),(0,i.mdx)("h2",{id:"variables"},"Variables"),(0,i.mdx)("p",null,"GraphQL variables are a construct that allows referencing dynamic values inside a GraphQL query. They must be provided when the query is initiated, and can be used throughout nested fragments."),(0,i.mdx)("p",null,"See the ",(0,i.mdx)("a",{parentName:"p",href:"../guided-tour/rendering/variables"},"variables section of the guided tour")," and compare with ",(0,i.mdx)("a",{parentName:"p",href:"#argumentdefinitions"},"@argumentDefinitions"),"."),(0,i.mdx)(l.Z,{mdxType:"DocsRating"}))}f.isMDXComponent=!0}}]);