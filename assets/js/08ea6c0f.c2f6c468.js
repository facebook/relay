"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["38695"],{39806(e,n,i){i.r(n),i.d(n,{metadata:()=>o,default:()=>p,frontMatter:()=>l,contentTitle:()=>a,toc:()=>c,assets:()=>s});var o=JSON.parse('{"id":"getting-started/compiler","title":"Relay Compiler","description":"Relay guide to the compiler","source":"@site/versioned_docs/version-v20.0.0/getting-started/compiler.md","sourceDirName":"getting-started","slug":"/guides/compiler/","permalink":"/docs/v20.0.0/guides/compiler/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v20.0.0/getting-started/compiler.md","tags":[],"version":"v20.0.0","frontMatter":{"id":"compiler","title":"Relay Compiler","slug":"/guides/compiler/","description":"Relay guide to the compiler","keywords":["compiler"]},"sidebar":"docs","previous":{"title":"Relay Babel Plugin","permalink":"/docs/v20.0.0/getting-started/babel-plugin/"},"next":{"title":"Compiler Configuration","permalink":"/docs/v20.0.0/getting-started/compiler-config/"}}'),t=i(74848),r=i(28453);let l={id:"compiler",title:"Relay Compiler",slug:"/guides/compiler/",description:"Relay guide to the compiler",keywords:["compiler"]},a,s={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Running the compiler",id:"running-the-compiler",level:2},{value:"Watch mode",id:"watch-mode",level:3},{value:"Codemods",id:"codemods",level:3},{value:"Help",id:"help",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Relay depends upon ahead-of-time compilation of GraphQL queries and fragments to generate artifacts that are used at runtime."}),"\n",(0,t.jsxs)(n.p,{children:["The Relay compiler is a command line tool that reads GraphQL fragments, queries, and mutations in your JavaScript code and generates TypeScript/Flow types and additional JavaScript code that gets included in your code via ",(0,t.jsx)(n.a,{href:"/docs/v20.0.0/getting-started/babel-plugin/",children:"Relay's Babel Plugin"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"This guide explains configuring and using the Relay Compiler."}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The Relay compiler will look for a Relay config in the following locations. It's up to you to decide which location works best for your project."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"relay.config.json"})," in your project root"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"relay.config.(js/mjs/ts)"})," in your project root"]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.code,{children:'"relay"'})," key in your ",(0,t.jsx)(n.code,{children:"package.json"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Relay compiler config tells Relay things like where it can find your GraphQL schema and what language your code is written in. A minimal Relay compiler config looks like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="relay.config.json"',children:'{\n  "src": "./src",\n  "schema": "./schema.graphql",\n  "language": "typescript"\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Install the ",(0,t.jsx)(n.a,{href:"/docs/v20.0.0/editor-support/",children:"Relay VSCode extension"})," to get autocomplete, hover tips, and type checking for the options in your relay config."]})}),"\n",(0,t.jsxs)(n.p,{children:["The compiler config is very powerful, and includes many specialized configuration options. For a full enumeration of the available options see the ",(0,t.jsx)(n.a,{href:"/docs/v20.0.0/getting-started/compiler-config/",children:"Compiler Configuration"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"running-the-compiler",children:"Running the compiler"}),"\n",(0,t.jsxs)(n.p,{children:["It is generally recommended that you add a ",(0,t.jsx)(n.code,{children:"scripts"})," entry to your ",(0,t.jsx)(n.code,{children:"package.json"})," to make it easy to run the Relay compiler for your project."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="package.json"',children:'{\n  "scripts": {\n    // change-line\n    "relay": "relay-compiler"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"With this added you can run the Relay compiler like so:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm run relay\n"})}),"\n",(0,t.jsx)(n.h3,{id:"watch-mode",children:"Watch mode"}),"\n",(0,t.jsxs)(n.p,{children:["If you have ",(0,t.jsx)(n.a,{href:"https://facebook.github.io/watchman",children:"watchman"})," installed you can pass ",(0,t.jsx)(n.code,{children:"--watch"})," to the Relay compiler to have it continue running and automatically update generated files as you edit your product code:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm run relay --watch\n"})}),"\n",(0,t.jsx)(n.h3,{id:"codemods",children:"Codemods"}),"\n",(0,t.jsxs)(n.p,{children:["The Relay compiler supports some built in codemods. Learn more in the ",(0,t.jsx)(n.a,{href:"/docs/v20.0.0/guides/codemods/",children:"Codemods Guide"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"help",children:"Help"}),"\n",(0,t.jsxs)(n.p,{children:["To learn about the other capabilities of the Relay compiler see it's extensive ",(0,t.jsx)(n.code,{children:"--help"})," output:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm run relay --help\n"})})]})}function p(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var o=i(96540);let t={},r=o.createContext(t);function l(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);