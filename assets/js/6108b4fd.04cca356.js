"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["80373"],{49078(e,n,r){r.r(n),r.d(n,{metadata:()=>l,default:()=>u,frontMatter:()=>t,contentTitle:()=>i,toc:()=>d,assets:()=>a});var l=JSON.parse('{"id":"guides/relay-resolvers/enabling","title":"Enabling Relay Resolvers","description":"Enabling experimental Relay Resolvers","source":"@site/versioned_docs/version-v18.0.0/guides/relay-resolvers/enabling.md","sourceDirName":"guides/relay-resolvers","slug":"/guides/relay-resolvers/enabling-resolvers","permalink":"/docs/v18.0.0/guides/relay-resolvers/enabling-resolvers","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/relay/tree/main/website/versioned_docs/version-v18.0.0/guides/relay-resolvers/enabling.md","tags":[],"version":"v18.0.0","frontMatter":{"id":"enabling","title":"Enabling Relay Resolvers","slug":"/guides/relay-resolvers/enabling-resolvers","description":"Enabling experimental Relay Resolvers"},"sidebar":"docs","previous":{"title":"Introduction to Relay Resolvers","permalink":"/docs/v18.0.0/guides/relay-resolvers/introduction"},"next":{"title":"Defining Types","permalink":"/docs/v18.0.0/guides/relay-resolvers/defining-types/"}}'),o=r(74848),s=r(28453);let t={id:"enabling",title:"Enabling Relay Resolvers",slug:"/guides/relay-resolvers/enabling-resolvers",description:"Enabling experimental Relay Resolvers"},i,a={},d=[{value:"Runtime",id:"runtime",level:2},{value:"Enable new Flow based RelayResolver syntax",id:"enable-new-flow-based-relayresolver-syntax",level:2},{value:"Compiler",id:"compiler",level:2}];function c(e){let n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components},{FbInternalOnly:r}=n;return r||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("FbInternalOnly",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Relay Resolvers are still an experimental feature in Relay. As such they require additional configuration to enable. You may also find that the APIs in the documentation are not yet reflected in our community maintained TypeScript types."}),"\n",(0,o.jsx)(n.h2,{id:"runtime",children:"Runtime"}),"\n",(0,o.jsxs)(n.p,{children:["Relay Resolvers must be enabled in your runtime code by using our experimental ",(0,o.jsx)(n.code,{children:"LiveResolverStore"})," as your Relay store and enabling the ",(0,o.jsx)(n.code,{children:"ENABLE_RELAY_RESOLVERS"})," runtime feature flag:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { Environment, RecordSource, RelayFeatureFlags } from "relay-runtime";\n// highlight-next-line\nimport LiveResolverStore from "relay-runtime/lib/store/live-resolvers/LiveResolverStore";\n\nRelayFeatureFlags.ENABLE_RELAY_RESOLVERS = true;\n\n// It is recommended to log errors thrown by Resolvers\nfunction fieldLogger(event) {\n  if(event.kind === "relay_resolver.error") {\n    // Log this somewhere!\n    console.warn(`Resolver error encountered in ${event.owner}.${event.fieldPath}`)\n    console.warn(event.error)\n  }\n}\n\nconst environment = new Environment({\n  network: Network.create(/* your fetch function here */),\n  store: new LiveResolverStore(new RecordSource()),\n  requiredFieldLogger: fieldLogger\n});\n\n// ... create your Relay context with your environment\n'})}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)(n.h2,{id:"enable-new-flow-based-relayresolver-syntax",children:"Enable new Flow based RelayResolver syntax"}),(0,o.jsxs)(n.p,{children:["To opt-in the new syntax in a file, add ",(0,o.jsx)(n.code,{children:"//relay:enable-new-relay-resolver"})," to the file"]}),(0,o.jsxs)(n.p,{children:["To convert files to the new syntax, run codemode: ",(0,o.jsx)(n.code,{children:"flow-runner codemod relay/migrateResolver <path>"}),". The codemod doesn't support all cases, so you might need to modify some files manually after it runs."]})]}),"\n",(0,o.jsx)(n.h2,{id:"compiler",children:"Compiler"}),"\n",(0,o.jsxs)(n.p,{children:["You must enable the ",(0,o.jsx)(n.code,{children:'"enable_relay_resolver_transform"'})," feature flag in your Relay compiler config:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",metastring:'title="relay.config.json"',children:'{\n  "src": "./src",\n  "schema": "./schema.graphql",\n  "language": "typescript",\n  "featureFlags": {\n    // highlight-next-line\n    "enable_relay_resolver_transform": true\n  }\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453(e,n,r){r.d(n,{R:()=>t,x:()=>i});var l=r(96540);let o={},s=l.createContext(o);function t(e){let n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);